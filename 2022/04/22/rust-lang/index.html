

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="0.åŸºæœ¬æ“ä½œ  1.ä½¿ç”¨Clionå¼€å‘Rust â€‹	éœ€è¦åœ¨ç³»ç»Ÿçš„pathé‡Œæ·»åŠ clionçš„binè·¯å¾„ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨clion .æ¥æ‰“å¼€é¡¹ç›®äº†ã€‚  2.ä½¿ç”¨cargoåˆ›å»ºåº“é¡¹ç›® â€‹	cargo new add --lib  3.æ‰“å°åœ°å€ 123456789101112131415161718192021fn main() &amp;#123;    let o &#x3D; Obj::new(1, 2,">
<meta property="og:type" content="article">
<meta property="og:title" content="rust-lang">
<meta property="og:url" content="http://example.com/2022/04/22/rust-lang/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="0.åŸºæœ¬æ“ä½œ  1.ä½¿ç”¨Clionå¼€å‘Rust â€‹	éœ€è¦åœ¨ç³»ç»Ÿçš„pathé‡Œæ·»åŠ clionçš„binè·¯å¾„ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨clion .æ¥æ‰“å¼€é¡¹ç›®äº†ã€‚  2.ä½¿ç”¨cargoåˆ›å»ºåº“é¡¹ç›® â€‹	cargo new add --lib  3.æ‰“å°åœ°å€ 123456789101112131415161718192021fn main() &amp;#123;    let o &#x3D; Obj::new(1, 2,">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220412225015836.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220412225123863.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220114153100948.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220114153226641.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220114182046202.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220114181038063.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220114181940185.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220114182405990.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115132259157.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115132743008.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115132811413.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115133335999.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115133353197.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115134031494.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115135319262.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115140318148.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115141807954.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115142315424.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115144940387.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115144751616.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220115163757974.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220116100625209.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220116102055982.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220116103815978.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220116121716763.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220116142000246.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220116152252174.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220119202214447.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220119202225682.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220120223838199.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220121151726938.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220122155108279.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220123150617915.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220123172820248.png">
<meta property="og:image" content="http://example.com/2022/04/22/rust-lang/image-20220214142148258.png">
<meta property="article:published_time" content="2022-04-22T08:24:14.754Z">
<meta property="article:modified_time" content="2022-04-22T08:24:14.756Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2022/04/22/rust-lang/image-20220412225015836.png">
  
  
  <title>rust-lang - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.1.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="rust-lang">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-04-22 16:24" pubdate>
        April 22, 2022 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      47k å­—
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      391 åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">rust-lang</h1>
            
            <div class="markdown-body">
              <h1 id="0åŸºæœ¬æ“ä½œ"><a class="markdownIt-Anchor" href="#0åŸºæœ¬æ“ä½œ"></a> 0.åŸºæœ¬æ“ä½œ</h1>
<h2 id="1ä½¿ç”¨clionå¼€å‘rust"><a class="markdownIt-Anchor" href="#1ä½¿ç”¨clionå¼€å‘rust"></a> 1.ä½¿ç”¨Clionå¼€å‘Rust</h2>
<p>â€‹	éœ€è¦åœ¨ç³»ç»Ÿçš„pathé‡Œæ·»åŠ clionçš„binè·¯å¾„ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨clion .æ¥æ‰“å¼€é¡¹ç›®äº†ã€‚</p>
<h2 id="2ä½¿ç”¨cargoåˆ›å»ºåº“é¡¹ç›®"><a class="markdownIt-Anchor" href="#2ä½¿ç”¨cargoåˆ›å»ºåº“é¡¹ç›®"></a> 2.ä½¿ç”¨cargoåˆ›å»ºåº“é¡¹ç›®</h2>
<p>â€‹	cargo new add --lib</p>
<h2 id="3æ‰“å°åœ°å€"><a class="markdownIt-Anchor" href="#3æ‰“å°åœ°å€"></a> 3.æ‰“å°åœ°å€</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">o</span> = Obj::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">adr</span> = &amp;o <span class="hljs-keyword">as</span> *<span class="hljs-keyword">const</span> Obj <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;0x&#123;:x&#125;&quot;</span>, adr);<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Obj</span> &#123;<br>    val1: <span class="hljs-type">u8</span>,<br>    val2: <span class="hljs-type">u8</span>,<br>    val3: <span class="hljs-type">u8</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Obj</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(v1: <span class="hljs-type">u8</span>, v2: <span class="hljs-type">u8</span>, v3: <span class="hljs-type">u8</span>) <span class="hljs-punctuation">-&gt;</span> Obj &#123;<br>        Obj &#123;<br>            val1: v1,<br>            val2: v2,<br>            val3: v3,<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="1-rustç®€ä»‹"><a class="markdownIt-Anchor" href="#1-rustç®€ä»‹"></a> 1 rustç®€ä»‹</h1>
<script>
    if("qcy20011121"==prompt("è¯·è¾“å…¥æ–‡æ¡£å¯†ç "))
    {
        alert("å¯†ç æ­£ç¡®");
    }
    else
    {
        alert("å¯†ç é”™è¯¯è¿”å›ä¸»é¡µ");
        location="/";
    }
</script>
<h2 id="11-åŸºæœ¬ç‰¹æ€§"><a class="markdownIt-Anchor" href="#11-åŸºæœ¬ç‰¹æ€§"></a> 1.1 åŸºæœ¬ç‰¹æ€§</h2>
<p>ç‰¹æ€§</p>
<ul>
<li>
<p>è¿è¡Œæ—¶é€Ÿåº¦å¿«</p>
</li>
<li>
<p>å†…å­˜å®‰å…¨</p>
</li>
<li>
<p>å¹¶å‘</p>
<p>rustæ˜¯ä¸€é—¨å®‰å…¨çš„è¯­è¨€ï¼Œè¡¨ç°åœ¨ç±»å‹å®‰å…¨å’Œå†…å­˜å®‰å…¨ï¼ˆæ¨ªå‘å¯¹æ¯”c/c++ï¼‰ï¼ŒåŒæ—¶æ€§èƒ½ä¹Ÿå¾ˆå¥½ï¼Œå› ä¸ºæ²¡æœ‰GCï¼ˆå¯¹æ¯”javaï¼‰ï¼ŒåŒæ—¶åœ¨è®¾è®¡çš„æ—¶å€™å°±è€ƒè™‘äº†å¤šæ ¸å¤„ç†å™¨ï¼Œæ”¯æŒå¹¶å‘ï¼Œç«ç‹å…¬å¸çš„ä¸€ä¸ªå†…æ ¸å°±æ˜¯ç”¨rustå†™çš„ï¼Œå…¨å¹¶å‘æ‰§è¡Œã€‚</p>
<p>rusté‡‡çš„å‘½åæ–¹æ³•æ˜¯ï¼šè›‡å½¢å‘½åæ³•ï¼Œä¹Ÿå°±æ˜¯å­—æ¯å°å†™å•è¯ä¹‹é—´åŠ ä¸‹åˆ’çº¿</p>
<p>rustçš„å‘½ä»¤æœ‰rustcå’Œrustupï¼Œrustcåé¢çš„cçš„æ„æ€æ˜¯ç¼–è¯‘å™¨ã€‚</p>
</li>
</ul>
<h2 id="12-å‘½ä»¤è¡Œvscodeæ„å»ºé¡¹ç›®"><a class="markdownIt-Anchor" href="#12-å‘½ä»¤è¡Œvscodeæ„å»ºé¡¹ç›®"></a> 1.2 å‘½ä»¤è¡Œ+vscodeæ„å»ºé¡¹ç›®</h2>
<p>æ­¥éª¤</p>
<ul>
<li>mkdir hello_ruståˆ›å»ºå·¥ç¨‹ç›®å½•</li>
<li>cd h*è¿›å…¥ç›®å½•</li>
<li>code .ç”¨vscodeæ‰“å¼€è¯¥å·¥ç¨‹</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust">å¸¸ç”¨çš„windows cmdå‘½ä»¤<br><span class="hljs-number">1</span>. cd / -<span class="hljs-punctuation">-&gt;</span> è¿›å…¥é¦–ç›˜ï¼Œå¦‚cç›˜dç›˜<br><span class="hljs-number">2</span>. cd .. -<span class="hljs-punctuation">-&gt;</span> è¿›å…¥ä¸Šä¸€çº§ç›®å½•<br><span class="hljs-number">3</span>. dir -<span class="hljs-punctuation">-&gt;</span> æŸ¥çœ‹å½“å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ dir /a æ˜¯æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶<br><span class="hljs-number">4</span>. å¯ä»¥ç”¨help cdæŸ¥çœ‹cdçš„ç”¨æ³•<br></code></pre></td></tr></table></figure>
<h2 id="13-ç¼–å†™hello-worldç¨‹åº"><a class="markdownIt-Anchor" href="#13-ç¼–å†™hello-worldç¨‹åº"></a> 1.3 ç¼–å†™hello worldç¨‹åº</h2>
<ul>
<li>fnè¡¨ç¤ºå‡½æ•°å£°æ˜</li>
<li>rusté‡‡ç”¨çš„ç¼©è¿›ä¸æ˜¯tabï¼Œè€Œæ˜¯å››ä¸ªç©ºæ ¼</li>
<li>println!æ˜¯rustçš„å®ï¼Œä¹Ÿå°±æ˜¯rust micro</li>
<li>rustæ˜¯é¢„å…ˆç¼–è¯‘çš„è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯å…ˆç¼–è¯‘å¥½ï¼Œç„¶åç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ç›´æ¥äº¤ç»™åˆ«äººä½¿ç”¨ï¼Œè€Œæ— éœ€rustç¯å¢ƒ</li>
<li>rustcåªé€‚ç”¨äºç®€å•çš„rustæ–‡ä»¶ï¼Œç”¨cargo</li>
</ul>
<h2 id="14-cargoåˆ›å»ºå·¥ç¨‹"><a class="markdownIt-Anchor" href="#14-cargoåˆ›å»ºå·¥ç¨‹"></a> 1.4 cargoåˆ›å»ºå·¥ç¨‹</h2>
<div class="code-wrapper"><pre><code class="hljs">cargoæ˜¯rustçš„åˆ›å»ºåŠåŒ…ç®¡ç†å·¥å…·

rusté‡Œä»£ç çš„åŒ…ç§°ä¸ºcrate
</code></pre></div>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust">windows cmd<br><span class="hljs-number">1</span>.rmdir xxx -- remove dir<br><span class="hljs-number">2</span>.del xxx -- delete file<br></code></pre></td></tr></table></figure>
<p>cargo.tomlæ–‡ä»¶</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-number">1</span>.tomlæ˜¯cargoçš„é…ç½®æ–‡ä»¶<br><span class="hljs-number">2</span>.å‰ä¸€éƒ¨åˆ†æ˜¯é¡¹ç›®çš„ä¿¡æ¯ï¼Œå¦‚é¡¹ç›®åç§°ï¼Œpackageï¼Œç‰ˆæœ¬ä¿¡æ¯ä½œè€…ç­‰<br><span class="hljs-number">3</span>.åéƒ¨åˆ†æ˜¯é¡¹ç›®ä¾èµ–<br></code></pre></td></tr></table></figure>
<p>é¡¶å±‚ç›®å½•å¯æ”¾ç½®çš„ä¿¡æ¯</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-number">1</span>.READMEæ–‡ä»¶<br><span class="hljs-number">2</span>.è®¸å¯ä¿¡æ¯<br><span class="hljs-number">3</span>.é…ç½®æ–‡ä»¶<br><span class="hljs-number">4</span>.å…¶å®ƒä¸æºç¨‹åºæ— å…³çš„ä¸œè¥¿<br></code></pre></td></tr></table></figure>
<div class="code-wrapper"><pre><code class="hljs">å½“æ²¡æœ‰ç”¨cargoåˆ›å»ºå·¥ç¨‹æ—¶ï¼Œå¯ä»¥ç›´æ¥æŠŠæ–‡ä»¶æ‹·è´åˆ°srcä¸‹ï¼Œç„¶åå†åœ¨é¡¶å±‚ç›®å½•ä¸‹ç¼–å†™ä¸€ä¸ªcargo.tomlæ–‡ä»¶å³å¯
</code></pre></div>
<p>cargo.lock</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-number">1</span>.è´Ÿè´£è¿½å¯»é¡¹ç›®ä¾èµ–çš„å‡†ç¡®ç‰ˆæœ¬<br><span class="hljs-number">2</span>.ä¸éœ€è¦å»ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨cargoè¿è¡Œé¡¹ç›®</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-number">1</span>.cargo runä¼šç¼–è¯‘å½“å‰å·¥ç¨‹çš„main.rsåŠç›¸å…³æ–‡ä»¶ï¼Œç„¶åå†è¿è¡Œç”Ÿæˆçš„exeæ–‡ä»¶<br><span class="hljs-number">2</span>.å¦‚æœæºä»£ç æ²¡æœ‰æ›´æ”¹è¿‡çš„è¯ï¼Œå°±ä¸ç¼–è¯‘äº†ï¼Œä¹‹æ—¢ç„¶è¿è¡Œexe<br></code></pre></td></tr></table></figure>
<p>cargo checkè°ƒè¯•æ£€æŸ¥é¡¹ç›®</p>
<div class="code-wrapper"><pre><code class="hljs">ä¸€èˆ¬åœ¨å¼€å‘çš„æ—¶å€™éƒ½æ˜¯ç”¨çš„è¿™ä¸ªå‘½ä»¤æ¥è¿›è¡Œæ£€æŸ¥è°ƒè¯•ï¼Œå› ä¸ºæ›´å¿«ã€‚

åªæœ‰è¦ç”Ÿæˆæ–‡ä»¶çš„æ—¶å€™æ‰ä¼šä½¿ç”¨run/buildæŒ‡ä»¤

å¦‚æœè¦å‘å¸ƒçš„è¯ï¼Œä½¿ç”¨cargo build --releaseï¼Œè¿™æ ·ç¼–è¯‘çš„æ—¶å€™æ—¶é—´æ›´ä¹…ï¼Œä¼šè¿›è¡Œä¼˜åŒ–ï¼Œæé«˜ç¼–è¯‘å‡ºæ¥çš„ç¨‹åºçš„æ€§èƒ½
</code></pre></div>
<br>
<h1 id="2-ruståŸºæœ¬è¯­æ³•"><a class="markdownIt-Anchor" href="#2-ruståŸºæœ¬è¯­æ³•"></a> 2 ruståŸºæœ¬è¯­æ³•</h1>
<h2 id="21-è·å–æ§åˆ¶å°è¾“å…¥"><a class="markdownIt-Anchor" href="#21-è·å–æ§åˆ¶å°è¾“å…¥"></a> 2.1 è·å–æ§åˆ¶å°è¾“å…¥</h2>
<h3 id="1è¾“å…¥"><a class="markdownIt-Anchor" href="#1è¾“å…¥"></a> 1.è¾“å…¥</h3>
<div class="code-wrapper"><pre><code class="hljs">stdé‡Œæä¾›äº†ä¸€ä¸ªioï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†è¾“å…¥è¾“å‡ºï¼Œç„¶åioé‡Œæœ‰ä¸€ä¸ªå…³è”å‡½æ•°å«stdinï¼Œæ˜¯ioé‡Œå…³äºè¾“å…¥è¾“å‡ºçš„è¾“å…¥é‚£ä¸€éƒ¨åˆ†ï¼Œä¼šè¿”å›ä¸€ä¸ªå¥æŸ„ã€‚ç„¶åstdiné‡Œæœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯read_lineï¼Œè¯»å–å‘½ä»¤è¡Œä¸­çš„ä¸€è¡Œï¼Œè¿™ä¸ªæ–¹æ³•å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥è¯¥æœ‰ä¸€ä¸ªexceptå‡½æ•°ã€‚

read_lineä¼šè¿”å›ä¸€ä¸ªio::Resultç±»å‹ï¼Œä¹Ÿå°±æ˜¯æšä¸¾ç±»å‹ï¼Œæœ‰ä¸¤ä¸ªå€¼ï¼Œä¸€ä¸ªæ˜¯OKï¼Œå¦ä¸€ä¸ªæ˜¯Errï¼Œå¦‚æœè¿”å›Errçš„è¯ï¼Œå°±ä¼šä¸­æ–­å½“å‰ç¨‹åºï¼Œæ‰§è¡Œexcepté‚£ä¸€éƒ¨åˆ†ã€‚
</code></pre></div>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust">std::io::stdin.<span class="hljs-title function_ invoke__">read_line</span>(&amp;<span class="hljs-keyword">mut</span> string).<span class="hljs-title function_ invoke__">except</span>(<span class="hljs-string">&quot;exception message&quot;</span>);<br></code></pre></td></tr></table></figure>
<div class="code-wrapper"><pre><code class="hljs">å…³è”å‡½æ•°ç±»ä¼¼äºjavaä¸­çš„é™æ€æ–¹æ³•ã€‚
</code></pre></div>
<p>â€‹	rustä¼šæœ‰ä¸€äº›é»˜è®¤çš„precludeçš„ç±»å‹ï¼Œé¢„å¯¼å…¥ã€‚è¦æƒ³ä½¿ç”¨å…¶å®ƒçš„ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨useå¼•å…¥å¤–éƒ¨åŒ…ã€‚</p>
<p>â€‹	<strong>use std::io</strong>è¡¨ç¤ºå¼•å…¥äº†æ ‡å‡†åº“ä¸‹çš„ioè¿™ä¸ªåŒ…ï¼Œè¯¥åŒ…ä¸‹çš„æ‰€æœ‰ç±»å‹éƒ½å¯ä»¥é€šè¿‡io::xxxæ¥ä½¿ç”¨ã€‚</p>
<p>â€‹	**io::stdin()**ä¼šè¿”å›ä¸€ä¸ªå¥æŸ„ã€‚å¥æŸ„å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°æˆ–è€…å…¶å®ƒå†…å®¹ï¼Œå°†OSæˆ–è€…æ•°æ®åº“çš„æŸå—å†…å­˜å…³è”èµ·æ¥ï¼Œè¿™æ˜¯ç™¾åº¦ä¸Šçš„è§£é‡Šã€‚ä¸‹é¢æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­çš„è§£é‡Šï¼Œå¯ä»¥ç»“åˆå‚è€ƒã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">A handle to the standard input stream of a process.<br><br>Each handle is a shared reference to a global buffer of input data to this process. A handle can be lockâ€™d to gain full access to BufRead <span class="hljs-title function_">methods</span> <span class="hljs-params">(e.g., .lines())</span>. Reads to this handle are otherwise locked with respect to other reads.<br></code></pre></td></tr></table></figure>
<h3 id="2è¾“å‡º"><a class="markdownIt-Anchor" href="#2è¾“å‡º"></a> 2.è¾“å‡º</h3>
<div class="code-wrapper"><pre><code class="hljs">println!å®
</code></pre></div>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªæ•°å­—ï¼š&#123;&#125;&quot;</span>, number);<br></code></pre></td></tr></table></figure>
<div class="code-wrapper"><pre><code class="hljs">&#123;&#125;ä¸­çš„å°±æ˜¯numberã€‚
</code></pre></div>
<h2 id="22-æ·»åŠ å¤–éƒ¨ä¾èµ–åŒ…randä¿®æ”¹tomlæ–‡ä»¶"><a class="markdownIt-Anchor" href="#22-æ·»åŠ å¤–éƒ¨ä¾èµ–åŒ…randä¿®æ”¹tomlæ–‡ä»¶"></a> 2.2 æ·»åŠ å¤–éƒ¨ä¾èµ–åŒ…randï¼ˆä¿®æ”¹tomlæ–‡ä»¶ï¼‰</h2>
<div class="code-wrapper"><pre><code class="hljs">åœ¨cargo.tomlä¸­æ·»åŠ binç»“ç‚¹ã€‚
</code></pre></div>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs toml"><span class="hljs-section">[package]</span><br><span class="hljs-attr">name</span> = <span class="hljs-string">&quot;guess_game&quot;</span><br><span class="hljs-attr">version</span> = <span class="hljs-string">&quot;0.1.0&quot;</span><br><span class="hljs-attr">edition</span> = <span class="hljs-string">&quot;2021&quot;</span><br><br><span class="hljs-comment"># See more keys and their definitions at https://doc.rust-lang/.org/cargo/reference/manifest.html</span><br><span class="hljs-comment"># ä¸‹é¢çš„éƒ¨åˆ†æ˜¯æ·»åŠ çš„ä»£ç ï¼Œå…¶ä¸­nameæ˜¯ä½ çš„é¡¹ç›®åç§°</span><br><span class="hljs-section">[[bin]]</span><br><span class="hljs-attr">name</span> = <span class="hljs-string">&quot;guess_game&quot;</span><br><span class="hljs-attr">path</span> = <span class="hljs-string">&quot;src/test.rs&quot;</span><br><br><span class="hljs-section">[dependencies]</span><br><span class="hljs-attr">rand</span> = <span class="hljs-string">&quot;0.5.0&quot;</span><br></code></pre></td></tr></table></figure>
<div class="code-wrapper"><pre><code class="hljs">ç„¶åcargoå°±ä¼šè‡ªåŠ¨ä¸‹è½½ä¾èµ–åŒ…äº†ã€‚

ä¸ºä»€ä¹ˆä¼šè‡ªåŠ¨ä¸‹è½½åŒ…ï¼Ÿ

å…¶å®ï¼Œæ˜¯å› ä¸ºæ‰“å¼€äº†rust serverï¼Œè¿™æ ·å°±ä¼šè‡ªåŠ¨å»æ‰«ætomlé‡Œçš„ä¾èµ–ï¼Œæ£€æŸ¥ç‰ˆæœ¬å¹¶ä¸”åŠæ—¶ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ã€‚

å¦‚æœæˆ‘ä»¬å…³é—­è¿™ä¸ªserverï¼Œé‚£ä¹ˆæ›´æ–°tomlä¸­çš„ä¾èµ–ï¼Œå·¥ç¨‹æ–‡ä»¶ä¸­çš„åŒ…å¹¶ä¸ä¼šæ›´æ–°ï¼Œå› ä¸ºå·¥ç¨‹æ–‡ä»¶ä¼šå»lockæ–‡ä»¶ä¸­å»æ‰¾åˆ°å¹¶ä½¿ç”¨å¯¹åº”çš„ç‰ˆæœ¬ã€‚è¿™ä¸ªæ—¶å€™ä¸ä»…è¦ä¿®æ”¹tomlï¼Œè¿˜è¦è¿›è¡Œç”Ÿçº§ï¼Œä¹Ÿå°±æ˜¯è¾“å…¥æŒ‡ä»¤ï¼šcargo updateã€‚

ä½†äº‹å®ä¸Šä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤éœ€è¦æ¢æºï¼Œå› ä¸ºç›´æ¥ç”¨çš„è¯ï¼Œä¼šæç¤ºè¶…æ—¶ï¼Œå› ä¸ºä¸‹è½½çš„æºå¥½åƒæ˜¯githubï¼Œéœ€è¦ç”¨steam++åŠ é€Ÿæˆ–è€…æ¢æºã€‚
</code></pre></div>
<p>â€‹	cargo.lockæ–‡ä»¶æ˜¯ä¸€ä¸ªç‰ˆæœ¬é”ï¼Œé”ä½å½“å‰é¡¹ç›®ä½¿ç”¨çš„åŒ…çš„ç‰ˆæœ¬ã€‚å°±ç®—æ›´æ–°äº†tomlæ–‡ä»¶ï¼ŒåŒ…ä¹Ÿä¸ä¼šæ›´æ–°ï¼Œé™¤éä½¿ç”¨cargo update</p>
<p>â€‹	è¿™é‡Œå¼•å…¥äº†ä¸€ä¸ªRngï¼Œæ˜¯ä¸€ä¸ªtraitã€‚è‹¥æƒ³ä½¿ç”¨ç±»å‹Aï¼ŒAå®ç°äº†trait Bï¼Œé‚£ä¹ˆéœ€è¦åŒæ—¶use traitå’Œç±»å‹ã€‚</p>
<p>â€‹	è¿™é‡Œå°±æ˜¯å¼•å…¥äº†Rngå’Œthread_rng()éšæœºæ•°ç”Ÿæˆå™¨ç±»å‹ã€‚</p>
<h2 id="23-ä½¿ç”¨æšä¸¾è¿›è¡Œæ¯”è¾ƒ"><a class="markdownIt-Anchor" href="#23-ä½¿ç”¨æšä¸¾è¿›è¡Œæ¯”è¾ƒ"></a> 2.3 ä½¿ç”¨æšä¸¾è¿›è¡Œæ¯”è¾ƒ</h2>
<div class="code-wrapper"><pre><code class="hljs">è¿›è¡Œæ¯”è¾ƒéœ€è¦ç”¨åˆ°stdä¸‹çš„cmpä¸­çš„Orderingè¿™ä¸ªæšä¸¾ç±»å‹ã€‚
</code></pre></div>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::cmp::Ordering;<br></code></pre></td></tr></table></figure>
<div class="code-wrapper"><pre><code class="hljs">è¿›è¡Œæšä¸¾æ—¶éœ€è¦æ³¨æ„ä¸€ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š
</code></pre></div>
<ul>
<li>ç±»å‹ä¸€è‡´</li>
<li>ä½¿ç”¨æ—¶å¤§å°ç­‰éƒ½å¾—å†™å…¨</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">num1</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">num2</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">2</span>;<br><span class="hljs-keyword">match</span> num1.<span class="hljs-title function_ invoke__">cmp</span>(&amp;num2) &#123;<br>    Ordering::Equal =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;=&quot;</span>),<br>    Ordering::Greater =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&gt;&quot;</span>),<br>    Ordering::Less =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&lt;&quot;</span>),<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="24-å¤„ç†å¼‚å¸¸"><a class="markdownIt-Anchor" href="#24-å¤„ç†å¼‚å¸¸"></a> 2.4 å¤„ç†å¼‚å¸¸</h2>
<div class="code-wrapper"><pre><code class="hljs">å‰é¢æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯exceptæ–¹æ³•æ¥å¤„ç†å¼‚å¸¸ï¼Œå¦‚parseå°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªResultï¼Œæ ¹æ®è¿™ä¸ªç±»å‹æ˜¯OKè¿˜æ˜¯Erræ¥åˆ¤æ–­æ˜¯å¦æ‰§è¡Œexceptä¸­çš„å†…å®¹ã€‚å¦‚æœResultä¸­åˆ¤å®šä¸ºErrçš„è¯ï¼Œä¼šç›´æ¥ä¸­æ–­å½“å‰ç¨‹åºï¼Œç„¶åç¨‹åºç»“æŸï¼ˆå´©æºƒï¼‰ã€‚è¿™æ ·æˆ‘ä»¬çš„ç¨‹åºä¸€é‡åˆ°éæ³•è¾“å…¥å°±å´©æºƒï¼Œå¹¶ä¸å¥å£®ã€‚

æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ç”¨äº†ä¸Šä¸€èŠ‚ä¸­çš„matchæ¨¡å¼åŒ¹é…æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœæ˜¯OKçš„è¯ï¼Œå°±æ‰§è¡Œokçš„ä»£ç å—ï¼Œå¦‚æœæ˜¯Rrrçš„è¯å†åšç›¸åº”çš„åº”å¯¹æªæ–½ï¼ˆå¦‚æç¤ºç”¨æˆ·é‡æ–°è¾“å…¥ï¼‰
</code></pre></div>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">num</span>: <span class="hljs-type">u32</span> = <span class="hljs-keyword">match</span> num.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">parse</span>() &#123;<br>    <span class="hljs-title function_ invoke__">Ok</span>(num) =&gt; num,<br>    <span class="hljs-title function_ invoke__">Err</span>(_) =&gt; &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; is not valid input, try again&quot;</span>, num.<span class="hljs-title function_ invoke__">trim</span>());<br>        <span class="hljs-keyword">continue</span>;<br>    &#125;,<br>&#125;; <span class="hljs-comment">//å°†å­—ç¬¦ä¸²è½¬ä¸ºu32ç±»å‹ï¼Œæ— ç¬¦å·æ•´æ•°32ä½</span><br></code></pre></td></tr></table></figure>
<p>â€‹	ä¸‹é¢æ˜¯å®Œæ•´çš„çŒœæ•°å­—ä»£ç ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> rand::&#123;Rng, thread_rng&#125;;<br><span class="hljs-keyword">use</span> std::io::stdin;<br><span class="hljs-keyword">use</span> std::cmp::Ordering;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">ans</span> = <span class="hljs-title function_ invoke__">thread_rng</span>().<span class="hljs-title function_ invoke__">gen_range</span>(<span class="hljs-number">1</span>..<span class="hljs-number">101</span>);<span class="hljs-comment">// ä½¿ç”¨éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆéšæœºæ•°</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">hander</span> = <span class="hljs-title function_ invoke__">stdin</span>();<span class="hljs-comment">// åˆ›å»ºå¥æŸ„ï¼Œå¯ä»¥å¤ç”¨</span><br>    <span class="hljs-keyword">loop</span> &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">guess</span> = String::<span class="hljs-title function_ invoke__">new</span>();<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        è¿™é‡Œåœ¨é‡Œé¢åˆ›å»ºäº†stringç±»å‹ï¼Œå› ä¸ºä¸‹é¢ä¼šä½¿ç”¨shadowæœºåˆ¶ï¼Œä¼šè¦†ç›–ç±»å‹</span><br><span class="hljs-comment">        åŒæ—¶ï¼Œå¥æŸ„æ˜¯ä¼šåœ¨stråé¢è¿½åŠ å†…å®¹ï¼Œæ‰€ä»¥è¿™ä¸ªstringæ˜¯ä¸€å®šä¸å¯ä»¥å¤ç”¨çš„</span><br><span class="hljs-comment">        */</span><br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;enter a num: &quot;</span>);<br>        hander.<span class="hljs-title function_ invoke__">read_line</span>(&amp;<span class="hljs-keyword">mut</span> guess).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">&quot;unknown error&quot;</span>);<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">guess</span>: <span class="hljs-type">i32</span> = <span class="hljs-keyword">match</span> guess.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">parse</span>() &#123;<br>            <span class="hljs-title function_ invoke__">Ok</span>(i) =&gt; i,<br>            <span class="hljs-title function_ invoke__">Err</span>(_) =&gt; &#123;<br>                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;please enter a num&quot;</span>);<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;,<br>        &#125;;<br>        <span class="hljs-keyword">match</span> guess.<span class="hljs-title function_ invoke__">cmp</span>(&amp;ans) &#123;<br>            Ordering::Equal =&gt; &#123;<br>                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;right&quot;</span>);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            Ordering::Greater =&gt; &#123;<br>                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;greater&quot;</span>);<br>            &#125;<br>            Ordering::Less =&gt; &#123;<br>                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;less&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="3-å˜é‡åŠæ§åˆ¶æµ"><a class="markdownIt-Anchor" href="#3-å˜é‡åŠæ§åˆ¶æµ"></a> 3 å˜é‡åŠæ§åˆ¶æµ</h1>
<h2 id="31å˜é‡"><a class="markdownIt-Anchor" href="#31å˜é‡"></a> 3.1å˜é‡</h2>
<h3 id="311-ä¸å¯å˜å˜é‡"><a class="markdownIt-Anchor" href="#311-ä¸å¯å˜å˜é‡"></a> 3.1.1 ä¸å¯å˜å˜é‡</h3>
<p>â€‹	ä½¿ç”¨letå…³é”®å­—å£°æ˜ï¼Œå°†ç­‰å·å³è¾¹çš„å€¼ç»‘å®šåˆ°ç­‰å·å·¦ä¾§ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = -<span class="hljs-number">1</span>;<br><span class="hljs-comment">// num = 2;é”™è¯¯ï¼Œä¸å¯å˜å˜é‡æ— æ³•äºŒæ¬¡ç»‘å®š</span><br></code></pre></td></tr></table></figure>
<h3 id="312-å¯å˜å˜é‡"><a class="markdownIt-Anchor" href="#312-å¯å˜å˜é‡"></a> 3.1.2 å¯å˜å˜é‡</h3>
<p>â€‹	mutableï¼Œå¯å˜åŒ–çš„ï¼Œè¿˜æ˜¯ä½¿ç”¨letå£°æ˜</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">num</span> = <span class="hljs-number">1</span>;<br>num = num + <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure>
<h3 id="313-å¸¸é‡"><a class="markdownIt-Anchor" href="#313-å¸¸é‡"></a> 3.1.3 å¸¸é‡</h3>
<p>â€‹		å¸¸é‡ç”¨constå£°æ˜ï¼ˆconstantçš„æ„æ€ï¼‰ï¼Œå¸¸é‡å¿…é¡»æ˜¾å¼å£°æ˜æ•°æ®ç±»å‹ï¼Œæ— æ³•è‡ªåŠ¨æ¨æ–­ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">const</span> MAX_LEN: <span class="hljs-type">u8</span> = <span class="hljs-number">64</span>;<br></code></pre></td></tr></table></figure>
<p>â€‹	å…¶å®å·¥ç¨‹ä¸­å¤§å¤šæ•°éƒ½æ˜¯ä¸å¯å˜ç±»å‹çš„å˜é‡ã€‚</p>
<h2 id="32-shadowæœºåˆ¶"><a class="markdownIt-Anchor" href="#32-shadowæœºåˆ¶"></a> 3.2 shadowæœºåˆ¶</h2>
<p>â€‹	å˜é‡å¯ä»¥è¢«éšè—ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">string</span> = <span class="hljs-string">&quot;ssss&quot;</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">string</span> = string.<span class="hljs-title function_ invoke__">len</span>();<br><span class="hljs-keyword">let</span> <span class="hljs-variable">string</span> = string + <span class="hljs-number">1</span>;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;string is &#123;&#125;&quot;</span>, string);<br></code></pre></td></tr></table></figure>
<p>â€‹	æ­¤æœºåˆ¶æ˜¯ä¸ºäº†é¿å…ä»¥ä¸‹æƒ…å†µï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">name_string</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack&quot;</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">name_length</span> <span class="hljs-operator">=</span> name_string.length();<br></code></pre></td></tr></table></figure>
<p>â€‹	éšè—å˜é‡åœ¨åœ¨ä½œç”¨åŸŸå¤–è¢«å®šä¹‰ï¼Œå¹¶ç»‘å®šå€¼åï¼Œåœ¨å¦ä¸€ä¸ªä½œç”¨åŸŸä¸­è¢«shadowåï¼Œå‡ºäº†æ­¤ä½œç”¨åŸŸï¼Œéšè—çš„å˜é‡ä¼šæ¢å¤ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello&quot;</span>;<br>    &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-number">65535</span>;<br>    &#125;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s)<br>&#125;<br><span class="hljs-comment">// è¾“å‡ºhello</span><br></code></pre></td></tr></table></figure>
<p>psï¼šshadowæœºåˆ¶çš„å®é™…æ„ä¹‰æ˜¯ï¼Œé‡æ–°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡å¯ä»¥æœ‰æ–°çš„å€¼ï¼Œè€Œå®ƒçš„æ„ä¹‰å°±æ˜¯æ—¢èƒ½å¤Ÿè¿›è¡Œ<strong>å˜é‡åç§°çš„å¤ç”¨</strong>ï¼Œä¹Ÿèƒ½å¤Ÿ<strong>ä¸å¢åŠ æ–°çš„å˜é‡</strong>ã€‚</p>
<h2 id="33-æ ‡é‡ç±»å‹"><a class="markdownIt-Anchor" href="#33-æ ‡é‡ç±»å‹"></a> 3.3 æ ‡é‡ç±»å‹</h2>
<p>â€‹	rustæ˜¯é™æ€æ•°æ®ç±»å‹ï¼Œåœ¨ç¼–è¯‘æ—¶å°±éœ€è¦æ‰€æœ‰å˜é‡çš„å…·ä½“æ•°æ®ç±»å‹ã€‚å¹¶ä¸”rustæä¾›äº†ç±»å‹æ¨æ–­æœºåˆ¶ï¼Œæ ¹æ®å€¼çš„ç±»å‹å’Œå…·ä½“çš„ä½¿ç”¨æƒ…å†µï¼Œå¯ä»¥æ¨æ–­å‡ºå˜é‡çš„ç±»å‹ã€‚è‹¥æ˜¯ä¸èƒ½æ¨æ–­å‡ºï¼Œç¼–è¯‘å™¨ä¾¿ä¼šæŠ¥é”™ï¼Œéœ€è¦æˆ‘ä»¬ç»™å‡ºæ›´å¤šçš„ä¿¡æ¯ï¼ˆä¸€èˆ¬æ˜¯éœ€è¦æ˜¾ç¤ºå£°æ˜äº†å°±ï¼‰ã€‚å¦‚ä¸‹ï¼š</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220412225015836.png" alt="image-20220412225015836"></p>
<p>â€‹	æ— æ³•æ¨æ–­å‡ºå­—ç¬¦ä¸²ä¼šè½¬æ¢æˆä»€ä¹ˆç±»å‹ã€‚æ‰€ä»¥éœ€è¦æˆ‘ä»¬æ˜¾ç¤ºå£°æ˜ï¼š</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220412225123863.png" alt="image-20220412225123863"></p>
<h3 id="331-æ•´æ•°"><a class="markdownIt-Anchor" href="#331-æ•´æ•°"></a> 3.3.1 æ•´æ•°</h3>
<p>â€‹	æ•´æ•°çš„ç±»å‹ï¼š</p>
<p>â€‹													 <img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220114153100948.png" alt="image-20220114153100948"></p>
<p>â€‹	å…¶ä¸­isizeå’Œusizeå’Œæœºå™¨çš„ä½æ•°æœ‰å…³ï¼Œä¸€èˆ¬ä¸ç”¨ã€‚</p>
<p>â€‹	æ•´æ•°çš„å­—é¢é‡è¡¨ç¤ºï¼š</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220114153226641.png" alt="image-20220114153226641"></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">adr</span> = <span class="hljs-number">0x1234_5678u64</span><span class="hljs-comment">//æ— ç¬¦å·64ä½16è¿›åˆ¶æ•°</span><br></code></pre></td></tr></table></figure>
<p>â€‹	æ•´æ•°çš„é»˜è®¤ç±»å‹ä¸€èˆ¬æ˜¯i32ï¼Œæ¯”è¾ƒå¿«ã€‚</p>
<p>â€‹	ä¸‹é¢æ˜¯æ•´æ•°æº¢å‡ºçš„æƒ…å†µï¼š</p>
<ul>
<li>è°ƒè¯•æ¨¡å¼ä¸‹ï¼šä¼šå‘ç”Ÿpanicï¼ˆææ…Œï¼‰</li>
<li>å‘å¸ƒæ¨¡å¼ï¼šä¸å‘ç”Ÿpanicï¼Œé€‰æ‹©ç¯ç»•æ“ä½œï¼Œå³256=0</li>
</ul>
<h3 id="332-æµ®ç‚¹"><a class="markdownIt-Anchor" href="#332-æµ®ç‚¹"></a> 3.3.2 æµ®ç‚¹</h3>
<p>â€‹	ä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li>f64</li>
<li>f32</li>
</ul>
<p>â€‹    ä¸€èˆ¬æ˜¯é‡‡ç”¨f64</p>
<h3 id="333-boolç±»å‹"><a class="markdownIt-Anchor" href="#333-boolç±»å‹"></a> 3.3.3 boolç±»å‹</h3>
<p>â€‹	trueæˆ–è€…falseã€‚</p>
<p>â€‹	å ç”¨å¤§å°ä¸€ä¸ªByte</p>
<p>â€‹	ä¸ºä»€ä¹ˆä¸ç”¨ä¸€ä¸ªbitï¼Ÿå› ä¸ºå¦‚æœç”¨ä¸€ä½çš„è¯ä¸åˆ©äºå­˜å‚¨ï¼Œä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚</p>
<h3 id="334-å­—ç¬¦ç±»å‹"><a class="markdownIt-Anchor" href="#334-å­—ç¬¦ç±»å‹"></a> 3.3.4 å­—ç¬¦ç±»å‹</h3>
<p>â€‹	char</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">yeye</span> = &#x27;ğŸ‘´&#x27;;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, yeye);<br></code></pre></td></tr></table></figure>
<h2 id="34-å¤åˆç±»å‹"><a class="markdownIt-Anchor" href="#34-å¤åˆç±»å‹"></a> 3.4 å¤åˆç±»å‹</h2>
<h3 id="341-å…ƒç»„tuple"><a class="markdownIt-Anchor" href="#341-å…ƒç»„tuple"></a> 3.4.1 å…ƒç»„Tuple</h3>
<p>â€‹	æ¯ä¸ªä½ç½®å¯¹åº”ä¸€ä¸ªç±»å‹ï¼Œç±»å‹ä¸å¿…ç›¸åŒã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">tp</span> = (<span class="hljs-number">1</span>, <span class="hljs-string">&quot;sss&quot;</span>, <span class="hljs-string">&quot;S&quot;</span>);<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&#123;&#125;&#123;&#125;&quot;</span>, tp.<span class="hljs-number">0</span>, tp.<span class="hljs-number">1</span>, tp.<span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure>
<p>â€‹	å…ƒç»„èµ‹å€¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">tp</span> = (<span class="hljs-number">1</span>, <span class="hljs-string">&quot;sss&quot;</span>, <span class="hljs-string">&quot;S&quot;</span>);<br><span class="hljs-comment">// println!(&quot;&#123;&#125;&#123;&#125;&#123;&#125;&quot;, tp.0, tp.1, tp.2);</span><br><span class="hljs-keyword">let</span> (x, y, z) = tp;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&#123;&#125;&#123;&#125;&quot;</span>, x, y, z);<br></code></pre></td></tr></table></figure>
<h3 id="342-æ•°ç»„"><a class="markdownIt-Anchor" href="#342-æ•°ç»„"></a> 3.4.2 æ•°ç»„</h3>
<p>â€‹	å’Œå…¶ä»–è¯­è¨€ç±»ä¼¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, a[<span class="hljs-number">1</span>]);<br></code></pre></td></tr></table></figure>
<h3 id="345-vector"><a class="markdownIt-Anchor" href="#345-vector"></a> 3.4.5 Vector</h3>
<p>â€‹	å¤§å°å¯å˜ï¼Œç”¨çš„æ›´å¤šã€‚</p>
<h2 id="35-å‡½æ•°"><a class="markdownIt-Anchor" href="#35-å‡½æ•°"></a> 3.5 å‡½æ•°</h2>
<p>â€‹	å‡½æ•°å£°æ˜ï¼Œå‡½æ•°åï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›å€¼ã€‚è¿™æ˜¯å£°æ˜å‡½æ•°çš„å…¨è¿‡ç¨‹ã€‚</p>
<p>â€‹	ä»£ç å—é‡Œçš„æœ€åä¸€è¡Œæ²¡åŠ åˆ†å·ï¼Œä»£è¡¨æ˜¯è¿”å›å€¼ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-title function_ invoke__">add</span>(<span class="hljs-number">32</span>, <span class="hljs-number">2</span>))<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    x + y<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	æˆ–è€…è¿™æ ·ä¹Ÿè¡Œï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    <span class="hljs-keyword">return</span> x + y;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="36-if-else"><a class="markdownIt-Anchor" href="#36-if-else"></a> 3.6 if-else</h2>
<p>â€‹	ç¬¬ä¸€ç§ç”¨æ³•ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">cdt</span> = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = <span class="hljs-keyword">if</span> cdt &#123; <span class="hljs-number">1</span> &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-number">2</span> &#125;;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, num);<br></code></pre></td></tr></table></figure>
<p>â€‹	ç¬¬äºŒç§ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">cdt</span> = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">num</span>;<br><span class="hljs-keyword">if</span> cdt &#123;<br>    num = <span class="hljs-number">1</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    num = <span class="hljs-number">2</span>;<br>&#125;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, num);<br></code></pre></td></tr></table></figure>
<p>â€‹	å¦‚æœifelseåµŒå¥—å¤ªå¤šï¼Œä½¿ç”¨æ¨¡å¼åŒ¹é…å§ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">cdt</span> = <span class="hljs-literal">false</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = <span class="hljs-keyword">match</span> cdt &#123;<br>    <span class="hljs-literal">true</span> =&gt; <span class="hljs-number">1</span>,<br>    <span class="hljs-literal">false</span> =&gt; <span class="hljs-number">2</span><br>&#125;;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, num);<br></code></pre></td></tr></table></figure>
<h2 id="37-å¾ªç¯"><a class="markdownIt-Anchor" href="#37-å¾ªç¯"></a> 3.7 å¾ªç¯</h2>
<h3 id="371-loop"><a class="markdownIt-Anchor" href="#371-loop"></a> 3.7.1 loop</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">loop</span> &#123;<br>    count = count + <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, count);<br>    <span class="hljs-keyword">if</span> count &gt;<span class="hljs-number">100</span> &#123;<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="372-while"><a class="markdownIt-Anchor" href="#372-while"></a> 3.7.2 while</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> count &lt; <span class="hljs-number">100</span> &#123;<br>    count = count + <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, count);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="373-for-each"><a class="markdownIt-Anchor" href="#373-for-each"></a> 3.7.3 for - each</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><span class="hljs-keyword">for</span> <span class="hljs-variable">a</span> <span class="hljs-keyword">in</span> arr &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, a);<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">arr</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><span class="hljs-keyword">for</span> <span class="hljs-variable">a</span> <span class="hljs-keyword">in</span> arr.<span class="hljs-title function_ invoke__">iter</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, a);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>60så€’è®¡æ—¶</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">for</span> <span class="hljs-variable">e</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..<span class="hljs-number">61</span>).<span class="hljs-title function_ invoke__">rev</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, e);<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="4-æ‰€æœ‰æƒ"><a class="markdownIt-Anchor" href="#4-æ‰€æœ‰æƒ"></a> 4 æ‰€æœ‰æƒ</h1>
<p>â€‹	rusté‡‡ç”¨æ‰€æœ‰æƒç³»ç»Ÿæ¥ç®¡ç†å†…å­˜ã€‚å¹¶ä¸”ï¼Œæ˜¯åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œè¿™æ ·å°±ä¸ä¼šå‡æ…¢ç¨‹åºè¿è¡Œçš„é€Ÿåº¦ã€‚æ— è¿è¡Œæ—¶å¼€é”€ã€‚</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220114182046202.png" alt="image-20220114182046202"></p>
<h2 id="41-æ ˆå†…å­˜ä¸å †å†…å­˜"><a class="markdownIt-Anchor" href="#41-æ ˆå†…å­˜ä¸å †å†…å­˜"></a> 4.1 æ ˆå†…å­˜ä¸å †å†…å­˜</h2>
<ul>
<li>å †æ ˆï¼šLIFOï¼Œlast in first outï¼Œåè¿›å…ˆå‡º</li>
<li>å †ï¼šOSç»™ç”¨æˆ·åœ¨heapä¸Šæ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„åŒºåŸŸï¼Œæ ‡è®°ä¸ºåœ¨ç”¨ï¼Œç„¶åè¿”å›ç»™ç”¨æˆ·ã€‚è¿™å°±æ˜¯åœ¨å †ä¸Šåˆ†é…å†…å­˜ã€‚</li>
</ul>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220114181038063.png" alt="image-20220114181038063"></p>
<p>â€‹	å †æ˜¯é€šè¿‡åˆ†é…æ¥å¾—åˆ°å†…å­˜ï¼Œè€Œæ ˆä¸åŒï¼Œæ ˆæ˜¯ç›´æ¥å°†æ•°æ®å­˜æ”¾åˆ°é‚£ä¸€ä¸ªæ ¼å­å°±è¡Œäº†ï¼Œä¸éœ€è¦åˆ†é…ã€‚</p>
<p>â€‹	æ ˆä¸Šåˆ†é…çš„å†…å­˜æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¦‚æ•°ç»„ã€‚è€Œå †ä¸Šåˆ†é…çš„å†…å­˜å¯ä»¥åŠ¨æ€å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯å¯å˜æ•°ç»„ï¼ŒåƒCè¯­è¨€é‡Œçš„åŠ¨æ€å†…å­˜åˆ†é…ï¼Œå°±æ˜¯åœ¨å †ä¸Šåˆ†é…ç©ºé—´ï¼Œç„¶åè¿”å›ä¸€ä¸ªæŒ‡é’ˆç»™ç”¨æˆ·ï¼ˆmallocå‡½æ•°è¿”å›æŒ‡é’ˆï¼‰ã€‚è€Œè¿™ä¸ªæŒ‡é’ˆç”±äºæ˜¯å›ºå®šå¤§å°ï¼Œæ‰€ä»¥å¯ä»¥å­˜åˆ°æ ˆä¸Šå»ã€‚</p>
<p>â€‹	åœ¨å †ä¸Šåˆ†é…ç©ºé—´æ›´æ…¢ï¼Œå› ä¸ºOSéœ€è¦æ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´ã€‚è€Œåœ¨æ ˆä¸Šå°±æ¯”è¾ƒå¿«äº†ï¼Œå› ä¸ºè¿™ä¸ªç©ºé—´è‚¯å®šåœ¨æ ˆçš„é¡¶ç«¯ã€‚</p>
<p>â€‹	åœ¨å †ä¸Šè®¿é—®æ•°æ®ä¹Ÿæ…¢ï¼Œå› ä¸ºéœ€è¦é€šè¿‡æŒ‡é’ˆå¯»å€æ¥è®¿é—®ï¼Œæ˜¯é—´æ¥è®¿é—®ï¼Œéœ€è¦è·³è½¬ï¼Œä»æ ˆ-&gt;å †ï¼Œæ¯”è¾ƒæ…¢ï¼›è€Œä»æ ˆä¸Šè®¿é—®æ•°æ®å°±ä¸ä¸€æ ·äº†ï¼Œå› ä¸ºæ˜¯æ ˆ-&gt;æ ˆï¼Œæ‰€ä»¥å¿«ã€‚</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220114181940185.png" alt="image-20220114181940185"></p>
<h2 id="42-æ‰€æœ‰æƒè§„åˆ™"><a class="markdownIt-Anchor" href="#42-æ‰€æœ‰æƒè§„åˆ™"></a> 4.2 æ‰€æœ‰æƒè§„åˆ™</h2>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220114182405990.png" alt="image-20220114182405990"></p>
<p>â€‹	ç®€åŒ–ï¼šåœ¨ä¸€ä¸ªæ—¶é—´å†…ï¼Œæ¯ä¸ªå€¼æœ‰ä¸”åªæœ‰ä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸”å½“æ‰€æœ‰è€…è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œæ‰€æœ‰è€…åŠå…¶å€¼å°†è¢«åˆ é™¤ã€‚</p>
<h2 id="43-åˆè¯†string"><a class="markdownIt-Anchor" href="#43-åˆè¯†string"></a> 4.3 åˆè¯†String</h2>
<p>â€‹	ä¹‹å‰çš„æ ‡é‡æ•°æ®ç±»å‹éƒ½æ˜¯å­˜å‚¨åœ¨stackä¸Šçš„ï¼Œä¸€æ—¦ç¦»å¼€ä½œç”¨åŸŸå°±ä¼šè¢«å¼¹å‡ºã€‚</p>
<p>â€‹	è€ŒStringæ˜¯ä¸€ç§å­˜æ”¾åœ¨heapä¸Šçš„æ•°æ®ç±»å‹ã€‚</p>
<p>â€‹	Stringå¯ä»¥ä»£è¡¨stdä¸­å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œæˆ–è€…æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„æ•°æ®ç±»å‹ã€‚</p>
<p>â€‹	åœ¨ç¨‹åºè¿è¡Œä¸­ï¼Œæœ‰ä¸¤ç§å­—ç¬¦ä¸²ï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²å­—é¢é‡ï¼šæ˜¯ä¸å¯å˜çš„ã€‚åœ¨ç¨‹åºè¿è¡Œä¹‹å‰ï¼Œå³åœ¨ç¼–è¯‘æœŸé—´ï¼Œå°±å¯ä»¥çŸ¥é“å…¶å†…å®¹äº†ï¼Œæ‰€ä»¥ç›´æ¥ç¡¬ç¼–ç åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­äº†ã€‚æ‰€ä»¥åœ¨è¿è¡ŒæœŸé—´å°±ä¸éœ€è¦é¢å¤–çš„å†…å­˜äº†ï¼Œé«˜æ•ˆã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hello&quot;</span>; <span class="hljs-comment">//helloå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡</span><br></code></pre></td></tr></table></figure>
<ul>
<li>Stringç±»å‹ï¼šå¯å˜çš„ï¼Œå¦‚è·å–ç”¨æˆ·çš„è¾“å…¥æ˜¯ï¼Œæ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œç”¨çš„å°±æ˜¯Stringã€‚Stringæ˜¯åœ¨è¿è¡ŒæœŸé—´æ‰ä¼šåœ¨heapä¸Šåˆ†é…å†…å­˜ï¼Œé€šè¿‡fromå‡½æ•°å‘OSç”³è¯·å†…å­˜ã€‚ç„¶åå˜å˜é‡è¶…å‡ºä½œç”¨åŸŸåï¼Œæ•‘ä¼šé€šè¿‡dropå‡½æ•°å›æ”¶å†…å­˜ï¼ˆè‡ªåŠ¨çš„ï¼‰ã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>); <span class="hljs-comment">//ä»å­—ç¬¦ä¸²å­—é¢é‡åˆ›å»ºä¸€ä¸ªStringç±»å‹</span><br></code></pre></td></tr></table></figure>
<p>â€‹	ä¸‹é¢è§£é‡Šä¸€æ®µç¨‹åºï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br><span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span> = s1;<br></code></pre></td></tr></table></figure>
<p>â€‹	ç¬¬ä¸€è¡Œå‘heapç”³è¯·äº†ä¸€å—å†…å­˜ã€‚å…·ä½“æ˜¯å¦‚ä¸‹ï¼šåœ¨å †ä¸Šç”³è¯·äº†ä¸€å—ç©ºé—´ï¼Œå­˜æ”¾helloå­—ç¬¦æ•°ç»„ï¼Œç„¶åè¿”å›è¿™ä¸ªå­—ç¬¦æ•°ç»„çš„ä¸‰ä¸ªä¿¡æ¯ï¼šèµ·å§‹åœ°å€ï¼Œé•¿åº¦ï¼Œå®¹é‡ã€‚è¿”å›ç»™s1æ¥æ”¶ã€‚</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115132259157.png" alt="image-20220115132259157"></p>
<p>â€‹	ç¬¬äºŒè¡Œæ˜¯å°†s1çš„æŒ‡é’ˆè€ƒåŸ¹ç»™äº†s2ï¼ŒåŒ…æ‹¬heapæŒ‡é’ˆï¼Œlenå’Œcapacityã€‚ç„¶åæŒ‰ç…§å¸¸è§„çš„æ€è·¯ï¼Œs1 s2éƒ½ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œéƒ½ä¼šè¿›è¡Œdropå›æ”¶å†…å­˜ã€‚è¿™æ ·ä¸€å—heapå†…å­˜è¢«å›æ”¶äº†ä¸¤æ¬¡ï¼Œæ˜¯ä¸å®‰å…¨çš„ã€‚</p>
<p>â€‹	ä¸ºäº†è§£å†³è¿™ä¸ªï¼Œåœ¨å°†s1æŒ‡é’ˆæ‹·è´ç»™äº†s2åï¼Œä¹Ÿå°±æ˜¯MOVEæ“ä½œåï¼Œs1çš„å†…å®¹è¢«åºŸå¼ƒï¼Œå†æ¬¡è°ƒç”¨å°†å‡ºç°æŠ¥é”™ã€‚ç„¶ås1s2ç¦»å¼€ä½œç”¨åŸŸåï¼Œåªæœ‰s2æŒ‡å‘çš„heapä¼šè¢«dropæ‰ã€‚</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115132743008.png" alt="image-20220115132743008"></p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115132811413.png" alt="image-20220115132811413"></p>
<p>â€‹	è¿™æ ·æ— ç–‘æ›´å®‰å…¨ï¼Œä¹Ÿä¸ä¼šåœ¨å †ä¸Šé‡æ–°åˆ†é…ç©ºé—´ã€‚</p>
<p>â€‹	ä»¥ä¸Šå…¶å®æ˜¯ä¸€ç§æµ…æ‹·è´ï¼Œç„¶æ˜¯ç”±äºs1æ—¶å¤±æ•ˆäº†ï¼Œäºæ˜¯åˆ›å»ºäº†æ–°çš„æœ¯è¯­å«MOVEã€‚</p>
<ul>
<li>æµ…æ‹·è´ â€“ MOVEç§»åŠ¨</li>
<li>æ·±æ‹·è´ â€“ CLONEå…‹éš†</li>
</ul>
<p>â€‹    Rustæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯å»‰ä»·çš„æµ…æ‹·è´æ“ä½œï¼Œä¸ä¼šå¼€è¾Ÿæ–°çš„heapå†…å­˜ï¼Œé™¤éæ˜¯è¿™æ ·è¦æ±‚çš„ã€‚</p>
<p>â€‹	ä¸‹é¢çš„æ·±æ‹·è´ï¼Œå³å…‹éš†çš„æ“ä½œã€‚</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115133335999.png" alt="image-20220115133335999"></p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115133353197.png" alt="image-20220115133353197"></p>
<p>â€‹	è€Œåœ¨æ ˆä¸Šè¿›è¡Œçš„MOVEï¼Œå…ˆå‰å£°æ˜çš„å˜é‡å°±ä¸ä¼šå¤±æ•ˆã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">//useful</span><br><span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = x; <span class="hljs-comment">//useful</span><br></code></pre></td></tr></table></figure>
<p>â€‹	å¯ä»¥ç”¨ä¸‹é¢ä¸¤ä¸ªæ¦‚å¿µæ¥è§£é‡Šï¼š</p>
<ul>
<li>Copy traitï¼ˆå¤åˆ¶ç‰¹æ€§ï¼‰ï¼šå®ç°äº†Copy traitçš„æ•°æ®ç»“æ„ï¼Œåœ¨èµ‹å€¼åæ—§çš„å˜é‡ä»ç„¶æœ‰æ•ˆã€‚</li>
<li>Drop traitï¼ˆå›æ”¶ç‰¹æ€§ï¼‰ï¼šå®ç°äº†Drop traitçš„æ•°æ®ç»“æ„ï¼Œä¸èƒ½å†å®ç°Copy trait</li>
</ul>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115134031494.png" alt="image-20220115134031494"></p>
<h2 id="44-å‡½æ•°ä¸æ‰€æœ‰æƒ"><a class="markdownIt-Anchor" href="#44-å‡½æ•°ä¸æ‰€æœ‰æƒ"></a> 4.4 å‡½æ•°ä¸æ‰€æœ‰æƒ</h2>
<p>â€‹	å°†å€¼çªœç»™å‡½æ•°ï¼Œè¦ä¹ˆä¼šå‘ç”Ÿç§»åŠ¨ï¼ˆMoveï¼‰ï¼Œè¦ä¹ˆå‘ç”Ÿå¤åˆ¶ï¼ˆCopyï¼‰</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115135319262.png" alt="image-20220115135319262"></p>
<ul>
<li>copy traitçš„æ•°æ®ç±»å‹è¢«ä¼ å…¥æ—¶ï¼ˆi32ï¼‰ï¼šä¼ è¿›å»çš„æ—¶å‰¯æœ¬ï¼Œåœ¨å‡½æ•°ç»“æŸçš„æ—¶å€™ï¼Œå‰¯æœ¬ä¼šè¢«å¼¹å‡ºstack</li>
<li>drop traitæ•°æ®ç±»å‹è¢«ä¼ å…¥æ—¶ï¼ˆStringï¼‰ï¼šä¼ è¿›å»åï¼Œæ—§çš„å˜é‡ä¸§å¤±æ‰€æœ‰æƒï¼Œå›æ”¶æ—¶ä¸å†ä½¿ç”¨dropæ¸…ç†heapå†…å­˜ã€‚ä¼ è¿›å»çš„æ•°æ®è·å¾—æ‰€æœ‰æƒï¼Œåœ¨å‡½æ•°ç»“æŸæ—¶å¼¹å‡ºå †æ ˆå¹¶ä¸”ä½¿ç”¨dropå›æ”¶å †å†…å­˜</li>
</ul>
<p>â€‹    å¦‚æœæƒ³å³ä½¿ç”¨æ‰€æœ‰æƒï¼Œè¿˜èƒ½è¿”å›å›æ¥çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨å…ƒç»„</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-keyword">let</span> (s1, len) = <span class="hljs-title function_ invoke__">get_len</span>(s1);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;   &#123;&#125;&quot;</span>, s1, len);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_len</span>(s: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> (<span class="hljs-type">String</span>, <span class="hljs-type">usize</span>) &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">l</span> = s.<span class="hljs-title function_ invoke__">len</span>();<br>    (s, l)<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="45-å¼•ç”¨"><a class="markdownIt-Anchor" href="#45-å¼•ç”¨"></a> 4.5 å¼•ç”¨</h2>
<p>â€‹	å¼•ç”¨ï¼šå¼•ç”¨æ•°æ®çš„å€¼è€Œä¸ä½¿ç”¨å…¶æ‰€æœ‰æƒã€‚&amp;ç¬¦å·è¡¨ç¤º</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115140318148.png" alt="image-20220115140318148"></p>
<p>å¼•ç”¨åˆ†ç±»ï¼š</p>
<ul>
<li>ä¸å¯å˜å¼•ç”¨ï¼šä¸èƒ½ä¿®æ”¹æŒ‡å‘å †ä¸Šçš„æ•°æ®</li>
<li>å¯å˜å¼•ç”¨ï¼šå¯ä»¥ä¿®æ”¹æŒ‡å‘å †ä¸Šçš„æ•°æ®</li>
<li>æ‚¬ç©ºå¼•ç”¨ï¼šå¼•ç”¨æŒ‡å‘çš„æ•°æ®å·²ç»è¢«é‡Šæ”¾ï¼Œè€Œå¼•ç”¨ä¾ç„¶æœ‰æ•ˆï¼ˆRuståœ¨ç¼–è¯‘æœŸæœç»äº†è¿™ä¸ªé—®é¢˜ï¼‰</li>
</ul>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115141807954.png" alt="image-20220115141807954"></p>
<p>â€‹	æœ‰ä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>ä¸€ä¸ªä½œç”¨åŸŸå†…åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨</li>
<li>ä¸€ä¸ªä½œç”¨åŸŸå†…å¯ä»¥æœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨</li>
<li>åŒä¸€ä¸ªä½œç”¨åŸŸå†…å¯å˜å¼•ç”¨ä¸ä¸å¯å˜å¼•ç”¨ä¸èƒ½åŒæ—¶å­˜åœ¨</li>
</ul>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115142315424.png" alt="image-20220115142315424"></p>
<p>â€‹	å¯ä»¥çœ‹åˆ°ï¼šå…ˆå£°æ˜äº†ä¿©ä¸å¯å˜çš„å¼•ç”¨ï¼Œç„¶åå£°æ˜äº†ä¸€ä¸ªå¯å˜å¼•ç”¨ã€‚å¦‚æœä¸å¯¹ä¸å¯å˜å¼•ç”¨åšæ“ä½œçš„è¯ï¼Œä¸ä¼šæŠ¥é”™ã€‚å¦‚æœåœ¨å£°æ˜äº†å¯å˜å¼•ç”¨åï¼Œè¿˜å¯¹ä¸å¯å˜å¼•ç”¨è¿›è¡Œæ“ä½œï¼Œè¿™æ ·å°±ä¼šæŠ¥é”™ã€‚</p>
<h2 id="45-åˆ‡ç‰‡"><a class="markdownIt-Anchor" href="#45-åˆ‡ç‰‡"></a> 4.5 åˆ‡ç‰‡</h2>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115144940387.png" alt="image-20220115144940387"></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;ssss ssss&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">indx</span> = <span class="hljs-title function_ invoke__">get_space_index</span>(&amp;s);<br>    s.<span class="hljs-title function_ invoke__">clear</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, indx);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_space_index</span>(s: &amp;<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span> = s.<span class="hljs-title function_ invoke__">as_bytes</span>();<br>    <span class="hljs-title function_ invoke__">for</span> (i, &amp;item) <span class="hljs-keyword">in</span> p1.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">enumerate</span>() &#123;<br>        <span class="hljs-keyword">if</span> item == <span class="hljs-string">b&#x27; &#x27;</span> &#123;<br>            <span class="hljs-keyword">return</span> i;<br>        &#125;<br>    &#125;<br>    s.<span class="hljs-title function_ invoke__">len</span>()<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ä¸Šé¢çš„ä»£ç æ˜¯è·å–ç¬¬ä¸€ä¸ªç©ºæ ¼æ‰€åœ¨çš„ä½ç½®ã€‚</p>
<p>â€‹	bugï¼šå½“å­—ç¬¦ä¸²è¢«æ¸…ç©ºäº†åï¼Œå¾—åˆ°çš„indexä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä¹Ÿå°±æ˜¯åŒæ­¥æ€§çš„é—®é¢˜ã€‚è¦ä¿è¯ï¼šåœ¨å­—ç¬¦ä¸²æ”¹å˜çš„åŒæ—¶ï¼Œè¿™ä¸ªindexä¹Ÿä¼šåŒæ­¥æ”¹å˜ã€‚è¿™å¾ˆå›°éš¾ã€‚</p>
<p>â€‹	rustå¯ä»¥é‡‡ç”¨åˆ‡ç‰‡è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115144751616.png" alt="image-20220115144751616"></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;ssss ssss&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">indx</span> = <span class="hljs-title function_ invoke__">get_space_index</span>(&amp;s[..]);<br>    s.<span class="hljs-title function_ invoke__">clear</span>(); <span class="hljs-comment">//æŠ¥é”™ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå¯å˜çš„å¼•ç”¨ï¼Œä¸ä¸Šä¸€è¡Œçš„ä¸å¯å˜å¼•ç”¨å†²çª </span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, indx);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_space_index</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span> = s.<span class="hljs-title function_ invoke__">as_bytes</span>();<br>    <span class="hljs-title function_ invoke__">for</span> (i, &amp;item) <span class="hljs-keyword">in</span> p1.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">enumerate</span>() &#123;<br>        <span class="hljs-keyword">if</span> item == <span class="hljs-string">b&#x27; &#x27;</span> &#123;<br>            <span class="hljs-keyword">return</span> &amp;s[..i]; <span class="hljs-comment">//[0, i)</span><br>        &#125;<br>    &#125;<br>    &amp;s[..]<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p>â€‹	å› ä¸ºå‡½æ•°é‡Œé¢é‡‡ç”¨äº†å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œä¹Ÿå°±æ˜¯ä¸å¯å˜å¼•ç”¨ï¼Œæ‰€ä»¥ä¿®æ”¹æ—¶æŠ¥é”™ã€‚</p>
<p>â€‹	æ³¨æ„ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡ä»…ä»…é’ˆå¯¹UTF-8çš„å­—ç¬¦ï¼Œä¸¤å­—èŠ‚çš„æ±‰å­—ä¼šæŠ¥é”™ã€‚</p>
<p>â€‹	è¿˜åšäº†ä¸€ä¸ªä¼˜åŒ–ï¼ŒæŠŠå­—ç¬¦ä¸²å¼•ç”¨ä¿®æ”¹æˆä¸ºäº†å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œè¿™æ ·å°±èƒ½åŒæ—¶æ¥æ”¶ä¸¤ç§ç±»å‹äº†(&amp;String -&gt; &amp;str)ã€‚å¦‚å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆ&amp;strï¼‰å’ŒStringç±»å‹ã€‚</p>
<p>â€‹	æ•°ç»„ä¹Ÿå¯ä»¥åˆ‡ç‰‡ï¼Œå’Œä¸Šé¢ç±»ä¼¼ã€‚</p>
<h1 id="5-ç»“æ„"><a class="markdownIt-Anchor" href="#5-ç»“æ„"></a> 5 ç»“æ„</h1>
<h2 id="51-ç»“æ„å®šä¹‰"><a class="markdownIt-Anchor" href="#51-ç»“æ„å®šä¹‰"></a> 5.1 ç»“æ„å®šä¹‰</h2>
<p>â€‹	ä¸‰ç±»ï¼š</p>
<ul>
<li>structï¼šæ™®é€šç»“æ„</li>
<li>tuple structï¼šå…ƒç»„ç»“æ„ï¼Œå½“ä½ æƒ³ç»™å…ƒç»„èµ·åå­—çš„æ—¶å€™ï¼Œä½¿ç”¨å®ƒã€‚</li>
<li>Unit - like - structï¼šæ— ä»»ä½•å­—æ®µçš„ç»“æ„</li>
</ul>
<p>â€‹	æ™®é€šç»“æ„ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> &#123;<br>    name: <span class="hljs-type">String</span>,<br>    email: <span class="hljs-type">String</span>,<br>    active: <span class="hljs-type">bool</span>,<br>    id: <span class="hljs-type">u32</span>,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">jack</span> = <span class="hljs-title function_ invoke__">get_user</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;jack&quot;</span>), String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;12222@qq.com&quot;</span>), <span class="hljs-literal">true</span>, <span class="hljs-number">1111</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, jack.active);<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_user</span>(name: <span class="hljs-type">String</span>, email: <span class="hljs-type">String</span>, active: <span class="hljs-type">bool</span>, id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> User &#123;<br>    User &#123;<br>        name,<br>        email,<br>        active,<br>        id,<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	å…ƒç»„ç»“æ„</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>(<span class="hljs-type">u32</span>, <span class="hljs-type">u32</span>, <span class="hljs-type">u32</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="52-ç»“æ„å®ä¾‹"><a class="markdownIt-Anchor" href="#52-ç»“æ„å®ä¾‹"></a> 5.2 ç»“æ„å®ä¾‹</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">rectangle</span> &#123;<br>    width: <span class="hljs-type">u32</span>,<br>    length: <span class="hljs-type">u32</span>,<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = rectangle&#123;<br>        width: <span class="hljs-number">2</span>,<br>        length: <span class="hljs-number">3</span>,<br>    &#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-title function_ invoke__">get_area</span>(&amp;r1));<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, r1);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_area</span>(rec: &amp;rectangle) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>    rec.length * rec.width<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p>â€‹	Rustä¸­æœ‰ç±»ä¼¼ä¸javaçš„toStringæ–¹æ³•ï¼Œæˆ–è€…è¯´æ˜¯traitï¼Œä½†æ˜¯é»˜è®¤æ²¡æœ‰å®ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç”¨çš„æ˜¯debugç‰¹æ€§ã€‚</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220115163757974.png" alt="image-20220115163757974"></p>
<ul>
<li>#[derive(Debug)]ï¼šå®ç°debug trait</li>
<li>{:?}ï¼šè¾“å‡ºç»“æ„çš„ä¿¡æ¯ï¼Œä¸æ¢è¡Œ</li>
<li>{:#?}ï¼šè¾“å‡ºç»“æ„çš„ä¿¡æ¯ï¼Œæ¢è¡Œ</li>
</ul>
<h2 id="53-structæ–¹æ³•"><a class="markdownIt-Anchor" href="#53-structæ–¹æ³•"></a> 5.3 structæ–¹æ³•</h2>
<p>â€‹	ä¸¤ç§ï¼š</p>
<ul>
<li>æ–¹æ³•ï¼šæ–¹æ³•ç”¨implå®šä¹‰çš„å—å»å®ç°ï¼Œéœ€è¦ä¼ é€’å®ƒæœ¬èº«ï¼ˆæˆ–æœ¬èº«çš„å¼•ç”¨ï¼‰</li>
<li>å…³è”å‡½æ•°ï¼šä¸éœ€è¦ä¼ é€’æœ¬èº«ï¼Œåªæ˜¯è·Ÿè¿™ä¸ªç»“æ„æœ‰å…³è”ï¼Œç±»ä¼¼é™æ€å‡½æ•°ã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">rectangle</span> &#123;<br>    width: <span class="hljs-type">u32</span>,<br>    length: <span class="hljs-type">u32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">rectangle</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>        <span class="hljs-keyword">self</span>.width * <span class="hljs-keyword">self</span>.length<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">can_hold</span>(&amp;<span class="hljs-keyword">self</span>, other: &amp;rectangle) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        <span class="hljs-keyword">self</span>.length &gt;= other.length &amp;&amp; <span class="hljs-keyword">self</span>.width &gt;= other.width<br>    &#125;<br>    <br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">sqare</span>(size: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> rectangle &#123;<br>        rectangle &#123;<br>            width: size,<br>            length: size,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r1</span> = rectangle &#123;<br>        width: <span class="hljs-number">30</span>,<br>        length: <span class="hljs-number">20</span>,<br>    &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r2</span> = rectangle &#123;<br>        width: <span class="hljs-number">100</span>,<br>        length: <span class="hljs-number">20</span>,<br>    &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r3</span> = rectangle &#123;<br>        width: <span class="hljs-number">10</span>,<br>        length: <span class="hljs-number">10</span>,<br>    &#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, r2.<span class="hljs-title function_ invoke__">area</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, r1.<span class="hljs-title function_ invoke__">can_hold</span>(&amp;r2));<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, r1.<span class="hljs-title function_ invoke__">can_hold</span>(&amp;r3));<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r4</span> = rectangle::<span class="hljs-title function_ invoke__">sqare</span>(<span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, r4);<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="6-æšä¸¾ä¸æ¨¡å¼åŒ¹é…"><a class="markdownIt-Anchor" href="#6-æšä¸¾ä¸æ¨¡å¼åŒ¹é…"></a> 6 æšä¸¾ä¸æ¨¡å¼åŒ¹é…</h1>
<h2 id="61-å®šä¹‰æšä¸¾"><a class="markdownIt-Anchor" href="#61-å®šä¹‰æšä¸¾"></a> 6.1 å®šä¹‰æšä¸¾</h2>
<p>â€‹	rustçš„æšä¸¾å¾ˆå¼ºå¤§ã€‚å¯ä»¥è‡ªå®šä¹‰æšä¸¾å¹¶å­˜å‚¨æ•°æ®ï¼Œä¸éœ€è¦æ¶ˆè€—é¢å¤–çš„ç»“æ„ä½“ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">IpAddrKind</span> &#123;<br>    <span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>),<br>    <span class="hljs-title function_ invoke__">V6</span>(<span class="hljs-type">String</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">home</span> = IpAddrKind::<span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-number">120</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">r</span> = IpAddrKind::<span class="hljs-title function_ invoke__">V6</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;::1&quot;</span>));<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	æšä¸¾ä¹Ÿå¯ä»¥å®šä¹‰æ–¹æ³•ã€‚ä¸ç»“æ„ä½“ç›¸åŒä½¿ç”¨impl</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">IpAddrKind</span> &#123;<br>    <span class="hljs-title function_ invoke__">V4</span>(<span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>),<br>    <span class="hljs-title function_ invoke__">V6</span>(<span class="hljs-type">String</span>),<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">IpAddrKind</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">express</span>(&amp;<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="62-optiontæšä¸¾"><a class="markdownIt-Anchor" href="#62-optiontæšä¸¾"></a> 6.2 Option<T>æšä¸¾</T></h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Option</span> &#123;<br>    <span class="hljs-title function_ invoke__">Some</span>(T),<br>    <span class="hljs-literal">None</span>,<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">5</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n1</span> = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-string">&quot;Sdssdffdsdsds&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n2</span>:<span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; = <span class="hljs-literal">None</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="63-match"><a class="markdownIt-Anchor" href="#63-match"></a> 6.3 match</h2>
<p>â€‹	mathå…è®¸ä¸€ä¸ªå€¼ä¸ä¸€ç³»åˆ—çš„æ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œå¹¶æ‰§è¡ŒåŒ¹é…ä¸Šçš„ä»£ç ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Week</span> &#123;<br>    Mon,<br>    Fir,<br>    <span class="hljs-title function_ invoke__">Fun</span>(<span class="hljs-type">String</span>),<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Week</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_fun</span>(one_day: &amp;Week) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        <span class="hljs-keyword">match</span> one_day &#123;<br>            Week::<span class="hljs-title function_ invoke__">Fun</span>(statement) =&gt; &#123;<br>                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, statement);<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>            Week::Mon =&gt; <span class="hljs-literal">false</span>,<br>            Week::Fir =&gt; <span class="hljs-literal">false</span>,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">day</span> = Week::<span class="hljs-title function_ invoke__">Fun</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;no need to work!!!&quot;</span>));<br>    Week::<span class="hljs-title function_ invoke__">is_fun</span>(&amp;day);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ä¸Šé¢é€šè¿‡æšä¸¾å­˜å‚¨äº†æ•°æ®ï¼ˆStringï¼‰ï¼Œå¹¶ä¸”é€šè¿‡æ¨¡å¼åŒ¹é…ï¼Œå°†æ•°æ®ä¸statementç»‘å®šï¼Œé‡ç°äº†æ•°æ®ã€‚</p>
<p>â€‹	matchå¿…é¡»åˆ—ä¸¾æ‰€æœ‰çš„å€¼è¿›è¡ŒåŒ¹é…ï¼Œè‹¥å€¼å¤ªå¤šäº†ï¼Œä½¿ç”¨_æ¥ä»£è¡¨å…¶ä»–çš„ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Week</span> &#123;<br>    Mon,<br>    Tue,<br>    Wed,<br>    Thi,<br>    Fir,<br>    <span class="hljs-title function_ invoke__">Fun</span>(<span class="hljs-type">String</span>),<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Week</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_fun</span>(one_day: &amp;Week) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        <span class="hljs-keyword">match</span> one_day &#123;<br>            Week::<span class="hljs-title function_ invoke__">Fun</span>(statement) =&gt; &#123;<br>                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, statement);<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>            Week::Mon =&gt; <span class="hljs-literal">false</span>,<br>            Week::Fir =&gt; <span class="hljs-literal">false</span>,<br>            _ =&gt; <span class="hljs-literal">false</span>,<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="64-if-letè¯­æ³•ç³–"><a class="markdownIt-Anchor" href="#64-if-letè¯­æ³•ç³–"></a> 6.4 if-letè¯­æ³•ç³–</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Week</span> &#123;<br>    Mon,<br>    Tue,<br>    Wed,<br>    Thi,<br>    Fir,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">day</span> = Week::Fir;<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">day</span> = Week::Fir &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-string">&quot;this is Firday&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-string">&quot;nonono&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ç­‰ä»·äºï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Week</span> &#123;<br>    Mon,<br>    Tue,<br>    Wed,<br>    Thi,<br>    Fir,<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">day</span> = Week::Fir;<br>    <span class="hljs-keyword">match</span> day &#123;<br>        Week::Fir =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-string">&quot;this is Firday&quot;</span>),<br>        _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, <span class="hljs-string">&quot;nonono&quot;</span>),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="7-package-crate-module"><a class="markdownIt-Anchor" href="#7-package-crate-module"></a> 7  package crate module</h1>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220116100625209.png" alt="image-20220116100625209"></p>
<h2 id="71-å®šä¹‰"><a class="markdownIt-Anchor" href="#71-å®šä¹‰"></a> 7.1 å®šä¹‰</h2>
<p>â€‹	è‡ªé¡¶å‘ä¸‹ï¼š</p>
<ul>
<li>
<p>Packageï¼šé€šè¿‡cargoå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„åŒ…ï¼Œä½äºæœ€é¡¶å±‚ã€‚</p>
</li>
<li>
<p>Crateï¼šcargoåˆ›å»ºå®ŒåŒ…åï¼Œä¸‹é¢çš„.rsæ–‡ä»¶ï¼Œæœ‰çš„ä¼šç”ŸæˆbinaryäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆmain.rså°±æ˜¯é»˜è®¤åˆ›å»ºçš„binaryæ–‡ä»¶ï¼Œcrate rootï¼‰ï¼Œæœ‰çš„æ˜¯äº§ç”Ÿlibraryï¼ˆå…¶å®ƒçš„émain.rsæ–‡ä»¶ï¼‰ã€‚Crateåªèƒ½æ˜¯ä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li>binary</li>
<li>library</li>
</ul>
</li>
<li>
<p>Moduleï¼šåœ¨ä¸€ä¸ª.rsæ–‡ä»¶ä¸­ï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªmoduleã€‚</p>
</li>
<li>
<p>Pathï¼š</p>
</li>
</ul>
<p>â€‹	è¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå«crate rootï¼Œæ˜¯.rsæºä»£ç æ–‡ä»¶ï¼Œç¼–è¯‘å™¨ä»è¿™é‡Œå¼€å§‹ç»„æˆæˆ‘ä»¬çš„Moduleæ–‡ä»¶ã€‚</p>
<p>â€‹	ä¸‹é¢æ˜¯Packageçš„æè¿°ï¼š</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220116102055982.png" alt="image-20220116102055982"></p>
<p>â€‹	crateå¯ä»¥æŠŠç›¸å…³çš„åŠŸèƒ½æ•´åˆåˆ°ä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œè¿˜å¯ä»¥é¿å…å‘½åå†²çªã€‚</p>
<p>â€‹	Moduleæ˜¯åœ¨ä¸€ä¸ªcrateå†…ï¼Œå°†ä»£ç è¿›è¡Œåˆ†ç»„ï¼Œå¯ä»¥å¤ç”¨ï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶ä»£ç çš„æƒé™ï¼ˆpub or priï¼‰ã€‚modè¿˜æ˜¯å¯ä»¥åµŒå¥—çš„ã€‚</p>
<h2 id="72-æƒé™"><a class="markdownIt-Anchor" href="#72-æƒé™"></a> 7.2 æƒé™</h2>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220116103815978.png" alt="image-20220116103815978"></p>
<p>â€‹	åŒçº§å¯ä»¥äº’ç›¸è°ƒç”¨ï¼Œçˆ¶çº§ä¸èƒ½è°ƒç”¨å­çº§çš„ç§æœ‰ï¼Œå­çº§å¯ä»¥è°ƒç”¨æ‰€æœ‰çˆ¶çº§çš„ï¼Œæ— è®ºæš´éœ²ä¸å¦ã€‚å¤–å±‚modåŠ ä¸Šäº†pubï¼Œé‡Œå±‚çš„å‡½æ•°æ²¡åŠ ï¼Œå‡½æ•°ä¾ç„¶æ˜¯priçš„ã€‚æ‰€ä»¥å¤–é¢çš„modé‡Œé¢çš„fnéƒ½éœ€è¦åŠ ä¸Špubæ‰è¡Œã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> father &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> son_1 &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fun1</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>            <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">mod</span> son_2 &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fun2</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>            <span class="hljs-literal">true</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">testtt</span>() &#123;<br>    crate::father::son_1::<span class="hljs-title function_ invoke__">fun1</span>();<br>    crate::father::son_2::<span class="hljs-title function_ invoke__">fun2</span>(); <span class="hljs-comment">//æŠ¥é”™ï¼Œæç¤ºå‡½æ•°å’Œmodéƒ½æ˜¯ç§æœ‰çš„</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	è®¿é—®å‡½æ•°å¯ä»¥é€šè¿‡ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ã€‚å»ºè®®ç»å¯¹è·¯å¾„ã€‚</p>
<ul>
<li>ç»å¯¹è·¯å¾„ï¼š<code>crate::father::son_1::fun1();</code></li>
<li>ç›¸å¯¹è·¯å¾„ï¼š
<ul>
<li><code>father::son_1::fun1();</code></li>
<li>å­çº§åœ¨è°ƒç”¨çˆ¶çº§çš„å‡½æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡<code>superå…³é”®å­—</code></li>
</ul>
</li>
</ul>
<h2 id="73-ç»“æ„çš„æƒé™"><a class="markdownIt-Anchor" href="#73-ç»“æ„çš„æƒé™"></a> 7.3 ç»“æ„çš„æƒé™</h2>
<p>â€‹	ç»“æ„é»˜è®¤ä¸ºpriï¼Œå¹¶ä¸”ç»“æ„çš„å­—æ®µä¹Ÿæ˜¯priçš„ï¼Œå¦‚æœåƒè®¾ç½®ä¹˜å…¬æœ‰çš„ï¼ŒåŠ ä¸Špub</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> father &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">eat</span> &#123;<br>        <span class="hljs-keyword">pub</span> time: (<span class="hljs-type">u16</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>),<br>        <span class="hljs-keyword">pub</span> food: <span class="hljs-type">String</span>,<br>    &#125;<br><br>    <span class="hljs-keyword">impl</span> <span class="hljs-title class_">eat</span> &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">to_eat</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;is eating &#123;&#125; at &#123;&#125;.&#123;&#125;.&#123;&#125;.&#123;&#125;.&#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.food, <span class="hljs-keyword">self</span>.time.<span class="hljs-number">0</span>, <span class="hljs-keyword">self</span>.time.<span class="hljs-number">1</span>, <span class="hljs-keyword">self</span>.time.<span class="hljs-number">2</span>, <span class="hljs-keyword">self</span>.time.<span class="hljs-number">3</span>, <span class="hljs-keyword">self</span>.time.<span class="hljs-number">4</span>);<br>            <span class="hljs-literal">true</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">testtt</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">jack</span> = crate::father::eat &#123;<br>        time: (<span class="hljs-number">2022</span>, <span class="hljs-number">11</span>, <span class="hljs-number">21</span>, <span class="hljs-number">12</span>, <span class="hljs-number">12</span>),<br>        food: String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;kaoji&quot;</span>),<br>    &#125;;<br>    jack.<span class="hljs-title function_ invoke__">to_eat</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="74-æšä¸¾çš„æƒé™"><a class="markdownIt-Anchor" href="#74-æšä¸¾çš„æƒé™"></a> 7.4 æšä¸¾çš„æƒé™</h2>
<p>â€‹	æšä¸¾å‰é¢åŠ ä¸Špubåï¼Œå…¶é‡Œé¢çš„æšä¸¾å˜ä½“è‡ªåŠ¨å˜æˆå…¬å…±çš„äº†ã€‚</p>
<h2 id="75-useçš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#75-useçš„ä½¿ç”¨"></a> 7.5 useçš„ä½¿ç”¨</h2>
<h3 id="use"><a class="markdownIt-Anchor" href="#use"></a> use</h3>
<p>â€‹	é’ˆå¯¹å‡½æ•°ï¼Œuseä¸€èˆ¬æ—¶å¼•ç”¨å®ƒçš„ä¸Šä¸€çº§modï¼Œè€Œä¸æ˜¯ç›´æ¥å¼•å…¥åˆ°å‡½æ•°æœ¬èº«ï¼Œè¿™æ ·å¢å¼ºä»£ç çš„å¯è¯»æ€§ï¼Œé¿å…å‡½æ•°å†²çªäº†ã€‚</p>
<p>â€‹	è€Œé’ˆå¯¹ç»“æ„structï¼Œenumçš„è¯ï¼Œå°±æ˜¯å¼•å…¥åˆ°æœ¬èº«ï¼Œè€Œä¸æ˜¯çˆ¶çº§æ¡ç›®ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> father &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> son &#123;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">eat</span> &#123;<br>            <span class="hljs-keyword">pub</span> time: (<span class="hljs-type">u16</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>),<br>            <span class="hljs-keyword">pub</span> food: <span class="hljs-type">String</span>,<br>        &#125;<br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cry</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;wawawawa&quot;</span>);<br>            <span class="hljs-literal">true</span><br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">use</span> crate::father::son;<br><span class="hljs-keyword">use</span> crate::father::son::eat;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">testtttt</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = eat &#123;<br>        time: (<span class="hljs-number">2020</span>, <span class="hljs-number">11</span>, <span class="hljs-number">11</span>, <span class="hljs-number">11</span>, <span class="hljs-number">11</span>),<br>        food: String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sasa&quot;</span>),<br>    &#125;;<br>    son::<span class="hljs-title function_ invoke__">cry</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	å¯¹äºæœ‰åŒåçš„æ•°æ®ç»“æ„ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§åšæ³•ï¼š</p>
<ul>
<li>åƒå‡½æ•°ä¸€æ ·ï¼Œå¼•å…¥åˆ°çˆ¶çº§æ¡ç›®ä¸‹å°±åœæ­¢ï¼Œä¸åˆ°è¯¥æ•°æ®ç»“æ„ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨åˆ«åï¼Œç”¨asï¼ŒæŒ‡å®šä¸€ä¸ªåˆ«åã€‚</li>
</ul>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220116121716763.png" alt="image-20220116121716763"></p>
<p>â€‹	å¯ä»¥çœ‹åˆ°æŠ¥é”™äº†ã€‚</p>
<p>â€‹	å¯ä»¥å†™æˆå¦‚ä¸‹:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::io::<span class="hljs-type">Result</span> <span class="hljs-keyword">as</span> IoResult;<br><span class="hljs-keyword">use</span> std::fmt::<span class="hljs-type">Result</span> <span class="hljs-keyword">as</span> FmtResult;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span> = IoResult::<span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-number">3</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p2</span> = FmtResult::<span class="hljs-literal">Ok</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="pub-use"><a class="markdownIt-Anchor" href="#pub-use"></a> pub use</h3>
<p>â€‹	ä½¿ç”¨useå¯¼å…¥modåï¼Œè¿™ä¸ªmodå¯¹å†…éƒ¨ä½œç”¨æ˜¯å¯è§çš„ã€‚è€Œå¯¹å¦‚æœå¤–éƒ¨å»è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¯¹è¿™ä¸ªmodæ˜¯æ²¡æœ‰è®¿é—®æƒé™çš„ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨pub useï¼Œè¿™æ ·è¿™ä¸ªæ¨¡å—å¯¹å¤–éƒ¨ä¹Ÿæ˜¯å¯è§çš„äº†ã€‚</p>
<p>â€‹	pub use æ„æ€æ˜¯é‡å¯¼å‡ºã€‚</p>
<h2 id="76-ç‰¹æ®Šçš„useä½¿ç”¨"><a class="markdownIt-Anchor" href="#76-ç‰¹æ®Šçš„useä½¿ç”¨"></a> 7.6 ç‰¹æ®Šçš„useä½¿ç”¨</h2>
<ul>
<li>ä¸€æ¬¡å¼•å…¥åŒä¸€çº§ä¸‹çš„å¤šä¸ªåŒ…ã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::io::<span class="hljs-type">Result</span> <span class="hljs-keyword">as</span> IoResult;<br><span class="hljs-keyword">use</span> std::fmt::<span class="hljs-type">Result</span> <span class="hljs-keyword">as</span> FmtResult;<br>-------<span class="hljs-punctuation">-&gt;</span><br><span class="hljs-keyword">use</span> std::&#123;<br>    io::<span class="hljs-type">Result</span> <span class="hljs-keyword">as</span> IoResult,<br>    fmt::<span class="hljs-type">Result</span> <span class="hljs-keyword">as</span> FmtResult,<br>&#125;;<br></code></pre></td></tr></table></figure>
<ul>
<li>ç”¨selfä»£è¡¨å®ƒè‡ªèº«</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::io::<span class="hljs-type">Result</span>;<br><span class="hljs-keyword">use</span> std::io;<br>-------<span class="hljs-punctuation">-&gt;</span><br><span class="hljs-keyword">use</span> std::io::&#123;<br>    <span class="hljs-type">Result</span>,<br>    <span class="hljs-keyword">self</span>,<br>&#125;;<br></code></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡é€šé…ç¬¦*å¼•å…¥å…¨éƒ¨çš„åŒ…ï¼ˆä¸å»ºè®®ç»å¸¸ä½¿ç”¨ï¼‰ï¼Œä¸€èˆ¬ç”¨äº ä»¥ä¸‹æƒ…å†µ
<ul>
<li>æµ‹è¯•ï¼šå°†æ‰€æœ‰çš„å…¬å…±æ¡ç›®å¼•å…¥æµ‹è¯•testæ¨¡å—</li>
<li>é¢„å¯¼å…¥</li>
</ul>
</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::io::*;<br></code></pre></td></tr></table></figure>
<h2 id="77-å¼•å…¥è‡ªå·±å†™çš„mod"><a class="markdownIt-Anchor" href="#77-å¼•å…¥è‡ªå·±å†™çš„mod"></a> 7.7 å¼•å…¥è‡ªå·±å†™çš„mod</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> my_lib;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    my_lib::father::son::<span class="hljs-title function_ invoke__">cry</span>(); <span class="hljs-comment">//ä½¿ç”¨äº†my_lib.rsä¸‹çš„fatheræ¨¡å—ä¸­çš„sonæ¨¡å—ä¸­çš„ä¸€ä¸ªå…³è”å‡½æ•°</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	å¦‚æœmodçš„åµŒå¥—å¤ªå¤šï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„åŒåæ–‡ä»¶å¤¹ï¼Œç„¶åé‡Œé¢å»ºç«‹å­modçš„åŒå.rsæ–‡ä»¶ã€‚</p>
<p>â€‹	å¯ä»¥ç”¨modå’Œuseä¸€èµ·ä½œç”¨ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">//main.rs</span><br><span class="hljs-keyword">mod</span> my_lib;<br><span class="hljs-keyword">use</span> my_lib::father::son <span class="hljs-keyword">as</span> son;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    son::<span class="hljs-title function_ invoke__">cry</span>();<br>&#125;<br><br><span class="hljs-comment">//my_lib.rs</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> father;<br><br><span class="hljs-comment">//my_lib\father.rs</span><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> son &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">eat</span> &#123;<br>        <span class="hljs-keyword">pub</span> time: (<span class="hljs-type">u16</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>, <span class="hljs-type">u8</span>),<br>        <span class="hljs-keyword">pub</span> food: <span class="hljs-type">String</span>,<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">cry</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;wawawawa&quot;</span>);<br>        <span class="hljs-literal">true</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	æ ‘å½¢ç»“æ„ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust">src<br>	main.rs<br>	my_lib.rs<br>	my_lib<br>		father.rs<br></code></pre></td></tr></table></figure>
<h1 id="8-é›†åˆ"><a class="markdownIt-Anchor" href="#8-é›†åˆ"></a> 8 é›†åˆ</h1>
<p>â€‹	é›†å’Œæ˜¯å»ºç«‹åœ¨heapä¸Šçš„æ•°æ®ï¼Œå› æ­¤åœ¨ç¼–è¯‘æ—¶ä¸éœ€è¦å»ç¡®å®šå¤§å°ï¼Œåœ¨è¿è¡Œæ—¶ä¼šè‡ªåŠ¨å˜åŒ–ã€‚</p>
<h2 id="81-vector"><a class="markdownIt-Anchor" href="#81-vector"></a> 8.1 Vector</h2>
<h3 id="1åˆ›å»º"><a class="markdownIt-Anchor" href="#1åˆ›å»º"></a> 1.åˆ›å»º</h3>
<p>â€‹	æœ‰ä¸¤ç§æ–¹å¼åˆ›å»ºVector</p>
<ul>
<li>é€šè¿‡å…³è”å‡½æ•°ï¼Œè¿™ç§æƒ…å†µéœ€è¦æ˜¾ç¤ºçš„æŒ‡æ˜ç±»å‹ã€‚</li>
<li>é€šè¿‡å·²æœ‰çš„å€¼æ¥åˆ›å»º</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v1</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = Vec::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v2</span> = <span class="hljs-built_in">vec!</span>[String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;first&quot;</span>)];<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	rustæœ‰ä¸Šä¸‹æ–‡æ¨æ–­æœºåˆ¶ï¼Œå¦‚æœå‰é¢æ²¡æœ‰æ˜ç¡®Vecçš„ç±»å‹ï¼Œè¿™æ—¶ä¼šæŠ¥é”™ï¼›ç„¶ååé¢æ·»åŠ äº†å…ƒç´ ï¼Œåˆèƒ½å¤Ÿè‡ªåŠ¨æ¨æ–­å‡ºç±»å‹äº†ï¼ŒæŠ¥é”™ä¼šæ¶ˆå¤±ã€‚</p>
<h3 id="2æ›´æ–°"><a class="markdownIt-Anchor" href="#2æ›´æ–°"></a> 2.æ›´æ–°</h3>
<p>â€‹	æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼åˆ›å»ºVectorï¼Œå¹¶ä¸”å‘é‡Œé¢æ·»åŠ å…ƒç´ ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = Vec::<span class="hljs-title function_ invoke__">new</span>();<br>    v.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">1i64</span>); <span class="hljs-comment">//64ä½æœ‰ç¬¦å·</span><br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="3æ¸…ç†"><a class="markdownIt-Anchor" href="#3æ¸…ç†"></a> 3.æ¸…ç†</h3>
<p>â€‹	ä¸€èˆ¬è€Œè¨€ï¼Œç¦»å¼€ä½œç”¨åŸŸåï¼ŒVectorå°±ä¼šè¢«OSè°ƒç”¨dropç»™æ¸…ç†æ‰ã€‚</p>
<h3 id="4è·å–"><a class="markdownIt-Anchor" href="#4è·å–"></a> 4.è·å–</h3>
<p>â€‹	ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li>ç´¢å¼•ï¼šå¾—åˆ°çš„æ˜¯æ•°æ®æœ¬èº«</li>
<li>getæ–¹æ³•ï¼šå¾—åˆ°çš„æ˜¯Some(T)æˆ–è€…Noneï¼Œå…¶ä¸­Tæ˜¯ä¸å¯å˜å¼•ç”¨ã€‚</li>
</ul>
<p>â€‹	getæ›´å®‰å…¨ï¼Œå¯ä»¥å¯¹å¾—åˆ°çš„æ•°æ®è¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œå¦‚æœæ˜¯Someå°±å–å‡ºï¼Œæ˜¯Noneå°±ä¸å–å‡ºï¼Œæç¤ºé”™è¯¯ã€‚</p>
<p>â€‹	è€Œç´¢å¼•çš„è¯ï¼Œå°±ä¼šå‡ºç°panicï¼Œç¨‹åºææ…Œã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = Vec::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">num</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..<span class="hljs-number">30i32</span>).<span class="hljs-title function_ invoke__">rev</span>() &#123;<br>        v.<span class="hljs-title function_ invoke__">push</span>(num);<br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span>: <span class="hljs-type">i32</span> = <span class="hljs-keyword">match</span> v.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">10000</span>) &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(n) =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;get it: &#123;&#125;&quot;</span>, n);<br>            *n<br>        &#125;,<br>        <span class="hljs-literal">None</span> =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;error&quot;</span>);<br>            -<span class="hljs-number">1</span><br>        &#125;,<br>    &#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, res);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	å› ä¸ºVecåœ¨heapä¸Šï¼Œæ‰€ä»¥æœ‰æ‰€æœ‰æƒçš„å€Ÿç”¨ï¼Œç”¨getå¾—åˆ°çš„æ˜¯å¼•ç”¨ï¼Œç”¨ç´¢å¼•çš„åˆ°çš„æ˜¯æœ¬èº«ã€‚ä½†æ˜¯å€Ÿç”¨ä¸¤è¾¹å¹¶ä¸ä¼šæŠ¥é”™ï¼ˆi32ï¼‰ï¼Œ<em>è¯´æ˜æ˜¯å­˜æ”¾åœ¨æ ˆä¸Šçš„ï¼Œcopyå’Œmoveéƒ½ä¸€æ ·</em>ã€‚è¿™ä¸ªåœ°æ–¹æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºi32å®ç°çš„æ˜¯copy traitï¼Œæ‰€ä»¥ä½¿ç”¨ç­‰å·æ—¶ä¼šåœ¨æ ˆä¸Šå‹æ ˆä¸€ä¸ªç›¸åŒçš„æ•°æ®ã€‚è‡ªç„¶ä¸ä¼šæœ‰æ‰€æœ‰æƒçš„é—®é¢˜ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = Vec::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">num</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..<span class="hljs-number">30i32</span>).<span class="hljs-title function_ invoke__">rev</span>() &#123;<br>        v.<span class="hljs-title function_ invoke__">push</span>(num);<br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n1</span> = v[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n2</span> = v[<span class="hljs-number">0</span>];<br>&#125;<br><span class="hljs-comment">//å¹¶æ²¡æœ‰æŠ¥é”™</span><br></code></pre></td></tr></table></figure>
<p>â€‹	ä¸‹é¢ä¿®æ”¹æˆStringç±»å‹çš„è¯•è¯•ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">//cannot move out of index of `std::vec::Vec&lt;std::string::String&gt;`</span><br><span class="hljs-comment">//move occurs because value has type `std::string::String`, which does not implement the `Copy` trait</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = Vec::<span class="hljs-title function_ invoke__">new</span>();<br>    v.<span class="hljs-title function_ invoke__">push</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>));<br>    v.<span class="hljs-title function_ invoke__">push</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>));<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n1</span> = v[<span class="hljs-number">0</span>]; <span class="hljs-comment">//æŠ¥é”™</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	é”™è¯¯ä¿¡æ¯å¦‚ä¸Šã€‚Stringæ²¡æœ‰å®ç°copy traitï¼Œè€Œæ˜¯drop traitï¼Œå¦‚æœæ“ä½œæˆåŠŸï¼ŒåŸæ¥Vecé‡Œé¢å¯¹åº”ä½ç½®çš„æ•°æ®å°±ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥åªèƒ½é‡‡ç”¨å€Ÿç”¨ï¼Œä¹Ÿå°±æ˜¯ç”¨å¼•ç”¨æ¥è·å–ã€‚</p>
<p>â€‹	è€Œgeté»˜è®¤çš„å°±æ˜¯å¾—åˆ°ä¸€ä¸ªå¼•ç”¨ï¼Œç”¨ç´¢å¼•çš„è¯éœ€è¦åŠ ä¸Šå¼•ç”¨ç¬¦å·ã€‚</p>
<p>â€‹	ä¸‹é¢æˆ‘ä»¬å…ˆé€šè¿‡ç´¢å¼•åŠ å¼•ç”¨ç¬¦å·å¾—åˆ°ä¸€ä¸ªä¸å¯å˜å¼•ç”¨ï¼Œç„¶åå†æ·»åŠ ä¸€ä¸ªå…ƒç´ è¿›å»ï¼Œæœ€åå†æ‰“å°è¿™ä¸ªä¸å¯å˜å¼•ç”¨æŒ‡å‘çš„å€¼ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = Vec::<span class="hljs-title function_ invoke__">new</span>();<br>    v.<span class="hljs-title function_ invoke__">push</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>));<br>    v.<span class="hljs-title function_ invoke__">push</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>));<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n1</span> = &amp;v[<span class="hljs-number">0</span>];<br>    v.<span class="hljs-title function_ invoke__">push</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;   &quot;</span>)); <span class="hljs-comment">//è¿™ä¸€è¡Œä¼šæŠ¥é”™</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, n1);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220116142000246.png" alt="image-20220116142000246"></p>
<p>â€‹	åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li>ä¸å¯å˜å¼•ç”¨ä¸å¯å˜å¼•ç”¨ä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚</li>
<li>Vecçš„æœºåˆ¶ï¼Œå› ä¸ºåœ¨å †ä¸Šåˆ†é…çš„ç©ºé—´ï¼Œæ‰€ä»¥ç©ºé—´å¯èƒ½ä¸è¶³ï¼Œéœ€è¦é‡æ–°åˆ†é…ç©ºé—´ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªæ•°æ®çš„è¿ç§»ï¼Œæœ€åé‡Šæ”¾æ‰åŸæ¥é‚£éƒ¨åˆ†çš„ç©ºé—´ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä¸Šé¢è·å–çš„ä¸å¯å˜å¼•ç”¨ï¼Œå®ƒçš„æŒ‡å‘æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œè¿™æ ·å°±æŒ‡å‘äº†ä¸€ç‰‡ç©ºçš„å†…å­˜ï¼Œæ˜¯ä¸å®‰å…¨çš„ã€‚æ‰€ä»¥ç¼–è¯‘å™¨ä¸å…è®¸è¿™æ ·çš„æƒ…å†µå‘ç”Ÿã€‚</li>
</ul>
<p>â€‹	ç„¶åå†æ¬¡è¯•äº†ä¸€ä¸‹ä½¿ç”¨Vectorå­˜æ”¾i64ï¼Œæ”¾å¾ˆå¤šæ•°æ®ã€‚ç„¶åå‘ç”Ÿäº†æ ˆæº¢å‡ºã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/**memory allocation of 8589934592 bytes failed</span><br><span class="hljs-comment"> *error: process didn&#x27;t exit successfully: `target\debug\stdvector.exe` (exit code: 0xc0000409,    	      *STATUS_STACK_BUFFER_OVERRUN)</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = Vec::<span class="hljs-title function_ invoke__">new</span>();<br>    v.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">1i64</span>);<br>    v.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">2i64</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n1</span> = v[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">num</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..<span class="hljs-number">1000000000000000000i64</span>) &#123;<br>        v.<span class="hljs-title function_ invoke__">push</span>(num);<br>    &#125;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, n1);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	æ¢æˆStringä¹Ÿä¼šå‘ç”Ÿæº¢å‡ºã€‚</p>
<p>â€‹	ç„¶åæŸ¥é˜…äº†ç›¸å…³èµ„æ–™ï¼Œç¡®å®šVecæ˜¯å­˜æ”¾åœ¨æ ˆä¸Šçš„ã€‚</p>
<h3 id="5éå†"><a class="markdownIt-Anchor" href="#5éå†"></a> 5.éå†</h3>
<p>â€‹	é€šè¿‡forå¾ªç¯éå†ï¼Œé€šè¿‡è§£å¼•ç”¨*æ›´æ–°ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">num</span> <span class="hljs-keyword">in</span> &amp;<span class="hljs-keyword">mut</span> v &#123;<br>        *num = *num + <span class="hljs-number">50</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">num</span> <span class="hljs-keyword">in</span> &amp;<span class="hljs-keyword">mut</span> v &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, num);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="82-enum-vector"><a class="markdownIt-Anchor" href="#82-enum-vector"></a> 8.2 enum &amp; vector</h2>
<p>â€‹	å­˜æ”¾æ—¶ç›´æ¥å­˜æ”¾å°±è¡Œï¼Œå–å‡ºæ—¶éœ€è¦æ ¹æ®ç±»å‹å–å‡ºã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">InputKind</span> &#123;<br>    <span class="hljs-title function_ invoke__">Int</span>(<span class="hljs-type">i32</span>),<br>    <span class="hljs-title function_ invoke__">Float</span>(<span class="hljs-type">f64</span>),<br>    <span class="hljs-title function_ invoke__">Text</span>(<span class="hljs-type">String</span>),<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<br>        InputKind::<span class="hljs-title function_ invoke__">Int</span>(<span class="hljs-number">32</span>),<br>        InputKind::<span class="hljs-title function_ invoke__">Float</span>(<span class="hljs-number">3.22222</span>),<br>        InputKind::<span class="hljs-title function_ invoke__">Text</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hhhh&quot;</span>)),<br>    ];<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="83-stringç±»å‹"><a class="markdownIt-Anchor" href="#83-stringç±»å‹"></a> 8.3 Stringç±»å‹</h2>
<h3 id="1åˆ›å»ºå­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#1åˆ›å»ºå­—ç¬¦ä¸²"></a> 1.åˆ›å»ºå­—ç¬¦ä¸²</h3>
<p>â€‹	ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²æ— åˆå€¼ï¼Œä½¿ç”¨newå…³è”å‡½æ•°ã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">new</span>();<br></code></pre></td></tr></table></figure>
<ul>
<li>
<p>å­—ç¬¦ä¸²æœ‰åˆå€¼ï¼š</p>
<ul>
<li>ä½¿ç”¨å…³è”å‡½æ•°from</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hhh&quot;</span>);<br></code></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨to_Stringæ–¹æ³•</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;hhh&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>(); <span class="hljs-comment">//è¿™é‡Œçš„stringæ˜¯å°å†™</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2æ›´æ–°-2"><a class="markdownIt-Anchor" href="#2æ›´æ–°-2"></a> 2.æ›´æ–°</h3>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220116152252174.png" alt="image-20220116152252174"></p>
<h3 id="3è®¿é—®"><a class="markdownIt-Anchor" href="#3è®¿é—®"></a> 3.è®¿é—®</h3>
<p>â€‹	ä¸æ”¯æŒç´¢å¼•è®¿é—®ï¼Œåªèƒ½ç”¨åˆ‡ç‰‡æ¥è®¿é—®ã€‚</p>
<p>â€‹	åŸå› æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>UTF8ç¼–ç ï¼Œä¸€ä¸ªUnicodeå€¼å¯¹åº”çš„å­—èŠ‚æ•°ä¸æ˜¯å›ºå®šçš„ã€‚</li>
<li>ç´¢å¼•æ“ä½œåº”è¯¥æ¶ˆè€—O(1)çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½†æ˜¯Stringæ— æ³•ä¿è¯ã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;Hello_world&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = &amp;s[<span class="hljs-number">0</span>..<span class="hljs-number">1</span>];<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, p);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="4å†…éƒ¨è¡¨ç¤º"><a class="markdownIt-Anchor" href="#4å†…éƒ¨è¡¨ç¤º"></a> 4.å†…éƒ¨è¡¨ç¤º</h3>
<p>â€‹	Stringæ—¶å¯¹Vec<u8>çš„åŒ…è£…ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯å˜å­—èŠ‚æ•°ç»„ã€‚</u8></p>
<p>â€‹	æœ‰ä¸€ä¸ªlenæ–¹æ³•è¿”å›çš„æ˜¯å®ƒçš„å­—èŠ‚æ•°ã€‚</p>
<p>â€‹	Stringæœ‰ä¸€ä¸ªå¤§å‘ï¼ŒStringé‡Œé¢å­˜å‚¨çš„æ˜¯å­—èŠ‚ï¼Œä½†æ˜¯å­—ç¬¦éƒ½æœ‰å®ƒçš„Unicodeæ ‡é‡å€¼ï¼Œä¸€ä¸ªUnicodeå€¼ä¸ä¸€å®šå°±æ˜¯ä¸€ä¸ªå­—èŠ‚ã€‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ±‰å­—ï¼š1 Unicode â€“ 3 Byte</li>
<li>è‹±è¯­ï¼š1 Unicode â€“ 1 Byte</li>
<li>å°åº¦ï¼š1 Unicode â€“ 2 Byte</li>
</ul>
<p>â€‹	è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è®¿é—®ï¼Œç”¨å­—ç¬¦ä¸²åˆ‡å‰²ä¹Ÿè¦çœ‹å“åº”çš„åœºæ™¯äº†ã€‚</p>
<p>â€‹	Rusté‡Œæœ‰ä¸‰ç§çœ‹å¾…å­—ç¬¦ä¸²çš„æ–¹å¼ï¼ˆè‡ªåº•å‘ä¸Šï¼‰ï¼š</p>
<ul>
<li>å­—èŠ‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;à¤¨à¤®à¤¸à¥à¤¤à¥‡&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> s.<span class="hljs-title function_ invoke__">bytes</span>() &#123;<br>        <span class="hljs-built_in">print!</span>(<span class="hljs-string">&quot;&#123;&#125; &quot;</span>, i);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//224 164 168 224 164 174 224 164 184 224 165 141 224 164 164 224 165 135 </span><br></code></pre></td></tr></table></figure>
<ul>
<li>æ ‡é‡å€¼</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;à¤¹à¥‡à¤²à¥‹ à¤¬à¤¾à¤¸à¥à¤Ÿà¤¿à¤¯à¤¨&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> s.<span class="hljs-title function_ invoke__">chars</span>() &#123;<br>        <span class="hljs-built_in">print!</span>(<span class="hljs-string">&quot;&#123;&#125; &quot;</span>, i);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//à¤¨ à¤® à¤¸ à¥ à¤¤ à¥‡ </span><br><span class="hljs-comment">//ç¬¬å››ä¸ªå’Œç¬¬å…­ä¸ªæ˜¯ç±»ä¼¼éŸ³è°ƒçš„ä¸œè¥¿ï¼Œæ‹†åˆ†å¼€æ²¡æœ‰æ„ä¹‰</span><br></code></pre></td></tr></table></figure>
<ul>
<li>å­—å½¢ç°‡ï¼šæ ‡å‡†åº“é‡Œæ²¡æœ‰æä¾›ã€‚</li>
</ul>
<h3 id="5å­—ç¬¦ä¸²åˆ‡ç‰‡çš„å‘"><a class="markdownIt-Anchor" href="#5å­—ç¬¦ä¸²åˆ‡ç‰‡çš„å‘"></a> 5.å­—ç¬¦ä¸²åˆ‡ç‰‡çš„å‘</h3>
<p>â€‹	ä½¿ç”¨[minâ€¦max]æ¥è¿›è¡Œåˆ‡ç‰‡ï¼Œä»[min, max - 1]</p>
<p>â€‹	å¦‚æœåˆ‡å‰²çš„ä¸æ˜¯å®Œæ•´çš„Unicodeç¼–ç ï¼Œä¸ä¼šæŠ¥é”™ï¼Œä½†ä¼šå‘ç”Ÿææ…Œ</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-string">&quot;à¤¨à¤®à¤¸à¥à¤¤à¥‡&quot;</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">q</span> = &amp;s[<span class="hljs-number">0</span>..<span class="hljs-number">1</span>];<br>&#125;<br><span class="hljs-comment">//thread &#x27;main&#x27; panicked at &#x27;byte index 1 is not a char boundary; it is inside &#x27;à¤¨&#x27; (bytes 0..3) of `à¤¨à¤®à¤¸à¥à¤¤à¥‡`&#x27;, src\main.rs:3:14</span><br></code></pre></td></tr></table></figure>
<h3 id="6éå†"><a class="markdownIt-Anchor" href="#6éå†"></a> 6.éå†</h3>
<p>â€‹	éå†åœ¨å†…éƒ¨è¡¨ç¤ºä¸­æåŠã€‚</p>
<h2 id="84-hashmap"><a class="markdownIt-Anchor" href="#84-hashmap"></a> 8.4 HashMap</h2>
<h3 id="1åˆ›å»ºåŠæ’å…¥"><a class="markdownIt-Anchor" href="#1åˆ›å»ºåŠæ’å…¥"></a> 1.åˆ›å»ºåŠæ’å…¥</h3>
<ul>
<li>å¼•å…¥åŒ…</li>
<li>newåˆ›å»º</li>
<li>insertæ’å…¥</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">map</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    map.<span class="hljs-title function_ invoke__">insert</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;001&quot;</span>), String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;qcy&quot;</span>));<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	HashMapæ˜¯åŒæ„çš„ï¼Œæ‰€æœ‰çš„keyæ˜¯ä¸€ç§ç±»å‹ï¼Œvalueä¹Ÿæ˜¯ä¸€ç§ç±»å‹</p>
<p>â€‹	ä¸Šé¢æ˜¯å¸¸è§„çš„åˆ›å»ºæ–¹æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨tupleæ¥åˆ›å»ºã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">name</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-string">&quot;qcy&quot;</span>, <span class="hljs-string">&quot;qqccuy&quot;</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">12u8</span>, <span class="hljs-number">13u8</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">map</span>: HashMap&lt;_, _&gt; = name.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">zip</span>(age.<span class="hljs-title function_ invoke__">iter</span>()).<span class="hljs-title function_ invoke__">collect</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	å…ˆåˆ›å»ºä¸¤ä¸ªVectorï¼Œç„¶åç”¨ä¸€ä¸ªvecç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œå†è·Ÿå¦å¤–ä¸€ä¸ªvecçš„è¿­ä»£å™¨è¿›è¡Œä¸€ä¸€æ˜ å°„ã€‚ç„¶åå†ç”¨collectæ–¹æ³•æ‰“åŒ…è¿”å›ä¸€ä¸ªhashmapã€‚</p>
<p>â€‹	é‚£ä¸ª&lt;_, _&gt;æ˜¯ä¼šè‡ªåŠ¨æ¨æ–­çš„ï¼Œä½†æ˜¯ä¸å¯ä»¥çœå»ã€‚</p>
<p>â€‹	å‘HashMapä¸­æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®æ˜¯å®ç°äº†copy traitçš„è¯ï¼Œæ•°æ®ä¼šè¢«å¤åˆ¶ä¸€ä»½ã€‚å¦‚æœæ˜¯æ˜¯è¥¿å®‰äº†drop traitçš„è¯ï¼Œæ•°æ®ä¼šè¢«ä¸€è§‰ï¼Œæ‰€æœ‰æƒä¹Ÿä¼šè½¬ç§»ï¼Œæºæ•°æ®ä¹Ÿä¼šå¤±æ•ˆã€‚</p>
<p>â€‹	ä½†å¦‚æœæ’å…¥çš„æ˜¯å¼•ç”¨ï¼Œå°±ä¸ä¼šå‘ç”Ÿæ‰€æœ‰æƒçš„ç§»äº¤äº†ã€‚</p>
<p>â€‹	ä¸‹é¢æ˜¯é€šè¿‡getè·å–mapä¸­çš„å€¼ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">name</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-string">&quot;qcy&quot;</span>, <span class="hljs-string">&quot;qqccuy&quot;</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">18u8</span>, <span class="hljs-number">18u8</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">map</span>: HashMap&lt;_, _&gt; = (&amp;name).<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">zip</span>((&amp;age).<span class="hljs-title function_ invoke__">iter</span>()).<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = map.<span class="hljs-title function_ invoke__">get</span>(&amp;name[<span class="hljs-number">0</span>]);<br>    <span class="hljs-keyword">match</span> res &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(r) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, r),<br>        <span class="hljs-literal">None</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;error&quot;</span>),<br>    &#125;;<br>&#125;<br><span class="hljs-comment">//æ‰“å°18</span><br></code></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">name</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-string">&quot;qcy&quot;</span>, <span class="hljs-string">&quot;qqccuy&quot;</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">18u8</span>, <span class="hljs-number">18u8</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">map</span>: HashMap&lt;_, _&gt; = (&amp;name).<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">zip</span>((&amp;age).<span class="hljs-title function_ invoke__">iter</span>()).<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = map.<span class="hljs-title function_ invoke__">get</span>(&amp;<span class="hljs-string">&quot;hhh&quot;</span>);<br>    <span class="hljs-keyword">match</span> res &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(r) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, r),<br>        <span class="hljs-literal">None</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;error&quot;</span>),<br>    &#125;;<br>&#125;<br><span class="hljs-comment">//æ‰“å° error</span><br></code></pre></td></tr></table></figure>
<h3 id="2éå†"><a class="markdownIt-Anchor" href="#2éå†"></a> 2.éå†</h3>
<p>â€‹	ä½¿ç”¨å…ƒç»„tupleå’Œfor-eachè¿›è¡Œéå†</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">name</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-string">&quot;qcy&quot;</span>, <span class="hljs-string">&quot;qqccuy&quot;</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">age</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">18u8</span>, <span class="hljs-number">18u8</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">map</span>: HashMap&lt;_, _&gt; = (&amp;name).<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">zip</span>((&amp;age).<span class="hljs-title function_ invoke__">iter</span>()).<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-title function_ invoke__">for</span> (k, v) <span class="hljs-keyword">in</span> map &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, k, v);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="3æ›´æ–°"><a class="markdownIt-Anchor" href="#3æ›´æ–°"></a> 3.æ›´æ–°</h3>
<p>â€‹	å½“å‘mapä¸­æ’å…¥æ•°æ®æ—¶ï¼Œå¯èƒ½æœ‰ä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li>
<p>æ•°æ®ä¸å­˜åœ¨ï¼Œç›´æ¥æ’å…¥å³å¯ã€‚</p>
</li>
<li>
<p>æ•°æ®å­˜åœ¨</p>
<ul>
<li>å¿½ç•¥åŸæ¥çš„æ•°æ®vï¼Œç”¨æ–°çš„væ›¿æ¢æ‰å®ƒ â€“ insert()æ–¹æ³•å°±æ˜¯è¿™æ ·çš„</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">m</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;qcy&quot;</span>);<br>    m.<span class="hljs-title function_ invoke__">insert</span>(&amp;s, <span class="hljs-number">0u8</span>);<br>    m.<span class="hljs-title function_ invoke__">insert</span>(&amp;s, <span class="hljs-number">99u8</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, m);<br>&#125;<br><span class="hljs-comment">//&#123;&quot;qcy&quot;: 99&#125;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>ä¿ç•™ç°åœ¨çš„vï¼Œå¿½ç•¥æ–°çš„v â€“ ä½¿ç”¨entryæ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œç”¨or_insert(v)æ–¹æ³•æ¥æ’å…¥ï¼Œå¦‚æœkä¸å­˜åœ¨ï¼Œæ‰§è¡Œï¼›å­˜åœ¨ï¼Œä¸æ‰§è¡Œã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">m</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;qqcy&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;qcwdfg&quot;</span>);<br>    m.<span class="hljs-title function_ invoke__">insert</span>(&amp;s1, <span class="hljs-number">1u8</span>);<br>    m.<span class="hljs-title function_ invoke__">entry</span>(&amp;s2).<span class="hljs-title function_ invoke__">or_insert</span>(<span class="hljs-number">122u8</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, m);<br>&#125;<br><span class="hljs-comment">//&#123;&quot;qqcy&quot;: 1, &quot;qcwdfg&quot;: 122&#125;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>åˆå¹¶æ—§çš„vå’Œæ–°çš„v â€“ è¿˜æ˜¯ä½¿ç”¨or_insert(v)ï¼Œæ¥åˆ¤æ–­ï¼Œè‹¥kå­˜åœ¨ä¼šè¿”å›ä¸€ä¸ªkçš„å¯å˜å¼•ç”¨ï¼Œå¯ä»¥å¯¹kè¿›è¡Œä¿®æ”¹ã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">map</span>: HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">u32</span>&gt; = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">text</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;h h h h h a a x c v b g r e qw s f gf g h h &quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = text.<span class="hljs-title function_ invoke__">split_whitespace</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> res &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">num</span> = map.<span class="hljs-title function_ invoke__">entry</span>((*i).<span class="hljs-title function_ invoke__">to_string</span>()).<span class="hljs-title function_ invoke__">or_insert</span>(<span class="hljs-number">0</span>);<br>        *num += <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, map);<br>&#125;<br><span class="hljs-comment">//&#123;&quot;h&quot;: 7, &quot;b&quot;: 1, &quot;x&quot;: 1, &quot;r&quot;: 1, &quot;e&quot;: 1, &quot;f&quot;: 1, &quot;gf&quot;: 1, &quot;g&quot;: 2, &quot;s&quot;: 1, &quot;c&quot;: 1, &quot;qw&quot;: 1, &quot;v&quot;: 1, &quot;a&quot;: 2&#125;</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4hashå‡½æ•°"><a class="markdownIt-Anchor" href="#4hashå‡½æ•°"></a> 4.Hashå‡½æ•°</h3>
<p>â€‹	ä¸€èˆ¬é»˜è®¤æƒ…å†µä¸‹ï¼š</p>
<ul>
<li>å¯æŠµå¾¡Dosæ”»å‡» â€“ è‰¯å¥½çš„å®‰å…¨æ€§</li>
<li>å¹¶ä¸æ˜¯æœ€å¿«çš„ â€“ æ€§èƒ½ä¸€èˆ¬</li>
</ul>
<p>è‹¥æ˜¯è§‰å¾—æ€§èƒ½ä¸å¥½ï¼Œå¯ä»¥ä¿®æ”¹trait</p>
<h1 id="9é”™è¯¯å¤„ç†"><a class="markdownIt-Anchor" href="#9é”™è¯¯å¤„ç†"></a> 9.é”™è¯¯å¤„ç†</h1>
<h2 id="1ä¸å¯æ¢å¤çš„é”™è¯¯ä¸panicå®"><a class="markdownIt-Anchor" href="#1ä¸å¯æ¢å¤çš„é”™è¯¯ä¸panicå®"></a> 1.ä¸å¯æ¢å¤çš„é”™è¯¯ä¸panic!å®</h2>
<p>â€‹	å¤§å¤šç¼–ç¨‹è¯­è¨€åœ¨é”™è¯¯å¤„ç†è¿™æ–¹é¢æä¾›äº†å¼‚å¸¸æœºåˆ¶ï¼Œæ²¡æœ‰å¯¹å¯æ¢å¤é”™è¯¯ä¸ä¸å¯æ¢å¤é”™è¯¯è¿›è¡ŒåŒºåˆ†ï¼Œè€ŒRustæ²¡æœ‰å¼‚å¸¸æœºåˆ¶ï¼Œä½†ä»–å¯¹é”™è¯¯å¤„ç†è¿›è¡Œäº†åˆ†ç±»ï¼š</p>
<ul>
<li>å¯æ¢å¤é”™è¯¯ï¼šå¦‚æ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œå¯å†æ¬¡å°è¯•
<ul>
<li>ä½¿ç”¨Result&lt;T, E&gt;</li>
</ul>
</li>
<li>ä¸å¯æ¢å¤é”™è¯¯ï¼šå¦‚Vecè¶Šç•Œè®¿é—®
<ul>
<li>ä½¿ç”¨panic!å®è¿›è¡Œå¤„ç†</li>
</ul>
</li>
</ul>
<p>â€‹	é’ˆå¯¹ä¸å¯æ¢å¤çš„é”™è¯¯ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§å¤„ç†ï¼Œå±•å¼€æˆ–ç»ˆæ­¢ï¼ˆabortï¼‰è°ƒç”¨æ ˆã€‚</p>
<ul>
<li>å±•å¼€è°ƒç”¨æ ˆï¼šRustæ²¿ç€è°ƒç”¨æ ˆå¾€å›èµ°ï¼Œæ¸…ç†é‡åˆ°æ¯ä¸ªå‡½æ•°ä¸­çš„æ•°æ®ã€‚</li>
<li>ç»ˆæ­¢è°ƒç”¨æ ˆï¼šç›´æ¥ç»ˆæ­¢ç¨‹åºï¼Œä¸è¿›è¡Œæ¸…ç†ã€‚ä½†æ˜¯éœ€è¦ç”±OSæ¥æ¸…ç†ã€‚</li>
</ul>
<p>â€‹	è‹¥æƒ³äºŒè¿›åˆ¶æ–‡ä»¶æ›´å°ï¼Œéœ€è¦å°†é»˜è®¤çš„å±•å¼€æ”¹æˆç»ˆæ­¢ã€‚</p>
<p>â€‹	å…·ä½“å°±æ˜¯åœ¨cargo.tomlä¸­è®¾ç½®profileã€‚</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs toml"><span class="hljs-section">[package]</span><br><span class="hljs-attr">name</span> = <span class="hljs-string">&quot;paniccccccc&quot;</span><br><span class="hljs-attr">version</span> = <span class="hljs-string">&quot;0.1.0&quot;</span><br><span class="hljs-attr">edition</span> = <span class="hljs-string">&quot;2021&quot;</span><br><br><span class="hljs-comment"># See more keys and their definitions at https://doc.rust-lang/.org/cargo/reference/manifest.html</span><br><br><span class="hljs-section">[dependencies]</span><br><br><span class="hljs-section">[profile.release]</span><br><span class="hljs-attr">panic</span> = <span class="hljs-string">&#x27;abort&#x27;</span><br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://main.rs">main.rs</a></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2u8</span>];<br>    v[<span class="hljs-number">999</span>];<br>&#125;<br><span class="hljs-comment">//note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace</span><br><span class="hljs-comment">//é€šè¿‡set RUST_BACKTRACE=1 &amp;&amp; cargo run è¿›è¡Œæ ˆå›æº¯</span><br></code></pre></td></tr></table></figure>
<p>â€‹	é¡ºä¾¿å†æ¬¡å¤ä¹ ä¸€ä¸‹ï¼Œv.get(999)å¹¶ä¸ä¼šæŠ¥é”™ï¼Œå¾—åˆ°çš„è¿”å›å€¼æ˜¯None</p>
<h2 id="2resultæšä¸¾ä¸å¯æ¢å¤çš„é”™è¯¯"><a class="markdownIt-Anchor" href="#2resultæšä¸¾ä¸å¯æ¢å¤çš„é”™è¯¯"></a> 2.Resultæšä¸¾ä¸å¯æ¢å¤çš„é”™è¯¯</h2>
<p>â€‹	æ‰§è¡Œæ–‡ä»¶æ“ä½œä¼šè¿”å›ä¸€ä¸ªResultçš„æšä¸¾å˜ä½“ï¼Œæ“ä½œæˆåŠŸä¸ºOk(T)ï¼Œå¤±è´¥ä¸ºErr(E)</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = <span class="hljs-keyword">match</span> f &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(file) =&gt; file,<br>        <span class="hljs-title function_ invoke__">Err</span>(error) =&gt; &#123;<br>            <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, error);<br>        &#125;<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ä¸‹é¢æ˜¯é’ˆå¯¹ä¸åŒçš„é”™è¯¯ï¼Œé€šè¿‡matchåšçš„ä¸€äº›å¤„ç†</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::&#123;<br>    fs::File,<br>    io::ErrorKind,<br>&#125;;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = <span class="hljs-keyword">match</span> f &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(file) =&gt; file,<br>        <span class="hljs-title function_ invoke__">Err</span>(error) =&gt; <span class="hljs-keyword">match</span> error.<span class="hljs-title function_ invoke__">kind</span>() &#123;<br>            ErrorKind::NotFound =&gt; <span class="hljs-keyword">match</span> File::<span class="hljs-title function_ invoke__">create</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>) &#123;<br>                <span class="hljs-title function_ invoke__">Ok</span>(msg) =&gt; msg,<br>                <span class="hljs-title function_ invoke__">Err</span>(msg) =&gt; <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, msg),<br>            &#125;,<br>            OtherError =&gt; <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, OtherError),<br>        &#125;,<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="3unwrapä¸expectæ›¿æ¢match"><a class="markdownIt-Anchor" href="#3unwrapä¸expectæ›¿æ¢match"></a> 3.unwrapä¸expectæ›¿æ¢match</h2>
<p>â€‹	ä¸Šé¢æˆ‘ä»¬ç”¨äº†å¾ˆå¤šmatchï¼Œä»£ç çš„å¯è¯»æ€§è¿˜è¡Œï¼Œä½†å¤ªè‡ƒè‚¿äº†ã€‚</p>
<p>â€‹	ä¸‹é¢æä¾›ä¸€ç§unwrap()æ–¹æ³•ã€‚</p>
<p>â€‹	ä½¿ç”¨unwrapæ‰“å¼€æ–‡ä»¶</p>
<ul>
<li>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œç¨‹åºææ…Œ</li>
<li>å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œè¿”å›æ–‡ä»¶</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨unwrapåˆ›å»ºæ–‡ä»¶</p>
<ul>
<li>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–‡ä»¶</li>
<li>å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œè¿”å›æ–‡ä»¶</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">create</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ä½†æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œunwrapæ— æ³•å®šä½é”™è¯¯ä¿¡æ¯ï¼ˆæ‰€æœ‰unwrapè¿”å›çš„é”™è¯¯ä¿¡æ¯éƒ½æ˜¯ä¸€æ ·çš„ï¼‰ï¼Œæ‰€ä»¥ä¸‹é¢ä»‹ç»expect</p>
<p>â€‹	expectä¸unwrapä¸€æ ·ï¼Œå•æ•°å¯ä»¥æ§åˆ¶è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯ï¼Œç²¾ç¡®çš„å®šä½åˆ°å¤„é”™åœ¨å“ªä¸€è¡Œã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">&quot;å‡ºé”™å•¦&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="4é€šè¿‡å‡½æ•°å°†é”™è¯¯è¿”å›"><a class="markdownIt-Anchor" href="#4é€šè¿‡å‡½æ•°å°†é”™è¯¯è¿”å›"></a> 4.é€šè¿‡å‡½æ•°å°†é”™è¯¯è¿”å›</h2>
<p>â€‹	å°†å‡½æ•°çš„è¿”å›å€¼è®¾ç½®ä¸ºä¸€ä¸ªResultæšä¸¾ç±»å‹ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">use</span> std::io;<br><span class="hljs-keyword">use</span> std::io::Read;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">read_text</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>));<br>    <span class="hljs-keyword">match</span> s &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(res) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, res),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, e),<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_text</span>(path: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(path);<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">f</span> = <span class="hljs-keyword">match</span> f &#123; <span class="hljs-comment">//fileå¿…é¡»æ˜¯å¯å˜çš„ï¼Œå› ä¸ºä¼šæ‰§è¡Œè¯»è¿™ä¸ªæ“ä½œã€‚</span><br>        <span class="hljs-title function_ invoke__">Ok</span>(f) =&gt; f,<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(e) <span class="hljs-comment">//ç›´æ¥ä½œä¸ºå‡½æ•°è¿”å›å€¼</span><br>    &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">match</span> f.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> s) &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(_) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(s),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-title function_ invoke__">Err</span>(e),<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="5è¯­æ³•ç³–"><a class="markdownIt-Anchor" href="#5è¯­æ³•ç³–"></a> 5.è¯­æ³•ç³–ï¼š&quot;?&quot;</h2>
<p>â€‹	?ï¼šæ‰§è¡Œä¸€ä¸ªæ“ä½œ</p>
<ul>
<li>å¦‚æœæ˜¯Okçš„è¯ï¼Œå°±æŠŠOké‡Œçš„å€¼ä½œä¸ºç»“æœç»‘å®šåˆ°å˜é‡ã€‚</li>
<li>å¦‚æœæ˜¯Errçš„è¯ï¼Œå°±ç›´æ¥è¿”å›é”™è¯¯ï¼ˆæ³¨æ„mainå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥å¦‚æœè¦ä½¿ç”¨&quot;?&quot;çš„è¯ï¼Œéœ€è¦åŠ ä¸œè¥¿ï¼‰ã€‚</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">use</span> std::io;<br><span class="hljs-keyword">use</span> std::io::Read;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">read_text</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>));<br>    <span class="hljs-keyword">match</span> s &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(res) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, res),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, e),<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_text</span>(path: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(path)?;<br>    <span class="hljs-comment">// let mut f = match f &#123; //fileå¿…é¡»æ˜¯å¯å˜çš„ï¼Œå› ä¸ºä¼šæ‰§è¡Œè¯»è¿™ä¸ªæ“ä½œã€‚</span><br>    <span class="hljs-comment">//     Ok(f) =&gt; f,</span><br>    <span class="hljs-comment">//     Err(e) =&gt; return Err(e) //ç›´æ¥ä½œä¸ºå‡½æ•°è¿”å›å€¼</span><br>    <span class="hljs-comment">// &#125;;</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">new</span>();<br>    f.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> s)?;<br>    <span class="hljs-comment">// match f.read_to_string(&amp;mut s) &#123;</span><br>    <span class="hljs-comment">//     Ok(_) =&gt; Ok(s),</span><br>    <span class="hljs-comment">//     Err(e) =&gt; Err(e),</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-title function_ invoke__">Ok</span>(s)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	åˆ æ‰æ³¨é‡Šåæ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">use</span> std::io;<br><span class="hljs-keyword">use</span> std::io::Read;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">read_text</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>));<br>    <span class="hljs-keyword">match</span> s &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(res) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, res),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, e),<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_text</span>(path: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(path)?;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">new</span>();<br>    f.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> s)?;<br>    <span class="hljs-title function_ invoke__">Ok</span>(s)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	éå¸¸ç²¾ç®€ã€‚</p>
<p>â€‹	ç„¶åå†è¿›è¡Œé“¾å¼è°ƒç”¨ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::fs::File;<br><span class="hljs-keyword">use</span> std::io;<br><span class="hljs-keyword">use</span> std::io::Read;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = <span class="hljs-title function_ invoke__">read_text</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>));<br>    <span class="hljs-keyword">match</span> s &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(res) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, res),<br>        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, e),<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_text</span>(path: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">new</span>();<br>    File::<span class="hljs-title function_ invoke__">open</span>(path)?.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> s)?;<br>    <span class="hljs-title function_ invoke__">Ok</span>(s)<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="6mainå‡½æ•°ä¸­å¦‚ä½•ä½¿ç”¨è¿ç®—ç¬¦"><a class="markdownIt-Anchor" href="#6mainå‡½æ•°ä¸­å¦‚ä½•ä½¿ç”¨è¿ç®—ç¬¦"></a> 6.mainå‡½æ•°ä¸­å¦‚ä½•ä½¿ç”¨&quot;?&quot;è¿ç®—ç¬¦</h2>
<p>â€‹	mainçš„è¿”å›ç±»å‹æ˜¯()ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ä¸ºResultï¼ŒTå¯¹åº”çš„æ˜¯()ï¼ŒEå¯¹åº”çš„æ˜¯ä»»æ„å¯èƒ½çš„é”™è¯¯ç±»å‹ï¼ˆå…¶å®æ˜¯ä¸€ä¸ªtraitå¯¹è±¡7.ï¼‰ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::error::Error;<br><span class="hljs-keyword">use</span> std::fs::File;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Error&gt;&gt; &#123;<br>    File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">&quot;xxx.txt&quot;</span>)?;<br>    <span class="hljs-title function_ invoke__">Ok</span>(())<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="7ä½•æ—¶ä½¿ç”¨panic"><a class="markdownIt-Anchor" href="#7ä½•æ—¶ä½¿ç”¨panic"></a> 7.ä½•æ—¶ä½¿ç”¨panic!</h2>
<p>â€‹	æ€»ä½“åŸåˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>å°½é‡ä½¿ç”¨Resultï¼å°†é”™è¯¯è¿”å›åˆ°ä»£ç çš„è°ƒç”¨è€…ï¼Œè®©ä»–ä»¬å†³å®šå¦‚ä½•å»å¤„ç†ï¼Œå¦‚æœæˆ‘ä»¬è§‰å¾—è¿™ä¸ªé”™è¯¯é™¤äº†panic!ï¼Œæ²¡æœ‰å…¶å®ƒçš„è§£å†³åŠæ³•ï¼Œå°±ç›´æ¥ä½¿ç”¨panic!å§</li>
</ul>
<h1 id="10æ³›å‹traitç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#10æ³›å‹traitç”Ÿå‘½å‘¨æœŸ"></a> 10.æ³›å‹ï¼Œtraitï¼Œç”Ÿå‘½å‘¨æœŸ</h1>
<h2 id="1æ³›å‹"><a class="markdownIt-Anchor" href="#1æ³›å‹"></a> 1.æ³›å‹</h2>
<p>â€‹	Rustå¯¹ç±»å‹çš„å‘½åé‡‡ç”¨çš„æ˜¯é©¼å³°å‘½åè€Œéè›‡å½¢å‘½åã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">DogAnimal</span> &#123;<span class="hljs-comment">//...&#125;</span><br></code></pre></td></tr></table></figure>
<p>â€‹	æ³›å‹çš„å£°æ˜</p>
<ul>
<li>ç»“æ„</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Good</span>&lt;X, Y&gt; &#123;<br>    name: X,<br>    msg: Y,<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>å‡½æ•°</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">hhh</span>&lt;X&gt;() &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>æšä¸¾ï¼ˆOption<T> å’Œ Result&lt;T, E&gt;ï¼‰</T></li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Option</span>&lt;T&gt; &#123;<br>    <span class="hljs-title function_ invoke__">Some</span>(T),<br>    <span class="hljs-literal">None</span>,<br>&#125;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Result</span>&lt;T, E&gt; &#123;<br>    <span class="hljs-title function_ invoke__">Ok</span>(T),<br>    <span class="hljs-title function_ invoke__">Err</span>(E),<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•</li>
</ul>
<p>â€‹	æ³¨ï¼šé’ˆå¯¹å…·ä½“çš„æ–¹æ³•ï¼Œimplåä¸éœ€è¦æ¥æ”¶æ³›å‹ã€‚å¦‚æœæ˜¯æ³›å‹æ–¹æ³•ï¼Œé‚£ä¹ˆå°±éœ€è¦</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Good</span>&lt;X, Y&gt; &#123;<br>    name: X,<br>    msg: Y,<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;X, Y&gt; Good&lt;X, Y&gt; &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(name: X, msg: Y) <span class="hljs-punctuation">-&gt;</span> Good&lt;X, Y&gt;&#123;<br>        Good&#123;<br>            name,<br>            msg,<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Good</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt; &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">speak</span>(<span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125; &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.name, <span class="hljs-keyword">self</span>.msg);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ä½¿ç”¨æ³›å‹å¹¶ä¸ä¼šå½±å“æ€§èƒ½ã€‚å› ä¸ºRustä½¿ç”¨äº†***å•æ€åŒ–***ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘çš„æ—¶å€™ä¼šå°†å…·ä½“çš„ç±»å‹å¸¦å…¥åˆ°æ³›å‹å‚æ•°é‡Œå»ï¼Œä»è€Œåœ¨è¿è¡Œæ—¶ä¸éœ€è¦é¢å¤–çš„å¼€é”€ã€‚</p>
<h2 id="2trait"><a class="markdownIt-Anchor" href="#2trait"></a> 2.trait</h2>
<ul>
<li>ç±»ä¼¼äºæ¥å£ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨å“ªäº›ç±»å‹å¯ä»¥å…·æœ‰ç›¸åŒçš„åŠŸèƒ½ã€‚</li>
<li>è¿˜æœ‰ä¸€ä¸ªtrait boundçš„ç‰¹æ€§ï¼šè¦æ±‚ä¼ è¿›æ¥çš„æ³›å‹å‚æ•°å¿…é¡»å®ç°äº†å¯¹åº”çš„trait</li>
</ul>
<p>â€‹	traitçš„äº§ç”Ÿå’Œæ¥å£æ˜¯ç±»ä¼¼çš„ï¼Œæœ‰äº›ä¸åŒçš„ç±»å‹ä¼šå®ç°ç›¸åŒçš„æ–¹æ³•ã€‚æ‰€ä»¥æˆ‘ä»¬å°±æŠŠè¿™äº›æ–¹æ³•æå–å‡ºæ¥ï¼Œå®ç°ä¸€ä¸ªtraitã€‚</p>
<h3 id="1å®šä¹‰"><a class="markdownIt-Anchor" href="#1å®šä¹‰"></a> 1.å®šä¹‰</h3>
<p>â€‹	å¦‚ä¸‹ï¼Œåªæœ‰æ–¹æ³•ç­¾åï¼Œæ— å…·ä½“å®ç°ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">Behavior</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">eat</span>(<span class="hljs-keyword">self</span>);<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_money</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="2å®ç°"><a class="markdownIt-Anchor" href="#2å®ç°"></a> 2.å®ç°</h3>
<p>my_lib.rs</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> my_struct &#123;<br>    <span class="hljs-keyword">use</span> crate::my_trait::Text;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Man</span> &#123;<br>        <span class="hljs-keyword">pub</span> name: <span class="hljs-type">String</span>,<br>        <span class="hljs-keyword">pub</span> age: <span class="hljs-type">i8</span>,<br>        <span class="hljs-keyword">pub</span> money: <span class="hljs-type">i32</span>,<br>    &#125;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Boy</span> &#123;<br>        <span class="hljs-keyword">pub</span> name: <span class="hljs-type">String</span>,<br>        <span class="hljs-keyword">pub</span> age: <span class="hljs-type">i8</span>,<br>    &#125;<br><br>    <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Text</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Man</span> &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">write</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>            <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;name is &#123;&#125;, age is &#123;&#125;, get money &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.name, <span class="hljs-keyword">self</span>.age, <span class="hljs-keyword">self</span>.money)<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Text</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Boy</span> &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">write</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>            <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;i am &#123;&#125;, age is &#123;&#125;&quot;</span>, <span class="hljs-keyword">self</span>.name, <span class="hljs-keyword">self</span>.age)<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> my_trait &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">Text</span> &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">write</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://main.rs">main.rs</a></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> fanxingggggg::my_struct::&#123;<br>    Man,<br>    Boy,<br>&#125;;<br><span class="hljs-keyword">use</span> fanxingggggg::my_trait::Text;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">m</span> = Man &#123;<br>        name: String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;father&quot;</span>),<br>        age: <span class="hljs-number">40</span>,<br>        money: <span class="hljs-number">100</span>,<br>    &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">b</span> = Boy &#123;<br>        name: String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;boy&quot;</span>),<br>        age: <span class="hljs-number">18</span>,<br>    &#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, m.<span class="hljs-title function_ invoke__">write</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, b.<span class="hljs-title function_ invoke__">write</span>());<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	traitä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å®ç°ï¼Œä¹Ÿå°±æ˜¯åœ¨traitçš„å®šä¹‰æ—¶å°±å®ç°traitã€‚å¦‚æœç»“æ„å¯¹traitçš„é»˜è®¤å®ç°è¿›è¡Œäº†é‡å†™çš„è¯ï¼Œå°±ä¸èƒ½å†è°ƒç”¨é»˜è®¤å®ç°äº†ã€‚</p>
<h3 id="3å°†traitä½œä¸ºå‚æ•°"><a class="markdownIt-Anchor" href="#3å°†traitä½œä¸ºå‚æ•°"></a> 3.å°†traitä½œä¸ºå‚æ•°</h3>
<ul>
<li>å‚æ•°ç±»å‹ä¸ºiml trait</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> my_struct &#123;<br>    <span class="hljs-keyword">use</span> crate::my_trait::Text;<br>    <span class="hljs-keyword">use</span> std::fmt::Display;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fun1</span>(object: <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Text</span> + Display) &#123;<br>        <br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> my_trait &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">Text</span> &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">write</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨trait bound</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> my_struct &#123;<br>    <span class="hljs-keyword">use</span> std::fmt::Display;<br>    <span class="hljs-keyword">use</span> crate::my_trait::Text;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fun</span>&lt;T: Text + Display&gt;(o: T) &#123;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> my_trait &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">Text</span> &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">write</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>åœ¨è¿”å›ç±»å‹åä½¿ç”¨where</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> my_struct &#123;<br>    <span class="hljs-keyword">use</span> std::fmt::Display;<br>    <span class="hljs-keyword">use</span> crate::my_trait::Text;<br><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fun</span>&lt;T&gt;(o: T) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span><br>    <span class="hljs-keyword">where</span> T: Text + <span class="hljs-built_in">Clone</span> + Display,<br>    &#123;<br>        String::<span class="hljs-title function_ invoke__">new</span>()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> my_trait &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">Text</span> &#123;<br>        <span class="hljs-keyword">fn</span> <span class="hljs-title function_">write</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="3ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#3ç”Ÿå‘½å‘¨æœŸ"></a> 3.ç”Ÿå‘½å‘¨æœŸ</h2>
<p>â€‹	å®šä¹‰ï¼šè®©å¼•ç”¨ä¿æŒæœ‰æ•ˆçš„ä½œç”¨åŸŸã€‚</p>
<p>â€‹	Rustæœ‰ä¸€ä¸ªä¸œè¥¿å«åšå€Ÿç”¨æ£€æŸ¥å™¨ã€‚ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™æ¯”è¾ƒä¸¤ä¸ªå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸçš„é•¿çŸ­ã€‚</p>
<h3 id="1ç®€å•ä½¿ç”¨"><a class="markdownIt-Anchor" href="#1ç®€å•ä½¿ç”¨"></a> 1.ç®€å•ä½¿ç”¨</h3>
<p>â€‹	å½“ä½ å†™äº†ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‘é‡Œé¢ä¼ äº†å¤šä¸ªå¼•ç”¨ï¼Œç„¶åå¯¹å…¶è¿›è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œæœ€åè¿”å›ä¸€ä¸ªå¼•ç”¨æ—¶ã€‚éœ€è¦ç”¨åˆ°ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>â€‹	å› ä¸ºç¼–è¯‘å™¨éœ€è¦ç¡®ä¿ä¼ è¿›æ¥çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸ä¼ å‡ºå»çš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·ï¼Œæˆ–è€…è¯´å¤§äºã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = <span class="hljs-string">&quot;hello world!&quot;</span>; <span class="hljs-comment">//5</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;sss&quot;</span>); <span class="hljs-comment">//3</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = <span class="hljs-title function_ invoke__">get_longer</span>(&amp;s1, &amp;s2);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, &amp;res);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_longer</span>&lt;<span class="hljs-symbol">&#x27;a</span>&gt;(s1: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>, s2: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span> &#123;<br>    <span class="hljs-keyword">if</span> s1.<span class="hljs-title function_ invoke__">len</span>() &gt; s2.<span class="hljs-title function_ invoke__">len</span>() &#123;<br>        s1<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        s2<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ç›®çš„æ£€æŸ¥éæ³•è°ƒç”¨ã€‚</p>
<p>â€‹	å®é™…è¿”å›ç»“æœçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸¤ä¸ªå‚æ•°ä¸­ç”Ÿå‘½å‘¨æœŸè¾ƒå°çš„é‚£ä¸€ä¸ªã€‚</p>
<p>â€‹	æˆ‘ä»¬çœ‹ä¸‹é¢è¿™ä¸ªé”™è¯¯è°ƒç”¨ã€‚</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220119202214447.png" alt="image-20220119202214447"></p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220119202225682.png" alt="image-20220119202225682"></p>
<p>â€‹	é€šè¿‡å‡½æ•°ï¼Œresçš„ç”Ÿå‘½è¿™äº›å‘¨æœŸè¢«ç¼©çŸ­åˆ°å’Œs2ä¸€æ ·äº†ã€‚è¿™æ ·åœ¨å¤–éƒ¨ç»§ç»­è°ƒç”¨çš„è¯ï¼Œå°±ä¼šå‘ç”Ÿé”™è¯¯ã€‚</p>
<p>â€‹	å†è¯•è¯•Javaé‡Œçš„æ•ˆæœã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.reptile;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestD</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;s&quot;</span>;<br>        String res;<br>        &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;sss&quot;</span>;<br>            res = s2;<br>        &#125;<br>        System.out.println(res);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	resçš„å€¼å’Œs2æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ„å‘³ç€s2å¹¶æ²¡æœ‰è¢«GCå›æ”¶æ‰ã€‚</p>
<h3 id="2å‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#2å‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸ"></a> 2.å‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p>â€‹	å‡½æ•°çš„è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸè·Ÿè¾“å…¥çš„å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸæœ‰å…³ã€‚</p>
<p>â€‹	å¦‚æœè¦è¿”å›ä¸€ä¸ªå¼•ç”¨ï¼Œéœ€è¦ç¡®ä¿è¿™ä¸ªå¼•ç”¨ä¸ä¼šè¢«å›æ”¶ï¼ˆå³ä¸æ˜¯æœ¬åœ°å˜é‡ï¼‰ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">fun</span>&lt;<span class="hljs-symbol">&#x27;a</span>&gt;(s1: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>, s2: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span> &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    &amp;s <span class="hljs-comment">//æŠ¥é”™ï¼Œreturns a reference to data owned by the current function</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	è¿”å›çš„å¼•ç”¨æŒ‡å‘çš„å †å·²ç»è¢«dropæ‰äº†ï¼Œæ‰€ä»¥ä¸è¡Œã€‚è¿™ä¸ªå¼•ç”¨å«æ‚¬å‚æŒ‡é’ˆã€‚åœ¨Rusté‡Œï¼Œåªè¦æä¾›äº†è¶³å¤Ÿçš„ä¿¡æ¯ï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰ï¼Œå°±ä¸ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚</p>
<p>â€‹	å¦‚æœæƒ³è¦ä½¿ç”¨åœ¨å‡½æ•°é‡Œçš„å˜é‡ï¼Œå»ºè®®è¿”å›ä¸€ä¸ªStringï¼Œç§»äº¤æ‰€æœ‰æƒï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªå¼•ç”¨ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(arg: &amp;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Config, <span class="hljs-type">String</span>&gt; &#123;<br>    <span class="hljs-keyword">if</span> arg.<span class="hljs-title function_ invoke__">len</span>() != <span class="hljs-number">3</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;arguments counts not good, find &#123;&#125;, need 2&quot;</span>, arg.<span class="hljs-title function_ invoke__">len</span>() - <span class="hljs-number">1</span>));<br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span> = &amp;arg[<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">p2</span> = &amp;arg[<span class="hljs-number">2</span>];<br>    <span class="hljs-title function_ invoke__">Ok</span>(<br>        Config &#123;<br>            query: p1,<br>            file_path: p2,<br>        &#125;<br>    )<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="3structçš„ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#3structçš„ç”Ÿå‘½å‘¨æœŸ"></a> 3.structçš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p>â€‹	ä¸å‡½æ•°ç±»ä¼¼ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Man</span>&lt;<span class="hljs-symbol">&#x27;a</span>&gt; &#123;<br>    name: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>,<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	è¿™é‡Œç”Ÿå‘½å‘¨æœŸçš„æ„æ€æ˜¯ï¼šå­—æ®µå­˜æ´»çš„æ—¶é—´å¿…é¡»æ¯”ç»“æ„ä¹…ï¼Œä¸ç„¶çš„è¯å­—æ®µå…ˆè¢«å›æ”¶äº†ï¼Œç»“æ„è¿˜åœ¨ï¼Œå°±ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚</p>
<p>â€‹	å³ç»‘å®šç»™nameçš„æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸçš„å­˜æ´»æ—¶é—´å¿…é¡»è¦è¦†ç›–è¿™ä¸ªç»“æ„çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h3 id="4ç”Ÿå‘½å‘¨æœŸçœç•¥çš„è§„åˆ™"><a class="markdownIt-Anchor" href="#4ç”Ÿå‘½å‘¨æœŸçœç•¥çš„è§„åˆ™"></a> 4.ç”Ÿå‘½å‘¨æœŸçœç•¥çš„è§„åˆ™</h3>
<ul>
<li>æ¯ä¸ªå¼•ç”¨ç±»å‹çš„å‚æ•°éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‚æ•°å°†è¢«èµ‹ç»™è¾“å‡ºç”Ÿå‘½å‘¨æœŸå‚æ•°</li>
<li>å¦‚æœæœ‰å¤šä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œä½†æ˜¯å…¶ä¸­ä¹‹ä¸€æ˜¯<code>&amp;self or &amp;mut self</code>ï¼Œé‚£ä¹ˆselfçš„ç”Ÿå‘½å‘¨æœŸå°†è¢«èµ‹ç»™è¾“å‡ºç”Ÿå‘½å‘¨æœŸå‚æ•°ã€‚</li>
</ul>
<h3 id="5é™æ€ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#5é™æ€ç”Ÿå‘½å‘¨æœŸ"></a> 5.é™æ€ç”Ÿå‘½å‘¨æœŸ</h3>
<p>â€‹	é™æ€ç”Ÿå‘½å‘¨æœŸç”¨`staticï¼Œè¡¨ç¤ºï¼Œæ„æ€æ˜¯æ¯”é‚£è¾†çš„å­˜æ´»æ—¶é—´å’Œç¨‹åºçš„å­˜æ´»æ—¶é—´æ˜¯ä¸€è‡´çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±æŠŠè¿™ä¸€éƒ¨åˆ†ä½œä¸ºäºŒè¿›åˆ¶å€¼å†™è¿›å»äº†ã€‚</p>
<p>â€‹	åªæœ‰å®ç°äº†copy traitçš„å˜é‡æ‰å¯ä»¥å£°æ˜static</p>
<h1 id="11æµ‹è¯•"><a class="markdownIt-Anchor" href="#11æµ‹è¯•"></a> 11.æµ‹è¯•</h1>
<p>â€‹	æµ‹è¯•ä¸‰ä¸ªæ­¥éª¤ï¼Œ3A</p>
<ul>
<li><em><strong>å‡†å¤‡æ•°æ®</strong></em></li>
<li><em><strong>è¿è¡Œæµ‹è¯•ä»£ç </strong></em></li>
<li><em><strong>æ–­è¨€ç»“æœ</strong></em></li>
</ul>
<h2 id="1ç¼–å†™æµ‹è¯•"><a class="markdownIt-Anchor" href="#1ç¼–å†™æµ‹è¯•"></a> 1.ç¼–å†™æµ‹è¯•</h2>
<p>â€‹	åœ¨å‡½æ•°çš„ä¸Šæ–¹åŠ ä¸Š å±æ€§ï¼ˆaattributeï¼‰<code>#[test]</code></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[test]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">fun</span>() &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2è¿è¡Œæµ‹è¯•"><a class="markdownIt-Anchor" href="#2è¿è¡Œæµ‹è¯•"></a> 2.è¿è¡Œæµ‹è¯•</h2>
<p>â€‹	ä½¿ç”¨cargo testå‘½ä»¤</p>
<h2 id="3æ–­è¨€çš„ä½œç”¨"><a class="markdownIt-Anchor" href="#3æ–­è¨€çš„ä½œç”¨"></a> 3.æ–­è¨€çš„ä½œç”¨</h2>
<h3 id="1assert"><a class="markdownIt-Anchor" href="#1assert"></a> 1.assert!</h3>
<p>â€‹	æ–­å®šæ­¤å¤„ä¸ºtrueï¼</p>
<p>â€‹	å¯ä»¥æ¥æ”¶ä¸€ä¸ªboolç±»å‹ï¼Œtrueé€šè¿‡ï¼Œfalseåˆ™panic</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta">#[test]</span><br><span class="hljs-function">fn <span class="hljs-title">ppp</span>()</span> &#123;<br>    <span class="hljs-keyword">let</span> f = <span class="hljs-literal">false</span>;<br>    assert!(f);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="2assert_eq"><a class="markdownIt-Anchor" href="#2assert_eq"></a> 2.assert_eq!</h3>
<p>â€‹	æ–­å®šä¸¤ä¸ªåŒç±»å‹çš„å˜é‡ç›¸ç­‰ï¼</p>
<p>â€‹	æ¯”å¦‚ä¸‹é¢çš„assert_eq!ï¼Œå°±æ˜¯è¡¨æ˜æ‹¬å·é‡Œé¢ä¼ å…¥çš„å‚æ•°è‚¯å®šç›¸ç­‰ï¼Œä¸ç„¶å°±ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">it_works</span>() &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-number">2</span> + <span class="hljs-number">2</span>;<br>        <span class="hljs-built_in">assert_eq!</span>(result, <span class="hljs-number">4</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	è¿˜å¯ä»¥æ¥æ”¶å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[test]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">it_works</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(result, String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>));<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="3assert_ne"><a class="markdownIt-Anchor" href="#3assert_ne"></a> 3.assert_ne!</h3>
<p>â€‹	ä¸assert eqç›¸åï¼Œneçš„æ„æ€æ˜¯not eq</p>
<h3 id="4ç»™æ–­è¨€æ·»åŠ è‡ªå®šä¹‰æ¶ˆæ¯"><a class="markdownIt-Anchor" href="#4ç»™æ–­è¨€æ·»åŠ è‡ªå®šä¹‰æ¶ˆæ¯"></a> 4.ç»™æ–­è¨€æ·»åŠ è‡ªå®šä¹‰æ¶ˆæ¯</h3>
<p>â€‹		å…¶å®assertå®è¿˜æœ‰å¦å¤–ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥ä¼ é€’å­—ç¬¦ä¸²ï¼Œè€Œäº‹å®ä¸Šè¿™ä¸ªå­—ç¬¦ä¸²æœ€ç»ˆä¼šä¼ é€’ç»™formatå®ã€‚æ‰€ä»¥è¿™ä¸ªå­—ç¬¦ä¸²é‡Œé¢å¯ä»¥æ·»åŠ å ä½ç¬¦{}ï¼Œå¹¶ä¸”åé¢å¯ä»¥å¸¦å‚æ•°ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[test]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">it_works</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i1</span> = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i2</span> = <span class="hljs-number">12</span>;<br>    <span class="hljs-built_in">assert_eq!</span>(i1, i2, <span class="hljs-string">&quot;&#123;&#125; is not eq &#123;&#125;&quot;</span>, i1, i2);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="4å±æ€§should_panic"><a class="markdownIt-Anchor" href="#4å±æ€§should_panic"></a> 4.å±æ€§should_panic</h2>
<p>â€‹	åœ¨æµ‹è¯•ä¸‹é¢ï¼Œå‡½æ•°ä¸Šé¢å†æ·»åŠ ä¸€æ¡å±æ€§ï¼ˆattributeï¼‰ï¼Œå«<code>#[should_panic]</code></p>
<p>â€‹	è¡¨ç¤ºä¸‹é¢çš„æµ‹è¯•å‡½æ•°åº”è¯¥ææ…Œï¼Œä¸ææ…Œæµ‹è¯•å°±ä¸ä¼šé€šè¿‡ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[test]</span><br><span class="hljs-meta">#[should_panic]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">ggg</span>() &#123;<br>    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;hello should_panic&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	å¯ä»¥é€šè¿‡åœ¨should_panic(expected = â€œâ€)æ·»åŠ å‚æ•°ï¼Œè®©æµ‹è¯•æ›´åŠ ç²¾ç¡®ä¸€ç‚¹ã€‚å¦‚æ·»åŠ äº†å­—ç¬¦ä¸²å‚æ•°ï¼Œç„¶åå¦‚æœææ…Œä¿¡æ¯é‡ŒåŒ…å«äº†è¿™ä¸ªexpectedå‚æ•°ï¼Œé‚£ä¹ˆå°±æµ‹è¯•é€šè¿‡ï¼›åä¹‹ï¼Œå¦‚æœä¸åŒ…å«ï¼Œé‚£ä¹ˆæµ‹è¯•å¤±è´¥ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[test]</span><br><span class="hljs-meta">#[should_panic(expected = <span class="hljs-string">&quot;hello&quot;</span>)]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">ggg</span>() &#123;<br>    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">&quot;hello should_panic&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="5ä½¿ç”¨resultæšä¸¾æ¥è¿›è¡Œæµ‹è¯•"><a class="markdownIt-Anchor" href="#5ä½¿ç”¨resultæšä¸¾æ¥è¿›è¡Œæµ‹è¯•"></a> 5.ä½¿ç”¨Resultæšä¸¾æ¥è¿›è¡Œæµ‹è¯•</h2>
<p>â€‹	æ— éœ€panicã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[test]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">ggg</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">String</span>&gt; &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-number">1</span> == <span class="hljs-number">1</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Ok</span>(())<br>    &#125;<br>    <span class="hljs-title function_ invoke__">Err</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;not eq&quot;</span>))<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="12å‘½ä»¤è¡Œé¡¹ç›®"><a class="markdownIt-Anchor" href="#12å‘½ä»¤è¡Œé¡¹ç›®"></a> 12.å‘½ä»¤è¡Œé¡¹ç›®</h1>
<p>â€‹	å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼šé€šè¿‡å‘½ä»¤è¡Œï¼Œå‘ç¨‹åºä¸­è¾“å…¥å‚æ•°ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ˜¯æ–‡ä»¶ç»å¯¹è·¯å¾„ã€‚ç„¶åæ‰¾åˆ°è¿™ä¸ªç»å¯¹è·¯å¾„ä¸­è·Ÿå­—ç¬¦ä¸²å†…å®¹åŒ¹é…çš„éƒ¨åˆ†ï¼Œå¹¶ä¸”æ‰“å°å‡ºæ¥ã€‚</p>
<h2 id="1æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°"><a class="markdownIt-Anchor" href="#1æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°"></a> 1.æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°</h2>
<p>â€‹	ä½¿ç”¨std::envä¸‹çš„argsæ¥æ”¶å‚æ•°ï¼Œå¹¶è°ƒç”¨collectæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªVec</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; = env::<span class="hljs-title function_ invoke__">args</span>().<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-comment">// let p1 = &amp;v[0];</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, v);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2è¯»å–æ–‡ä»¶å†…å®¹"><a class="markdownIt-Anchor" href="#2è¯»å–æ–‡ä»¶å†…å®¹"></a> 2.è¯»å–æ–‡ä»¶å†…å®¹</h2>
<p>â€‹	ä½¿ç”¨std::fsä¸‹çš„read _to_string æ¥è¯»å–ï¼Œä¼šè¿”å›ä¸€ä¸ªresultï¼Œæ‰€ä»¥æˆ‘ä»¬è°ƒç”¨exceptæ¥å¤„ç†ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::env;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">target: python</span><br><span class="hljs-comment">path: C:\Users\User\Desktop\Typoraå¿«æ·é”®.txt</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; = env::<span class="hljs-title function_ invoke__">args</span>().<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">target</span> = &amp;v[<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">path</span> = &amp;v[<span class="hljs-number">2</span>];<br><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">content</span> = std::fs::<span class="hljs-title function_ invoke__">read_to_string</span>(path).<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">&quot;read error&quot;</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, content);<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h2 id="3ä»£ç é‡æ„"><a class="markdownIt-Anchor" href="#3ä»£ç é‡æ„"></a> 3.ä»£ç é‡æ„</h2>
<p>â€‹	éµå¾ªä¸€ä¸ªå‡½æ•°ä¸€ä¸ªåŠŸèƒ½çš„åŸåˆ™ï¼Œmainå‡½æ•°ç°åœ¨å¤ªè‡ƒè‚¿äº†ã€‚</p>
<p>â€‹	<a target="_blank" rel="noopener" href="http://xn--main-fw9gr66ant3f.xn--rsmain-cj3jt37h0lb.xn--rslib-sn9h.rs">é€‰æ‹©å°†main.rsæ‹†åˆ†æˆmain.rså’Œlib.rs</a>ï¼Œå°†ä¸šåŠ¡é€»è¾‘çš„å®ç°æ”¾åœ¨liblé‡Œã€‚</p>
<p>â€‹	å…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>åœ¨main.rsé‡Œç¼–å†™å…¨éƒ¨åŠŸèƒ½ï¼Œå¯ä»¥å¿½ç•¥é‡æ„ï¼Œå¿½ç•¥é”™è¯¯å¤„ç†ï¼Œåªè€ƒè™‘ç†æƒ³æƒ…å†µã€‚</li>
<li>å°†å®ç°åŠŸèƒ½çš„ä¸šåŠ¡é€»è¾‘æŠ½å–å‡ºæ¥ï¼Œç‹¬ç«‹æˆå•ä¸ªçš„å‡½æ•°ã€‚</li>
<li>åœ¨å‡½æ•°ä¸­è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªResultè®©mainå»å¤„ç†ã€‚</li>
<li>æœ€åå°†æŠ½å–å‡ºæ¥çš„å‡½æ•°ç§»åŠ¨åˆ°libé‡Œå»</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::&#123;env, fs, process&#125;;<br><span class="hljs-keyword">use</span> std::error::Error;<br><span class="hljs-keyword">use</span> cmdddddd::&#123;Config, run&#125;;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">target: python</span><br><span class="hljs-comment">path: C:\Users\User\Desktop\Typoraå¿«æ·é”®.txt</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; = env::<span class="hljs-title function_ invoke__">args</span>().<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">config</span> = Config::<span class="hljs-title function_ invoke__">new</span>(&amp;v).<span class="hljs-title function_ invoke__">unwrap_or_else</span>(|error_msg| &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;problem happened: &#123;&#125;&quot;</span>, error_msg);<br>        process::<span class="hljs-title function_ invoke__">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;);<br>    <span class="hljs-keyword">match</span> <span class="hljs-title function_ invoke__">run</span>(&amp;config) &#123;<br>        <span class="hljs-title function_ invoke__">Ok</span>(()) =&gt; (),<br>        <span class="hljs-title function_ invoke__">Err</span>(err) =&gt; &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;got some problemï¼› &#123;:#?&#125;&quot;</span>, err);<br>            process::<span class="hljs-title function_ invoke__">exit</span>(<span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::error::Error;<br><span class="hljs-keyword">use</span> std::fs;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">run</span>(config: &amp;Config) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Error&gt;&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">query</span> = config.<span class="hljs-title function_ invoke__">query</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">path</span> = config.<span class="hljs-title function_ invoke__">file_path</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">content</span> = fs::<span class="hljs-title function_ invoke__">read_to_string</span>(path)?;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>,content);<br>    <span class="hljs-title function_ invoke__">Ok</span>(())<br>&#125;<br><br><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Config</span>&lt;<span class="hljs-symbol">&#x27;a</span>&gt; &#123;<br>    query: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>,<br>    file_path: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;<span class="hljs-symbol">&#x27;a</span>&gt; Config&lt;<span class="hljs-symbol">&#x27;a</span>&gt; &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(arg: &amp;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Config, <span class="hljs-type">String</span>&gt; &#123;<br>        <span class="hljs-keyword">if</span> arg.<span class="hljs-title function_ invoke__">len</span>() != <span class="hljs-number">3</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;arguments counts not good, find &#123;&#125;, need 2&quot;</span>, arg.<span class="hljs-title function_ invoke__">len</span>() - <span class="hljs-number">1</span>));<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span> = &amp;arg[<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">p2</span> = &amp;arg[<span class="hljs-number">2</span>];<br>        <span class="hljs-title function_ invoke__">Ok</span>(<br>            Config &#123;<br>                query: p1,<br>                file_path: p2,<br>            &#125;<br>        )<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">query</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span> &#123;<br>        <span class="hljs-keyword">self</span>.query<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">file_path</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span> &#123;<br>        <span class="hljs-keyword">self</span>.file_path<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="4ä½¿ç”¨tddåœ¨libé‡Œè¿›è¡ŒæŸ¥é”™"><a class="markdownIt-Anchor" href="#4ä½¿ç”¨tddåœ¨libé‡Œè¿›è¡ŒæŸ¥é”™"></a> 4.ä½¿ç”¨TDDåœ¨libé‡Œè¿›è¡ŒæŸ¥é”™</h2>
<p>â€‹	TDDï¼štest driver developmentï¼Œæµ‹è¯•é©±åŠ¨å¼€å‘</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220120223838199.png" alt="image-20220120223838199"></p>
<p>â€‹	æµ‹è¯•éƒ¨åˆ†</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[cfg(test)]</span><br><span class="hljs-keyword">mod</span> tests &#123;<br>    <span class="hljs-keyword">use</span> super::*;<br><br>    <span class="hljs-meta">#[test]</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">to_test</span>() &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">content</span> = <span class="hljs-string">&quot;\n</span><br><span class="hljs-string">hi,\n</span><br><span class="hljs-string">rust-langn</span><br><span class="hljs-string">demo demo dododododod\n</span><br><span class="hljs-string">hello \n</span><br><span class="hljs-string">hhh\n</span><br><span class="hljs-string">s\n</span><br><span class="hljs-string">hhh\n</span><br><span class="hljs-string">hhh hanpi\n</span><br><span class="hljs-string">en\n&quot;</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">query</span> = <span class="hljs-string">&quot;hhh&quot;</span>;<br>        <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-built_in">vec!</span>[<span class="hljs-string">&quot;demo demo dododododod&quot;</span>], <span class="hljs-title function_ invoke__">search</span>(<span class="hljs-string">&quot;demo&quot;</span>, content));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	è¢«æµ‹è¯•çš„å‡½æ•°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">search</span>&lt;<span class="hljs-symbol">&#x27;a</span>&gt;(query: &amp;<span class="hljs-type">str</span>, content: &amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;&amp;<span class="hljs-symbol">&#x27;a</span> <span class="hljs-type">str</span>&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">res</span> = Vec::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">lines</span> = content.<span class="hljs-title function_ invoke__">lines</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">line</span> <span class="hljs-keyword">in</span> lines &#123;<br>        <span class="hljs-keyword">if</span> line.<span class="hljs-title function_ invoke__">contains</span>(query) &#123;<br>            res.<span class="hljs-title function_ invoke__">push</span>(line);<br>        &#125;<br>    &#125;<br>    res<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹		ä»¥åä½¿ç”¨TDDæ¥è¿›è¡Œæµ‹è¯•ã€‚æµ‹è¯•æ ·ä¾‹ä¸åŠŸèƒ½å®ç°åˆ†ç¦»å¼€ã€‚</p>
<h2 id="5ä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œé€‰æ‹©"><a class="markdownIt-Anchor" href="#5ä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œé€‰æ‹©"></a> 5.ä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œé€‰æ‹©</h2>
<p>â€‹	æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>â€‹	ç¨‹åºä¸­ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">flag</span> = std::env::<span class="hljs-title function_ invoke__">var</span>(<span class="hljs-string">&quot;IGNORE_CASE&quot;</span>);<br></code></pre></td></tr></table></figure>
<p>â€‹	å‘½ä»¤è¡Œä¸­ï¼šIGNORE_CASE = 1 cargo run</p>
<p>â€‹	è¿™æ ·å°±å¯ä»¥åœ¨ç¨‹åºä¸­è¯»åˆ°ç¯å¢ƒå˜é‡äº†ã€‚</p>
<h2 id="6è¿›è¡Œé”™è¯¯ä¿¡æ¯å®šå‘è¾“å‡º"><a class="markdownIt-Anchor" href="#6è¿›è¡Œé”™è¯¯ä¿¡æ¯å®šå‘è¾“å‡º"></a> 6.è¿›è¡Œé”™è¯¯ä¿¡æ¯å®šå‘è¾“å‡º</h2>
<p>â€‹	æˆ‘ä»¬å¯ä»¥ä½¿ç”¨cargo run &gt; output.txt è¿è¡Œä½¿å¾—é€šè¿‡println!è¾“å‡ºçš„å†…å®¹å®šå‘åˆ°output.txté‡Œé¢ã€‚</p>
<p>â€‹	ä½†æ˜¯è¿™æ ·é”™è¯¯ä¿¡æ¯ä¹Ÿè¾“å‡ºåˆ°outputé‡Œäº†ã€‚</p>
<p>â€‹	å¯ä»¥ä½¿ç”¨eprintln!ï¼Œå°†é”™è¯¯ä¿¡æ¯å®šå‘åˆ°æ§åˆ¶å°è¾“å‡ºã€‚</p>
<h1 id="13è¿­ä»£å™¨-é—­åŒ…"><a class="markdownIt-Anchor" href="#13è¿­ä»£å™¨-é—­åŒ…"></a> 13.è¿­ä»£å™¨ é—­åŒ…</h1>
<h2 id="1é—­åŒ…"><a class="markdownIt-Anchor" href="#1é—­åŒ…"></a> 1.é—­åŒ…</h2>
<h3 id="1-é—­åŒ…çš„å®šä¹‰"><a class="markdownIt-Anchor" href="#1-é—­åŒ…çš„å®šä¹‰"></a> 1 é—­åŒ…çš„å®šä¹‰</h3>
<p>â€‹	å®šä¹‰ï¼šå¯ä»¥æ•è·å…¶æ‰€åœ¨ç¯å¢ƒçš„åŒ¿åå‡½æ•°ã€‚</p>
<p>â€‹	é—­åŒ…æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä»–æ˜¯å°†ä¸€ä¸ªå‡½æ•°çš„å®šä¹‰å­˜æ”¾åœ¨ä¸€ä¸ªå˜é‡ä¸­å»ï¼Œè€Œä¸æ˜¯å‡½æ•°çš„æ‰§è¡Œç»“æœã€‚è¿™ä¸ªé—­åŒ…åªæœ‰åœ¨é‡åˆ°å‘é‡Œé¢ä¼ è¾“å‚æ•°çš„æ—¶å€™ï¼Œæ‰ä¼šå»æ‰§è¡Œå‡½æ•°ï¼Œå¾—åˆ°è¿”å›ç»“æœã€‚</p>
<p>â€‹	é—­åŒ…å¹¶ä¸éœ€è¦æ˜¾å¼å£°æ˜å®ƒçš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ã€‚å› ä¸ºé—­åŒ…æ˜¯åœ¨å½“å‰ä½œç”¨åŸŸå†…å·¥ä½œçš„ï¼ŒèŒƒå›´ç‹­å°ï¼Œä¸æ˜¯ä½œä¸ºæ¥å£å»è°ƒç”¨çš„ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[test]</span><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">ggg</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">bi_bao</span> = |num| &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;the num is &#123;&#125;&quot;</span>, num);<br>        num<br>    &#125;;<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">3</span>, <span class="hljs-title function_ invoke__">bi_bao</span>(<span class="hljs-number">3</span>)); <span class="hljs-comment">//è°ƒç”¨bi_bao(3)çš„æ—¶å€™æ‰æ˜¯ä¼šçœŸæ­£æ‰§è¡Œé—­åŒ…</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	å°†é—­åŒ…ç»‘å®šç»™å˜é‡åï¼Œå˜é‡çš„ç±»å‹å°±æ˜¯ï¼š<code>variable bi_bao: fn(&lt;unknown&gt;) -&gt; &lt;unknown&gt;</code></p>
<h3 id="2ç”¨ç»“æ„æ¥å­˜å‚¨é—­åŒ…"><a class="markdownIt-Anchor" href="#2ç”¨ç»“æ„æ¥å­˜å‚¨é—­åŒ…"></a> 2ç”¨ç»“æ„æ¥å­˜å‚¨é—­åŒ…</h3>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cashe</span>&lt;T&gt;<br>    <span class="hljs-keyword">where</span> T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>,<br>&#123;<br>    calculation: T,<br>    value: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt;,<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T&gt; Cashe&lt;T&gt;<br>    <span class="hljs-keyword">where</span> T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span><br>&#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(calculation: T) <span class="hljs-punctuation">-&gt;</span> Cashe&lt;T&gt; &#123;<br>        Cashe &#123;<br>            calculation,<br>            value: <span class="hljs-literal">None</span>,<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">value</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, num: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>        <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span>.value &#123;<br>            <span class="hljs-title function_ invoke__">Some</span>(n) =&gt; n,<br>            <span class="hljs-literal">None</span> =&gt; &#123;<br>                <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = (<span class="hljs-keyword">self</span>.calculation)(num);<br>                <span class="hljs-keyword">self</span>.value = <span class="hljs-title function_ invoke__">Some</span>(res);<br>                res<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = Cashe::<span class="hljs-title function_ invoke__">new</span>(|num| num + <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">32</span>));<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">92</span>));<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ä¸Šé¢ç»“æ„ä¸­çš„calculationï¼Œæ˜¯ä¸€ä¸ªæ³›å‹å‚æ•°Tï¼Œå¹¶ä¸”åŠ ä¸Šäº†é™åˆ¶ï¼Œè¦æ±‚è¿™ä¸ªæ³›å‹å‚æ•°æ˜¯å®ç°äº†Fn traitçš„ä¸€ä¸ªé—­åŒ…ã€‚</p>
<p>â€‹	ä½†æ˜¯åªèƒ½å­˜å‚¨ä¸€æ¬¡ã€‚</p>
<p>â€‹	å¯ä»¥ç”¨hashmapæ¥è¿›è¡Œæ”¹è¿›ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::collections::HashMap;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Cashe</span>&lt;T&gt;<br>    <span class="hljs-keyword">where</span> T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span>,<br>&#123;<br>    calculation: T,<br>    value: HashMap&lt;<span class="hljs-type">u32</span>, <span class="hljs-type">u32</span>&gt;,<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T&gt; Cashe&lt;T&gt;<br>    <span class="hljs-keyword">where</span> T: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span><br>&#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(calculation: T) <span class="hljs-punctuation">-&gt;</span> Cashe&lt;T&gt; &#123;<br>        Cashe &#123;<br>            calculation,<br>            value: HashMap::<span class="hljs-title function_ invoke__">new</span>(),<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">value</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, num: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">map</span> = &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>.value;<br>        <span class="hljs-keyword">match</span> map.<span class="hljs-title function_ invoke__">get</span>(&amp;num) &#123;<br>            <span class="hljs-title function_ invoke__">Some</span>(res) =&gt; *res,<br>            <span class="hljs-literal">None</span> =&gt; &#123;<br>                <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span> = (<span class="hljs-keyword">self</span>.calculation)(num);<br>                map.<span class="hljs-title function_ invoke__">insert</span>(num, res);<br>                res<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = Cashe::<span class="hljs-title function_ invoke__">new</span>(|num| num + <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">32</span>));<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s.<span class="hljs-title function_ invoke__">value</span>(<span class="hljs-number">92</span>));<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="3ä½¿ç”¨é—­åŒ…æ•è·å¤–éƒ¨å˜é‡"><a class="markdownIt-Anchor" href="#3ä½¿ç”¨é—­åŒ…æ•è·å¤–éƒ¨å˜é‡"></a> 3.ä½¿ç”¨é—­åŒ…æ•è·å¤–éƒ¨å˜é‡</h3>
<p>â€‹	é—­åŒ…å¯ä»¥æ•è·å’Œä»–å®šä¹‰äºåŒä¸€ä¸ªä½œç”¨åŸŸçš„å˜é‡ã€‚è¿™æ˜¯é—­åŒ…ç‹¬æœ‰çš„åŠŸèƒ½ï¼Œè€Œå‡½æ•°æ˜¯æ²¡æœ‰çš„ã€‚</p>
<p>â€‹	ä½†æ˜¯ä¼šäº§ç”Ÿé¢å¤–çš„å†…å­˜å¼€é”€ã€‚</p>
<h3 id="4é—­åŒ…çš„trait"><a class="markdownIt-Anchor" href="#4é—­åŒ…çš„trait"></a> 4.é—­åŒ…çš„trait</h3>
<ul>
<li>Fn            ä¸å¯å˜å€Ÿç”¨</li>
<li>FnMut    å¯å˜å€Ÿç”¨</li>
<li>FnOnce   å–å¾—æ‰€æœ‰æƒ</li>
</ul>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220121151726938.png" alt="image-20220121151726938"></p>
<p>â€‹	å¯ä»¥ä½¿ç”¨moveå…³é”®å­—å°†é—­åŒ…å¤–çš„æ‰€æœ‰æƒå¼ºè¡Œç§»åŠ¨åˆ°é—­åŒ…å†…ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-string">&quot;&quot;</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">bb</span> = <span class="hljs-keyword">move</span> ||v; <span class="hljs-comment">//ç§»åŠ¨æ‰€æœ‰æƒ</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, v); <span class="hljs-comment">//è¿™ä¸€è¡ŒæŠ¥é”™</span><br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2è¿­ä»£å™¨"><a class="markdownIt-Anchor" href="#2è¿­ä»£å™¨"></a> 2.è¿­ä»£å™¨</h2>
<h3 id="1iterator-trait"><a class="markdownIt-Anchor" href="#1iterator-trait"></a> 1.iterator trait</h3>
<p>â€‹	å®ç°nextæ–¹æ³•å³å¯ã€‚</p>
<h3 id="2å‡ ä¸ªè¿­ä»£api"><a class="markdownIt-Anchor" href="#2å‡ ä¸ªè¿­ä»£api"></a> 2.å‡ ä¸ªè¿­ä»£api</h3>
<ul>
<li>iterï¼šåœ¨ä¸å¯å˜å¼•ç”¨ä¸Šåˆ›å»ºè¿­ä»£å™¨</li>
<li>into_iterï¼šåˆ›å»ºçš„è¿­ä»£å™¨ä¼šè·å–æ‰€æœ‰æƒ â€“ ç”¨ä¸€ä¸ªæ•°æ®å¼•å‡ºè¿­ä»£å™¨ï¼Œå¹¶ä¸”å¤ºå–äº†å…ƒæ•°æ®çš„æ‰€æœ‰æƒã€‚</li>
<li>iter_mutï¼šè¿­ä»£å¯å˜çš„å¼•ç”¨ â€“ å¯ä»¥é€šè¿‡è§£å¼•ç”¨ä¿®æ”¹å…¶ä¸­çš„å€¼ã€‚</li>
</ul>
<h3 id="3æ¶ˆè€—äº§ç”Ÿ-è¿­ä»£å™¨"><a class="markdownIt-Anchor" href="#3æ¶ˆè€—äº§ç”Ÿ-è¿­ä»£å™¨"></a> 3.æ¶ˆè€—/äº§ç”Ÿ è¿­ä»£å™¨</h3>
<h4 id="1æ¶ˆè€—æ¶ˆè€—æ€§é€‚é…å™¨"><a class="markdownIt-Anchor" href="#1æ¶ˆè€—æ¶ˆè€—æ€§é€‚é…å™¨"></a> 1.æ¶ˆè€—ï¼ˆæ¶ˆè€—æ€§é€‚é…å™¨ï¼‰</h4>
<p>â€‹	æ¶ˆè€—è¿­ä»£å™¨ï¼šå½“è°ƒç”¨è¿­ä»£å™¨çš„nextæ–¹æ³•æ—¶ï¼Œä¼šæ¶ˆè€—è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨ä¸­çš„å…ƒç´ ä¼šè¢«ä¸€ä¸ªä¸€ä¸ªæ¶ˆé™¤æ‰ï¼Œè¿™å°±æ˜¯å«æ¶ˆè€—çš„åŸå› ã€‚rusté‡Œæœ‰äº›æ–¹æ³•ï¼ˆé’ˆå¯¹äºå®ç°äº†iterator traitçš„ç±»å‹ï¼‰ï¼Œä¼šè‡ªä¸»è°ƒç”¨nextï¼Œä»è€Œæ¶ˆè€—è¿­ä»£å™¨ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">iterator</span> = v.<span class="hljs-title function_ invoke__">iter</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">res</span>: <span class="hljs-type">i32</span> = iterator.<span class="hljs-title function_ invoke__">sum</span>(); <span class="hljs-comment">//sumæ¶ˆè€—äº†è¿­ä»£å™¨</span><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, res);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220122155108279.png" alt="image-20220122155108279"></p>
<p>â€‹	è¦è°ƒç”¨sumè¿™ä¸ªæ–¹æ³•ï¼Œselfå¿…é¡»å®ç°Sizdè¿™ä¸ªtraitï¼Œå¹¶ä¸”æ³›å‹å‚æ•°å¿…é¡»å®ç°äº†Sumè¿™ä¸ªtraitã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-comment">/*</span><br><span class="hljs-comment">1.Sized trait: è¦æ±‚è¿™ä¸ªç±»å‹å¿…é¡»æœ‰å›ºå®šçš„é•¿åº¦ï¼Œå¦‚i32ï¼Œu32</span><br><span class="hljs-comment">2.Sum traitï¼šå¯ä»¥è¿›è¡Œæ±‚å’Œ</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>
<h4 id="2äº§ç”Ÿè¿­ä»£å™¨é€‚é…å™¨"><a class="markdownIt-Anchor" href="#2äº§ç”Ÿè¿­ä»£å™¨é€‚é…å™¨"></a> 2.äº§ç”Ÿï¼ˆè¿­ä»£å™¨é€‚é…å™¨ï¼‰</h4>
<p>â€‹	å°†ä¸€ä¸ªè¿­ä»£å™¨è½¬æ¢æˆå¦ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v1</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">iter1</span> = v1.<span class="hljs-title function_ invoke__">iter</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">map</span> = iter1.<span class="hljs-title function_ invoke__">map</span>(|num| &#123;<br>        <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, num)<br>    &#125;);<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v2</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = map.<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">iter2</span> = v2.<span class="hljs-title function_ invoke__">iter</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	map()æ–¹æ³•ï¼šä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œæ¥æ”¶ä¸¤ä¸ªæ³›å‹å‚æ•°ï¼Œç›®çš„æ˜¯å°†ä¼ è¿›æ¥çš„ç±»å‹Tæ›´æ”¹æˆä¼ å‡ºå»çš„ç±»å‹Fã€‚æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯selfï¼Œè¦æ±‚å®ç°äº†Sizedè¿™ä¸ªtraitã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯Tï¼Œè¦æ±‚å®ç°FnMutè¿™ä¸ªtraitï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå¹¶ä¸”æ˜¯å¯å˜å¼•ç”¨ï¼Œå› ä¸ºè¦å¯¹å‚æ•°è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>â€‹	è°ƒç”¨mapæ–¹æ³•åï¼Œè¿­ä»£å™¨çš„æ‰€æœ‰æƒè¢«Moveã€‚</p>
<h4 id="3è¿­ä»£å™¨é—­åŒ…-æ•è·ç¯å¢ƒ"><a class="markdownIt-Anchor" href="#3è¿­ä»£å™¨é—­åŒ…-æ•è·ç¯å¢ƒ"></a> 3.è¿­ä»£å™¨+é—­åŒ… æ•è·ç¯å¢ƒ</h4>
<p>â€‹	ä½¿ç”¨filter()è¿™ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªè¿­ä»£å™¨é€‚é…å™¨ã€‚æ¥æ”¶ä¸€ä¸ªé—­åŒ…ï¼Œè¿™ä¸ªé—­åŒ…å¿…é¡»è¿”å›boolç±»å‹ã€‚è‹¥æ˜¯è¿”å›trueï¼Œåˆ™å…ƒç´ è¢«åŠ åˆ°è¿­ä»£å™¨é‡Œï¼Œæœ€ç»ˆä½œä¸ºè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">v</span> = Vec::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..<span class="hljs-number">100</span>).<span class="hljs-title function_ invoke__">rev</span>() &#123;<br>        v.<span class="hljs-title function_ invoke__">push</span>(i);<br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">i1</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = v.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">filter</span>(|num| <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        **num &gt; <span class="hljs-number">90</span><br>    &#125;).<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, i1);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ä¼ è¿›é—­åŒ…åï¼Œè¦ç”¨collectè¿›è¡Œæ”¶é›†,è¿”å›ä¸€ä¸ªé›†åˆï¼Œä¸ç„¶é—­åŒ…æ˜¯ä¸ä¼šæ‰§è¡Œçš„</p>
<h4 id="4æ„å»ºè‡ªå®šä¹‰çš„è¿­ä»£å™¨"><a class="markdownIt-Anchor" href="#4æ„å»ºè‡ªå®šä¹‰çš„è¿­ä»£å™¨"></a> 4.æ„å»ºè‡ªå®šä¹‰çš„è¿­ä»£å™¨</h4>
<p>â€‹	å®ç°Iterator traitå³å¯ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">e1</span> = Elem::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, e1.<span class="hljs-title function_ invoke__">next</span>().<span class="hljs-title function_ invoke__">unwrap</span>())<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Elem</span> &#123;<br>    val: <span class="hljs-type">i32</span>,<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Elem</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> Elem &#123;<br>        Elem &#123;<br>            val: <span class="hljs-number">0</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Iterator</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Elem</span> &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span> = <span class="hljs-type">i32</span>;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">next</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-keyword">Self</span>::Item&gt; &#123;<br>        <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">0</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	è¿­ä»£å™¨æ¯”forå¾ªç¯éå†è¦å¿«ä¸€ç‚¹ã€‚</p>
<p>â€‹	ç”¨filteræ–¹æ³•ã€‚</p>
<h1 id="14å‘å¸ƒ"><a class="markdownIt-Anchor" href="#14å‘å¸ƒ"></a> 14.å‘å¸ƒ</h1>
<h1 id="15æ™ºèƒ½æŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#15æ™ºèƒ½æŒ‡é’ˆ"></a> 15.æ™ºèƒ½æŒ‡é’ˆ</h1>
<h2 id="1box-t"><a class="markdownIt-Anchor" href="#1box-t"></a> 1.Box&lt; T &gt;</h2>
<p>â€‹	Rustä¸­æ‰€æœ‰çš„ç±»å‹åœ¨ç¼–è¯‘æ—¶éƒ½ä¼šçŸ¥é“å¤§å°ã€‚</p>
<p>â€‹	è€ƒè™‘Cè¯­è¨€ä¸­çš„é“¾è¡¨çš„å®ç°ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> value;<br>    Node* next;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	æœ‰ä¸¤ä¸ªç±»å‹ï¼Œä¸€ä¸ªæ˜¯intï¼Œä¸€ä¸ªæ˜¯æŒ‡é’ˆã€‚è¿™å®é™…å°±æ˜¯ä¸€ä¸ªé€’å½’ï¼Œåªä¸è¿‡é€’å½’çš„æ˜¯æŒ‡é’ˆï¼Œå¹¶ä¸æ˜¯ç»“æ„ï¼Œå¦‚æœæ˜¯ç»“æ„çš„è¯ï¼Œå°±æ°¸è¿œæ— æ³•çŸ¥é“å£°æ˜ä¸€ä¸ªstructçš„æ—¶å€™åº”è¯¥åˆ†é…å¤šå°‘å¤§å°äº†ã€‚æ‰€ä»¥ç”¨çš„æ˜¯æŒ‡é’ˆã€‚æŒ‡é’ˆå­˜æ”¾åœ¨æ ˆä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªåœ°å€è€Œå·²ã€‚</p>
<p>â€‹	rustä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">l</span> = Node &#123;<br>        value: <span class="hljs-number">1</span>,<br>        next: <span class="hljs-title function_ invoke__">Some</span>(Box::<span class="hljs-title function_ invoke__">new</span>(Node &#123;<br>            value: <span class="hljs-number">2</span>,<br>            next: <span class="hljs-literal">None</span>,<br>        &#125;))<br>    &#125;;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:#?&#125;&quot;</span>, l);<br>&#125;<br><br><span class="hljs-meta">#[derive(Debug)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    value: <span class="hljs-type">i32</span>,<br>    next: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">Box</span>&lt;Node&gt;&gt;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	Boxè¿™ä¸ªç±»å‹å°±æ˜¯ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œå®ç°äº†ä¸¤ä¸ªtraitï¼Œderefçš„ç›®çš„æ˜¯ç¡®ä¿Boxå¯ä»¥è¢«å½“æˆä¸€ä¸ªå¼•ç”¨å®ç°ï¼›dropåˆ™æ˜¯ç¡®ä¿Boxåœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå…¶æŒ‡é’ˆï¼ˆæ ˆå†…å­˜ï¼‰å’ŒæŒ‡å‘çš„æ•°æ®ï¼ˆå †å†…å­˜ï¼‰éƒ½ä¼šè¢«é‡Šæ”¾ã€‚</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220123150617915.png" alt="image-20220123150617915"></p>
<h2 id="2deref-trait"><a class="markdownIt-Anchor" href="#2deref-trait"></a> 2.deref trait</h2>
<h3 id="1ç”¨æ³•"><a class="markdownIt-Anchor" href="#1ç”¨æ³•"></a> 1.ç”¨æ³•</h3>
<p>â€‹	å®ç°è¿™ä¸ªtraitåï¼Œå¯ä»¥ç¡®ä¿ç±»å‹è¢«å½“æˆå¼•ç”¨æ¥ä½¿ç”¨ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">m</span> = Box::<span class="hljs-title function_ invoke__">new</span>(n);<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">3</span>, n);<br>    <span class="hljs-built_in">assert_eq!</span>(<span class="hljs-number">3</span>, *m);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="2å®ç°deref-trait"><a class="markdownIt-Anchor" href="#2å®ç°deref-trait"></a> 2.å®ç°Deref trait</h3>
<p>â€‹	ç»™ç»“æ„å®ç°deref traitå³å¯ã€‚</p>
<p>â€‹	å…·ä½“çš„è¯ï¼Œå°±æ˜¯æŒ‡å®šä¸€ä¸‹ç±»å‹ï¼Œç„¶åå®ç°derefæ–¹æ³•å³å¯ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::ops::Deref;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">m</span> = <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = MyBox::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">assert_eq!</span>(m, *n);<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt;(T);<br><br><span class="hljs-keyword">impl</span>&lt;T&gt; Deref <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyBox</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = T;<br><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-keyword">Self</span>::Target &#123;<br>        &amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">impl</span>&lt;T&gt; MyBox&lt;T&gt; &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(value: T) <span class="hljs-punctuation">-&gt;</span> MyBox&lt;T&gt; &#123;<br>        <span class="hljs-title function_ invoke__">MyBox</span>(value)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="3deref-coercion"><a class="markdownIt-Anchor" href="#3deref-coercion"></a> 3.deref coercion</h3>
<p>â€‹	å‡è®¾å®ç°äº†deref traitï¼Œç„¶åä¼ å…¥çš„æ˜¯å¼•ç”¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨è°ƒç”¨derefæ–¹æ³•ï¼Œå°†&amp;Box<T> -&gt; &amp;Tã€‚</T></p>
<p>â€‹	å¦‚ä¸‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = MyBox::<span class="hljs-title function_ invoke__">new</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>));<br>    <span class="hljs-title function_ invoke__">fun</span>(&amp;a);<br>&#125;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">fun</span>(s: &amp;<span class="hljs-type">str</span>) &#123;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, s);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	é¦–å…ˆå°†&amp;MyBox<String> -&gt; &amp;Stringï¼Œç”±äºStringç±»å‹å®ç°äº†deref traitï¼Œæ‰€ä»¥ &amp;String -&gt; &amp;strï¼Œæ‰€ä»¥å‚æ•°å°±åŒ¹é…äº†ã€‚</String></p>
<p>â€‹	å¹¶ä¸”ï¼Œæ‰€æœ‰çš„è¿™äº›æ“ä½œï¼Œéƒ½æ˜¯åœ¨ç¼–è¯‘æœŸå®Œæˆçš„ï¼Œä¸ä¼šäº§ç”Ÿé¢å¤–çš„è¿è¡Œæ—¶æ€§èƒ½å¼€é”€ã€‚</p>
<h2 id="3drop-trait"><a class="markdownIt-Anchor" href="#3drop-trait"></a> 3.drop trait</h2>
<p>â€‹	å˜é‡åœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨dropæ–¹æ³•ï¼Œæ¥é‡Šæ”¾ç›¸å…³çš„èµ„æºã€‚</p>
<p>â€‹	ä¸å¯ä»¥æå‰è°ƒç”¨drop traitçš„dropæ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥æå‰é‡Šæ”¾èµ„æºï¼Œä½¿ç”¨å¦å¤–ä¸€ä¸ªdropæ–¹æ³•ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-title function_ invoke__">drop</span>(s);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s</span> = String::<span class="hljs-title function_ invoke__">new</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="4rc-t"><a class="markdownIt-Anchor" href="#4rc-t"></a> 4.Rc&lt; T &gt;</h2>
<p>â€‹	å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆ</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s1</span> = Rc::<span class="hljs-title function_ invoke__">new</span>(String::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;hello&quot;</span>));<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s2</span> = Rc::<span class="hljs-title function_ invoke__">clone</span>(&amp;s1);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, Rc::<span class="hljs-title function_ invoke__">strong_count</span>(&amp;s1)); <span class="hljs-comment">//2</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">s3</span> = Rc::<span class="hljs-title function_ invoke__">clone</span>(&amp;s1);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, Rc::<span class="hljs-title function_ invoke__">strong_count</span>(&amp;s1)); <span class="hljs-comment">//3</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	ä¸ºä»€ä¹ˆè¦æœ‰Rc<T>ï¼Ÿ</T></p>
<p>â€‹	æŠŠBox<T>ä¼ è¿›å»ä¹‹åï¼ŒBoxä¼šå¤ºå–Tçš„æ‰€æœ‰æƒï¼Œæ‰€ä»¥å¦‚æœè¿˜æƒ³å¤ç”¨Tçš„è¯ï¼Œæˆ–è€…æ˜¯åœ¨åˆ«çš„åœ°æ–¹ä¼ å…¥Box<T>ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºTå·²ç»è¢«ç§»åŠ¨äº†ã€‚</T></T></p>
<p>â€‹	ä½¿ç”¨Rcå°±ä¸ä¸€æ ·äº†ï¼Œå¦‚æœå‡½æ•°æ¥æ”¶çš„æ˜¯Rc<T>ï¼Œé‚£ä¹ˆä¼ å…¥Rc::clone(&amp;T)å°±å¯ä»¥äº†ï¼Œè¿™ä¸ªcloneå‡½æ•°å¹¶ä¸ä¼šæ·±æ‹·è´ï¼Œåªæ˜¯å¢åŠ å¼•ç”¨è®¡æ•°ï¼Œè¿”å›ä¸€ä¸ªRc<T>ã€‚</T></T></p>
<p>â€‹	ä½¿ç”¨äº†Rc<T>ï¼Œå°±ç›¸å½“äºå•ä¸ªå€¼æœ‰äº†å¤šä¸ªæ‰€æœ‰è€…ã€‚</T></p>
<p>â€‹	Rcä½¿ç”¨çš„æ˜¯ä¸å¯å˜å¼•ç”¨ï¼Œå¦‚æœæ˜¯å¯å˜å¼•ç”¨å°±ä¼šè¿åå¼•ç”¨è§„åˆ™ã€‚å¹¶ä¸”ï¼ŒRcåªèƒ½åœ¨å•çº¿ç¨‹ä¸‹ä½¿ç”¨ã€‚</p>
<h2 id="5rfcell-t"><a class="markdownIt-Anchor" href="#5rfcell-t"></a> 5.RfCell&lt; T &gt;</h2>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220123172820248.png" alt="image-20220123172820248"></p>
<h1 id="16å¹¶å‘"><a class="markdownIt-Anchor" href="#16å¹¶å‘"></a> 16.å¹¶å‘</h1>
<h2 id="1å¤šçº¿ç¨‹"><a class="markdownIt-Anchor" href="#1å¤šçº¿ç¨‹"></a> 1.å¤šçº¿ç¨‹</h2>
<p>â€‹	åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>é€šè¿‡OSçš„apiæ¥åˆ›å»º â€“ è¿è¡Œæ—¶å° â€“ 1  : 1</li>
<li>è¯­è¨€è‡ªå·±å®ç°çš„çº¿ç¨‹ â€“ è¿è¡Œæ—¶å¤§ â€“ M : N</li>
</ul>
<p>â€‹	Rustæä¾›çš„æ˜¯1:1çº¿ç¨‹ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::thread;<br><span class="hljs-keyword">use</span> std::time::Duration;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    thread::<span class="hljs-title function_ invoke__">spawn</span>(|| &#123;<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;thread: &#123;&#125;&quot;</span>, i);<br>            thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">1000</span>));<br>        &#125;<br>    &#125;);<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">5</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;main: &#123;&#125;&quot;</span>, i);<br>        thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">1000</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	è¿™æ ·å†™ï¼Œä¸€æ—¦ä¸»çº¿ç¨‹ç»“æŸäº†ï¼Œæˆ‘ä»¬åˆ›å»ºçš„çº¿ç¨‹ä¹Ÿå°±åœæ­¢äº†ã€‚å¯ä»¥é€šè¿‡joinæ–¹æ³•æ¥é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::thread;<br><span class="hljs-keyword">use</span> std::time::Duration;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">j</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(|| &#123;<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">10</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;thread: &#123;&#125;&quot;</span>, i);<br>            thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">1</span>));<br>        &#125;<br>    &#125;);<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>..<span class="hljs-number">5</span> &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;main: &#123;&#125;&quot;</span>, i);<br>        thread::<span class="hljs-title function_ invoke__">sleep</span>(Duration::<span class="hljs-title function_ invoke__">from_millis</span>(<span class="hljs-number">1</span>));<br>    &#125;<br><br>    j.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>(); <span class="hljs-comment">//åªæœ‰jçš„çº¿ç¨‹ç»“æŸåï¼Œæ‰ä¼šæ¢å¤ä¸»çº¿ç¨‹çš„æ‰§è¡Œ</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	å¯ä»¥ä½¿ç”¨moveå°†ä¸»çº¿ç¨‹é‡Œçš„å€¼çš„æ‰€æœ‰æƒå¼ºåˆ¶ç§»åŠ¨åˆ°åˆ†çº¿ç¨‹ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::thread;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">j</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || &#123;<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> v &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, i);<br>        &#125;<br>    &#125;);<br>    j.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2é€šè¿‡channelå®ç°çº¿ç¨‹é€šä¿¡"><a class="markdownIt-Anchor" href="#2é€šè¿‡channelå®ç°çº¿ç¨‹é€šä¿¡"></a> 2.é€šè¿‡channelå®ç°çº¿ç¨‹é€šä¿¡</h2>
<p>â€‹	é€šè¿‡mpscçš„ä¸€ä¸ªå…³è”å‡½æ•°å¯ä»¥æ„é€ ä¸€ä¸ªå…ƒç»„ï¼ˆsend, receiveï¼‰</p>
<p>â€‹	mpscçš„æ„æ€ï¼šå¤šä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…ã€‚multiple producerï¼Œ single consumer</p>
<p>â€‹	å¯ä»¥é€šè¿‡å…‹éš†æ¥å®ç°å¤šä¸ªå‘é€è€…ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::sync::mpsc;<br><span class="hljs-keyword">use</span> std::thread;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> (send, receive) = mpsc::<span class="hljs-title function_ invoke__">channel</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">send1</span> = send.<span class="hljs-title function_ invoke__">clone</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">j</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">ss</span> = [<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span>, <span class="hljs-string">&quot;!&quot;</span>, <span class="hljs-string">&quot;from&quot;</span>];<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">s</span> <span class="hljs-keyword">in</span> ss &#123;<br>            send.<span class="hljs-title function_ invoke__">send</span>(s).<span class="hljs-title function_ invoke__">unwrap</span>();<br>        &#125;<br>    &#125;);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">j1</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">ss</span> = [<span class="hljs-string">&quot;111hello&quot;</span>, <span class="hljs-string">&quot;111world&quot;</span>, <span class="hljs-string">&quot;!&quot;</span>, <span class="hljs-string">&quot;111from&quot;</span>];<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">s</span> <span class="hljs-keyword">in</span> ss &#123;<br>            send1.<span class="hljs-title function_ invoke__">send</span>(s).<span class="hljs-title function_ invoke__">unwrap</span>();<br>        &#125;<br>    &#125;);<br><br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">r</span> <span class="hljs-keyword">in</span> receive &#123;<br>        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, r);<br>    &#125;<br>    j.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>    j1.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="3mutex-t-å…±äº«å†…å­˜"><a class="markdownIt-Anchor" href="#3mutex-t-å…±äº«å†…å­˜"></a> 3.Mutex&lt; T &gt;å…±äº«å†…å­˜</h2>
<p>â€‹		Mutexå°±æ˜¯ä¸€ä¸ªäº’æ–¥é”ï¼Œä½¿ç”¨æ•°æ®å‰éœ€è¦å…ˆè·å–é”ï¼Œç„¶åä½¿ç”¨å®Œåéœ€è¦é‡Šæ”¾é”ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::sync::&#123;mpsc, Mutex&#125;;<br><span class="hljs-keyword">use</span> std::thread;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = Mutex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">5</span>);<br><br>    &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">num</span> = n.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>        *num = <span class="hljs-number">7</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, n); <span class="hljs-comment">//nä»5åˆ°7</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>â€‹	mutexå¯èƒ½ä¼šäº§ç”Ÿæ­»é”</p>
<h2 id="4arc-t-åŸå­å¼•ç”¨è®¡æ•°"><a class="markdownIt-Anchor" href="#4arc-t-åŸå­å¼•ç”¨è®¡æ•°"></a> 4.Arc&lt; T &gt;åŸå­å¼•ç”¨è®¡æ•°</h2>
<p>â€‹	åœ¨å¤–é¢å…‹éš†å¼•ç”¨ï¼Œç„¶åæŠŠå…‹éš†çš„å¼•ç”¨ä¼ è¿›å»ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::sync::&#123;Arc, mpsc, Mutex&#125;;<br><span class="hljs-keyword">use</span> std::thread;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(Mutex::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">5</span>));<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">l1</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;n);<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">handle</span> = thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">num</span> = l1.<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>        *num += <span class="hljs-number">999</span>;<br>    &#125;);<br>    handle.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, n); <span class="hljs-comment">//1004</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>ceshi:</p>
<p><img src="/img/avatar.png" srcset="/img/loading.gif" lazyload data-original="/2022/04/22/rust-lang/image-20220214142148258.png" alt="image-20220214142148258"></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/04/22/information_theory/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ä¿¡æ¯è®º</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/04/22/cn/">
                        <span class="hidden-mobile">è®¡ç®—æœºç½‘ç»œ</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>















<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


<script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>
</html>
